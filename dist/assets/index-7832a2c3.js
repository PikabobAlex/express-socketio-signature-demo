(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const f of s)if(f.type==="childList")for(const y of f.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&i(y)}).observe(document,{childList:!0,subtree:!0});function n(s){const f={};return s.integrity&&(f.integrity=s.integrity),s.referrerPolicy&&(f.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?f.credentials="include":s.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function i(s){if(s.ep)return;s.ep=!0;const f=n(s);fetch(s.href,f)}})();function c0(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var s=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:function(){return t[i]}})}),n}var dp={exports:{}},ha={},pp={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vs=Symbol.for("react.element"),h0=Symbol.for("react.portal"),f0=Symbol.for("react.fragment"),d0=Symbol.for("react.strict_mode"),p0=Symbol.for("react.profiler"),g0=Symbol.for("react.provider"),m0=Symbol.for("react.context"),v0=Symbol.for("react.forward_ref"),y0=Symbol.for("react.suspense"),_0=Symbol.for("react.memo"),w0=Symbol.for("react.lazy"),qh=Symbol.iterator;function C0(t){return t===null||typeof t!="object"?null:(t=qh&&t[qh]||t["@@iterator"],typeof t=="function"?t:null)}var gp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mp=Object.assign,vp={};function nr(t,e,n){this.props=t,this.context=e,this.refs=vp,this.updater=n||gp}nr.prototype.isReactComponent={};nr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};nr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function yp(){}yp.prototype=nr.prototype;function cc(t,e,n){this.props=t,this.context=e,this.refs=vp,this.updater=n||gp}var hc=cc.prototype=new yp;hc.constructor=cc;mp(hc,nr.prototype);hc.isPureReactComponent=!0;var Qh=Array.isArray,_p=Object.prototype.hasOwnProperty,fc={current:null},wp={key:!0,ref:!0,__self:!0,__source:!0};function Cp(t,e,n){var i,s={},f=null,y=null;if(e!=null)for(i in e.ref!==void 0&&(y=e.ref),e.key!==void 0&&(f=""+e.key),e)_p.call(e,i)&&!wp.hasOwnProperty(i)&&(s[i]=e[i]);var d=arguments.length-2;if(d===1)s.children=n;else if(1<d){for(var r=Array(d),h=0;h<d;h++)r[h]=arguments[h+2];s.children=r}if(t&&t.defaultProps)for(i in d=t.defaultProps,d)s[i]===void 0&&(s[i]=d[i]);return{$$typeof:vs,type:t,key:f,ref:y,props:s,_owner:fc.current}}function S0(t,e){return{$$typeof:vs,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function dc(t){return typeof t=="object"&&t!==null&&t.$$typeof===vs}function T0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Jh=/\/+/g;function Ga(t,e){return typeof t=="object"&&t!==null&&t.key!=null?T0(""+t.key):e.toString(36)}function ao(t,e,n,i,s){var f=typeof t;(f==="undefined"||f==="boolean")&&(t=null);var y=!1;if(t===null)y=!0;else switch(f){case"string":case"number":y=!0;break;case"object":switch(t.$$typeof){case vs:case h0:y=!0}}if(y)return y=t,s=s(y),t=i===""?"."+Ga(y,0):i,Qh(s)?(n="",t!=null&&(n=t.replace(Jh,"$&/")+"/"),ao(s,e,n,"",function(h){return h})):s!=null&&(dc(s)&&(s=S0(s,n+(!s.key||y&&y.key===s.key?"":(""+s.key).replace(Jh,"$&/")+"/")+t)),e.push(s)),1;if(y=0,i=i===""?".":i+":",Qh(t))for(var d=0;d<t.length;d++){f=t[d];var r=i+Ga(f,d);y+=ao(f,e,n,r,s)}else if(r=C0(t),typeof r=="function")for(t=r.call(t),d=0;!(f=t.next()).done;)f=f.value,r=i+Ga(f,d++),y+=ao(f,e,n,r,s);else if(f==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return y}function Rs(t,e,n){if(t==null)return t;var i=[],s=0;return ao(t,i,"","",function(f){return e.call(n,f,s++)}),i}function x0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ot={current:null},lo={transition:null},E0={ReactCurrentDispatcher:ot,ReactCurrentBatchConfig:lo,ReactCurrentOwner:fc};he.Children={map:Rs,forEach:function(t,e,n){Rs(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Rs(t,function(){e++}),e},toArray:function(t){return Rs(t,function(e){return e})||[]},only:function(t){if(!dc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};he.Component=nr;he.Fragment=f0;he.Profiler=p0;he.PureComponent=cc;he.StrictMode=d0;he.Suspense=y0;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E0;he.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=mp({},t.props),s=t.key,f=t.ref,y=t._owner;if(e!=null){if(e.ref!==void 0&&(f=e.ref,y=fc.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var d=t.type.defaultProps;for(r in e)_p.call(e,r)&&!wp.hasOwnProperty(r)&&(i[r]=e[r]===void 0&&d!==void 0?d[r]:e[r])}var r=arguments.length-2;if(r===1)i.children=n;else if(1<r){d=Array(r);for(var h=0;h<r;h++)d[h]=arguments[h+2];i.children=d}return{$$typeof:vs,type:t.type,key:s,ref:f,props:i,_owner:y}};he.createContext=function(t){return t={$$typeof:m0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:g0,_context:t},t.Consumer=t};he.createElement=Cp;he.createFactory=function(t){var e=Cp.bind(null,t);return e.type=t,e};he.createRef=function(){return{current:null}};he.forwardRef=function(t){return{$$typeof:v0,render:t}};he.isValidElement=dc;he.lazy=function(t){return{$$typeof:w0,_payload:{_status:-1,_result:t},_init:x0}};he.memo=function(t,e){return{$$typeof:_0,type:t,compare:e===void 0?null:e}};he.startTransition=function(t){var e=lo.transition;lo.transition={};try{t()}finally{lo.transition=e}};he.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};he.useCallback=function(t,e){return ot.current.useCallback(t,e)};he.useContext=function(t){return ot.current.useContext(t)};he.useDebugValue=function(){};he.useDeferredValue=function(t){return ot.current.useDeferredValue(t)};he.useEffect=function(t,e){return ot.current.useEffect(t,e)};he.useId=function(){return ot.current.useId()};he.useImperativeHandle=function(t,e,n){return ot.current.useImperativeHandle(t,e,n)};he.useInsertionEffect=function(t,e){return ot.current.useInsertionEffect(t,e)};he.useLayoutEffect=function(t,e){return ot.current.useLayoutEffect(t,e)};he.useMemo=function(t,e){return ot.current.useMemo(t,e)};he.useReducer=function(t,e,n){return ot.current.useReducer(t,e,n)};he.useRef=function(t){return ot.current.useRef(t)};he.useState=function(t){return ot.current.useState(t)};he.useSyncExternalStore=function(t,e,n){return ot.current.useSyncExternalStore(t,e,n)};he.useTransition=function(){return ot.current.useTransition()};he.version="18.2.0";pp.exports=he;var ct=pp.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k0=ct,O0=Symbol.for("react.element"),b0=Symbol.for("react.fragment"),A0=Object.prototype.hasOwnProperty,P0=k0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,I0={key:!0,ref:!0,__self:!0,__source:!0};function Sp(t,e,n){var i,s={},f=null,y=null;n!==void 0&&(f=""+n),e.key!==void 0&&(f=""+e.key),e.ref!==void 0&&(y=e.ref);for(i in e)A0.call(e,i)&&!I0.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:O0,type:t,key:f,ref:y,props:s,_owner:P0.current}}ha.Fragment=b0;ha.jsx=Sp;ha.jsxs=Sp;dp.exports=ha;var bt=dp.exports,$l={},Tp={exports:{}},kt={},xp={exports:{}},Ep={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,T){var k=U.length;U.push(T);e:for(;0<k;){var A=k-1>>>1,P=U[A];if(0<s(P,T))U[A]=T,U[k]=P,k=A;else break e}}function n(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var T=U[0],k=U.pop();if(k!==T){U[0]=k;e:for(var A=0,P=U.length,M=P>>>1;A<M;){var b=2*(A+1)-1,E=U[b],I=b+1,D=U[I];if(0>s(E,k))I<P&&0>s(D,E)?(U[A]=D,U[I]=k,A=I):(U[A]=E,U[b]=k,A=b);else if(I<P&&0>s(D,k))U[A]=D,U[I]=k,A=I;else break e}}return T}function s(U,T){var k=U.sortIndex-T.sortIndex;return k!==0?k:U.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;t.unstable_now=function(){return f.now()}}else{var y=Date,d=y.now();t.unstable_now=function(){return y.now()-d}}var r=[],h=[],p=1,o=null,l=3,a=!1,c=!1,g=!1,u=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(U){for(var T=n(h);T!==null;){if(T.callback===null)i(h);else if(T.startTime<=U)i(h),T.sortIndex=T.expirationTime,e(r,T);else break;T=n(h)}}function w(U){if(g=!1,_(U),!c)if(n(r)!==null)c=!0,ie(C);else{var T=n(h);T!==null&&se(w,T.startTime-U)}}function C(U,T){c=!1,g&&(g=!1,m(O),O=-1),a=!0;var k=l;try{for(_(T),o=n(r);o!==null&&(!(o.expirationTime>T)||U&&!Y());){var A=o.callback;if(typeof A=="function"){o.callback=null,l=o.priorityLevel;var P=A(o.expirationTime<=T);T=t.unstable_now(),typeof P=="function"?o.callback=P:o===n(r)&&i(r),_(T)}else i(r);o=n(r)}if(o!==null)var M=!0;else{var b=n(h);b!==null&&se(w,b.startTime-T),M=!1}return M}finally{o=null,l=k,a=!1}}var S=!1,x=null,O=-1,L=5,F=-1;function Y(){return!(t.unstable_now()-F<L)}function Q(){if(x!==null){var U=t.unstable_now();F=U;var T=!0;try{T=x(!0,U)}finally{T?te():(S=!1,x=null)}}else S=!1}var te;if(typeof v=="function")te=function(){v(Q)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,J=q.port2;q.port1.onmessage=Q,te=function(){J.postMessage(null)}}else te=function(){u(Q,0)};function ie(U){x=U,S||(S=!0,te())}function se(U,T){O=u(function(){U(t.unstable_now())},T)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){c||a||(c=!0,ie(C))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return l},t.unstable_getFirstCallbackNode=function(){return n(r)},t.unstable_next=function(U){switch(l){case 1:case 2:case 3:var T=3;break;default:T=l}var k=l;l=T;try{return U()}finally{l=k}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,T){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var k=l;l=U;try{return T()}finally{l=k}},t.unstable_scheduleCallback=function(U,T,k){var A=t.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?A+k:A):k=A,U){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=k+P,U={id:p++,callback:T,priorityLevel:U,startTime:k,expirationTime:P,sortIndex:-1},k>A?(U.sortIndex=k,e(h,U),n(r)===null&&U===n(h)&&(g?(m(O),O=-1):g=!0,se(w,k-A))):(U.sortIndex=P,e(r,U),c||a||(c=!0,ie(C))),U},t.unstable_shouldYield=Y,t.unstable_wrapCallback=function(U){var T=l;return function(){var k=l;l=T;try{return U.apply(this,arguments)}finally{l=k}}}})(Ep);xp.exports=Ep;var D0=xp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kp=ct,Et=D0;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Op=new Set,Hr={};function _i(t,e){Ki(t,e),Ki(t+"Capture",e)}function Ki(t,e){for(Hr[t]=e,t=0;t<e.length;t++)Op.add(e[t])}var mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wl=Object.prototype.hasOwnProperty,R0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zh={},ef={};function L0(t){return Wl.call(ef,t)?!0:Wl.call(Zh,t)?!1:R0.test(t)?ef[t]=!0:(Zh[t]=!0,!1)}function M0(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function F0(t,e,n,i){if(e===null||typeof e>"u"||M0(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function at(t,e,n,i,s,f,y){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=f,this.removeEmptyString=y}var Ge={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ge[t]=new at(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ge[e]=new at(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ge[t]=new at(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ge[t]=new at(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ge[t]=new at(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ge[t]=new at(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ge[t]=new at(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ge[t]=new at(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ge[t]=new at(t,5,!1,t.toLowerCase(),null,!1,!1)});var pc=/[\-:]([a-z])/g;function gc(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(pc,gc);Ge[e]=new at(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(pc,gc);Ge[e]=new at(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(pc,gc);Ge[e]=new at(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ge[t]=new at(t,1,!1,t.toLowerCase(),null,!1,!1)});Ge.xlinkHref=new at("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ge[t]=new at(t,1,!1,t.toLowerCase(),null,!0,!0)});function mc(t,e,n,i){var s=Ge.hasOwnProperty(e)?Ge[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(F0(e,n,s,i)&&(n=null),i||s===null?L0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Cn=kp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ls=Symbol.for("react.element"),Ei=Symbol.for("react.portal"),ki=Symbol.for("react.fragment"),vc=Symbol.for("react.strict_mode"),Xl=Symbol.for("react.profiler"),bp=Symbol.for("react.provider"),Ap=Symbol.for("react.context"),yc=Symbol.for("react.forward_ref"),Yl=Symbol.for("react.suspense"),Gl=Symbol.for("react.suspense_list"),_c=Symbol.for("react.memo"),xn=Symbol.for("react.lazy"),Pp=Symbol.for("react.offscreen"),tf=Symbol.iterator;function cr(t){return t===null||typeof t!="object"?null:(t=tf&&t[tf]||t["@@iterator"],typeof t=="function"?t:null)}var Ae=Object.assign,Ka;function Sr(t){if(Ka===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ka=e&&e[1]||""}return`
`+Ka+t}var qa=!1;function Qa(t,e){if(!t||qa)return"";qa=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var i=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){i=h}t.call(e.prototype)}else{try{throw Error()}catch(h){i=h}t()}}catch(h){if(h&&i&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),f=i.stack.split(`
`),y=s.length-1,d=f.length-1;1<=y&&0<=d&&s[y]!==f[d];)d--;for(;1<=y&&0<=d;y--,d--)if(s[y]!==f[d]){if(y!==1||d!==1)do if(y--,d--,0>d||s[y]!==f[d]){var r=`
`+s[y].replace(" at new "," at ");return t.displayName&&r.includes("<anonymous>")&&(r=r.replace("<anonymous>",t.displayName)),r}while(1<=y&&0<=d);break}}}finally{qa=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Sr(t):""}function N0(t){switch(t.tag){case 5:return Sr(t.type);case 16:return Sr("Lazy");case 13:return Sr("Suspense");case 19:return Sr("SuspenseList");case 0:case 2:case 15:return t=Qa(t.type,!1),t;case 11:return t=Qa(t.type.render,!1),t;case 1:return t=Qa(t.type,!0),t;default:return""}}function Kl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ki:return"Fragment";case Ei:return"Portal";case Xl:return"Profiler";case vc:return"StrictMode";case Yl:return"Suspense";case Gl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ap:return(t.displayName||"Context")+".Consumer";case bp:return(t._context.displayName||"Context")+".Provider";case yc:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _c:return e=t.displayName||null,e!==null?e:Kl(t.type)||"Memo";case xn:e=t._payload,t=t._init;try{return Kl(t(e))}catch{}}return null}function B0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Kl(e);case 8:return e===vc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Vn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ip(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function j0(t){var e=Ip(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,f=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(y){i=""+y,f.call(this,y)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(y){i=""+y},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ms(t){t._valueTracker||(t._valueTracker=j0(t))}function Dp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Ip(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Eo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ql(t,e){var n=e.checked;return Ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function nf(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Vn(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Rp(t,e){e=e.checked,e!=null&&mc(t,"checked",e,!1)}function Ql(t,e){Rp(t,e);var n=Vn(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Jl(t,e.type,n):e.hasOwnProperty("defaultValue")&&Jl(t,e.type,Vn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function rf(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Jl(t,e,n){(e!=="number"||Eo(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Tr=Array.isArray;function Bi(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Vn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Zl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return Ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function sf(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(K(92));if(Tr(n)){if(1<n.length)throw Error(K(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Vn(n)}}function Lp(t,e){var n=Vn(e.value),i=Vn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function of(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Mp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function eu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Mp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Fs,Fp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Fs=Fs||document.createElement("div"),Fs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Fs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function $r(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ar={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},U0=["Webkit","ms","Moz","O"];Object.keys(Ar).forEach(function(t){U0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ar[e]=Ar[t]})});function Np(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ar.hasOwnProperty(t)&&Ar[t]?(""+e).trim():e+"px"}function Bp(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=Np(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var z0=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tu(t,e){if(e){if(z0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function nu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var iu=null;function wc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ru=null,ji=null,Ui=null;function af(t){if(t=ws(t)){if(typeof ru!="function")throw Error(K(280));var e=t.stateNode;e&&(e=ma(e),ru(t.stateNode,t.type,e))}}function jp(t){ji?Ui?Ui.push(t):Ui=[t]:ji=t}function Up(){if(ji){var t=ji,e=Ui;if(Ui=ji=null,af(t),e)for(t=0;t<e.length;t++)af(e[t])}}function zp(t,e){return t(e)}function Vp(){}var Ja=!1;function Hp(t,e,n){if(Ja)return t(e,n);Ja=!0;try{return zp(t,e,n)}finally{Ja=!1,(ji!==null||Ui!==null)&&(Vp(),Up())}}function Wr(t,e){var n=t.stateNode;if(n===null)return null;var i=ma(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(K(231,e,typeof n));return n}var su=!1;if(mn)try{var hr={};Object.defineProperty(hr,"passive",{get:function(){su=!0}}),window.addEventListener("test",hr,hr),window.removeEventListener("test",hr,hr)}catch{su=!1}function V0(t,e,n,i,s,f,y,d,r){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var Pr=!1,ko=null,Oo=!1,ou=null,H0={onError:function(t){Pr=!0,ko=t}};function $0(t,e,n,i,s,f,y,d,r){Pr=!1,ko=null,V0.apply(H0,arguments)}function W0(t,e,n,i,s,f,y,d,r){if($0.apply(this,arguments),Pr){if(Pr){var h=ko;Pr=!1,ko=null}else throw Error(K(198));Oo||(Oo=!0,ou=h)}}function wi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function $p(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function lf(t){if(wi(t)!==t)throw Error(K(188))}function X0(t){var e=t.alternate;if(!e){if(e=wi(t),e===null)throw Error(K(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var f=s.alternate;if(f===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===f.child){for(f=s.child;f;){if(f===n)return lf(s),t;if(f===i)return lf(s),e;f=f.sibling}throw Error(K(188))}if(n.return!==i.return)n=s,i=f;else{for(var y=!1,d=s.child;d;){if(d===n){y=!0,n=s,i=f;break}if(d===i){y=!0,i=s,n=f;break}d=d.sibling}if(!y){for(d=f.child;d;){if(d===n){y=!0,n=f,i=s;break}if(d===i){y=!0,i=f,n=s;break}d=d.sibling}if(!y)throw Error(K(189))}}if(n.alternate!==i)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?t:e}function Wp(t){return t=X0(t),t!==null?Xp(t):null}function Xp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Xp(t);if(e!==null)return e;t=t.sibling}return null}var Yp=Et.unstable_scheduleCallback,uf=Et.unstable_cancelCallback,Y0=Et.unstable_shouldYield,G0=Et.unstable_requestPaint,Re=Et.unstable_now,K0=Et.unstable_getCurrentPriorityLevel,Cc=Et.unstable_ImmediatePriority,Gp=Et.unstable_UserBlockingPriority,bo=Et.unstable_NormalPriority,q0=Et.unstable_LowPriority,Kp=Et.unstable_IdlePriority,fa=null,rn=null;function Q0(t){if(rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(fa,t,void 0,(t.current.flags&128)===128)}catch{}}var Wt=Math.clz32?Math.clz32:e_,J0=Math.log,Z0=Math.LN2;function e_(t){return t>>>=0,t===0?32:31-(J0(t)/Z0|0)|0}var Ns=64,Bs=4194304;function xr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ao(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,f=t.pingedLanes,y=n&268435455;if(y!==0){var d=y&~s;d!==0?i=xr(d):(f&=y,f!==0&&(i=xr(f)))}else y=n&~s,y!==0?i=xr(y):f!==0&&(i=xr(f));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,f=e&-e,s>=f||s===16&&(f&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Wt(e),s=1<<n,i|=t[n],e&=~s;return i}function t_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function n_(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,f=t.pendingLanes;0<f;){var y=31-Wt(f),d=1<<y,r=s[y];r===-1?(!(d&n)||d&i)&&(s[y]=t_(d,e)):r<=e&&(t.expiredLanes|=d),f&=~d}}function au(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function qp(){var t=Ns;return Ns<<=1,!(Ns&4194240)&&(Ns=64),t}function Za(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ys(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Wt(e),t[e]=n}function i_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Wt(n),f=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~f}}function Sc(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Wt(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var _e=0;function Qp(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Jp,Tc,Zp,eg,tg,lu=!1,js=[],In=null,Dn=null,Rn=null,Xr=new Map,Yr=new Map,kn=[],r_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cf(t,e){switch(t){case"focusin":case"focusout":In=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":Rn=null;break;case"pointerover":case"pointerout":Xr.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yr.delete(e.pointerId)}}function fr(t,e,n,i,s,f){return t===null||t.nativeEvent!==f?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:f,targetContainers:[s]},e!==null&&(e=ws(e),e!==null&&Tc(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function s_(t,e,n,i,s){switch(e){case"focusin":return In=fr(In,t,e,n,i,s),!0;case"dragenter":return Dn=fr(Dn,t,e,n,i,s),!0;case"mouseover":return Rn=fr(Rn,t,e,n,i,s),!0;case"pointerover":var f=s.pointerId;return Xr.set(f,fr(Xr.get(f)||null,t,e,n,i,s)),!0;case"gotpointercapture":return f=s.pointerId,Yr.set(f,fr(Yr.get(f)||null,t,e,n,i,s)),!0}return!1}function ng(t){var e=Zn(t.target);if(e!==null){var n=wi(e);if(n!==null){if(e=n.tag,e===13){if(e=$p(n),e!==null){t.blockedOn=e,tg(t.priority,function(){Zp(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function uo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=uu(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);iu=i,n.target.dispatchEvent(i),iu=null}else return e=ws(n),e!==null&&Tc(e),t.blockedOn=n,!1;e.shift()}return!0}function hf(t,e,n){uo(t)&&n.delete(e)}function o_(){lu=!1,In!==null&&uo(In)&&(In=null),Dn!==null&&uo(Dn)&&(Dn=null),Rn!==null&&uo(Rn)&&(Rn=null),Xr.forEach(hf),Yr.forEach(hf)}function dr(t,e){t.blockedOn===e&&(t.blockedOn=null,lu||(lu=!0,Et.unstable_scheduleCallback(Et.unstable_NormalPriority,o_)))}function Gr(t){function e(s){return dr(s,t)}if(0<js.length){dr(js[0],t);for(var n=1;n<js.length;n++){var i=js[n];i.blockedOn===t&&(i.blockedOn=null)}}for(In!==null&&dr(In,t),Dn!==null&&dr(Dn,t),Rn!==null&&dr(Rn,t),Xr.forEach(e),Yr.forEach(e),n=0;n<kn.length;n++)i=kn[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<kn.length&&(n=kn[0],n.blockedOn===null);)ng(n),n.blockedOn===null&&kn.shift()}var zi=Cn.ReactCurrentBatchConfig,Po=!0;function a_(t,e,n,i){var s=_e,f=zi.transition;zi.transition=null;try{_e=1,xc(t,e,n,i)}finally{_e=s,zi.transition=f}}function l_(t,e,n,i){var s=_e,f=zi.transition;zi.transition=null;try{_e=4,xc(t,e,n,i)}finally{_e=s,zi.transition=f}}function xc(t,e,n,i){if(Po){var s=uu(t,e,n,i);if(s===null)ul(t,e,i,Io,n),cf(t,i);else if(s_(s,t,e,n,i))i.stopPropagation();else if(cf(t,i),e&4&&-1<r_.indexOf(t)){for(;s!==null;){var f=ws(s);if(f!==null&&Jp(f),f=uu(t,e,n,i),f===null&&ul(t,e,i,Io,n),f===s)break;s=f}s!==null&&i.stopPropagation()}else ul(t,e,i,null,n)}}var Io=null;function uu(t,e,n,i){if(Io=null,t=wc(i),t=Zn(t),t!==null)if(e=wi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=$p(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Io=t,null}function ig(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(K0()){case Cc:return 1;case Gp:return 4;case bo:case q0:return 16;case Kp:return 536870912;default:return 16}default:return 16}}var An=null,Ec=null,co=null;function rg(){if(co)return co;var t,e=Ec,n=e.length,i,s="value"in An?An.value:An.textContent,f=s.length;for(t=0;t<n&&e[t]===s[t];t++);var y=n-t;for(i=1;i<=y&&e[n-i]===s[f-i];i++);return co=s.slice(t,1<i?1-i:void 0)}function ho(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Us(){return!0}function ff(){return!1}function Ot(t){function e(n,i,s,f,y){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=f,this.target=y,this.currentTarget=null;for(var d in t)t.hasOwnProperty(d)&&(n=t[d],this[d]=n?n(f):f[d]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Us:ff,this.isPropagationStopped=ff,this}return Ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Us)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Us)},persist:function(){},isPersistent:Us}),e}var ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kc=Ot(ir),_s=Ae({},ir,{view:0,detail:0}),u_=Ot(_s),el,tl,pr,da=Ae({},_s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==pr&&(pr&&t.type==="mousemove"?(el=t.screenX-pr.screenX,tl=t.screenY-pr.screenY):tl=el=0,pr=t),el)},movementY:function(t){return"movementY"in t?t.movementY:tl}}),df=Ot(da),c_=Ae({},da,{dataTransfer:0}),h_=Ot(c_),f_=Ae({},_s,{relatedTarget:0}),nl=Ot(f_),d_=Ae({},ir,{animationName:0,elapsedTime:0,pseudoElement:0}),p_=Ot(d_),g_=Ae({},ir,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),m_=Ot(g_),v_=Ae({},ir,{data:0}),pf=Ot(v_),y_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},__={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},w_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function C_(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=w_[t])?!!e[t]:!1}function Oc(){return C_}var S_=Ae({},_s,{key:function(t){if(t.key){var e=y_[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ho(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?__[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oc,charCode:function(t){return t.type==="keypress"?ho(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ho(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),T_=Ot(S_),x_=Ae({},da,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gf=Ot(x_),E_=Ae({},_s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oc}),k_=Ot(E_),O_=Ae({},ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),b_=Ot(O_),A_=Ae({},da,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),P_=Ot(A_),I_=[9,13,27,32],bc=mn&&"CompositionEvent"in window,Ir=null;mn&&"documentMode"in document&&(Ir=document.documentMode);var D_=mn&&"TextEvent"in window&&!Ir,sg=mn&&(!bc||Ir&&8<Ir&&11>=Ir),mf=String.fromCharCode(32),vf=!1;function og(t,e){switch(t){case"keyup":return I_.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ag(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Oi=!1;function R_(t,e){switch(t){case"compositionend":return ag(e);case"keypress":return e.which!==32?null:(vf=!0,mf);case"textInput":return t=e.data,t===mf&&vf?null:t;default:return null}}function L_(t,e){if(Oi)return t==="compositionend"||!bc&&og(t,e)?(t=rg(),co=Ec=An=null,Oi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return sg&&e.locale!=="ko"?null:e.data;default:return null}}var M_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!M_[t.type]:e==="textarea"}function lg(t,e,n,i){jp(i),e=Do(e,"onChange"),0<e.length&&(n=new kc("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Dr=null,Kr=null;function F_(t){_g(t,0)}function pa(t){var e=Pi(t);if(Dp(e))return t}function N_(t,e){if(t==="change")return e}var ug=!1;if(mn){var il;if(mn){var rl="oninput"in document;if(!rl){var _f=document.createElement("div");_f.setAttribute("oninput","return;"),rl=typeof _f.oninput=="function"}il=rl}else il=!1;ug=il&&(!document.documentMode||9<document.documentMode)}function wf(){Dr&&(Dr.detachEvent("onpropertychange",cg),Kr=Dr=null)}function cg(t){if(t.propertyName==="value"&&pa(Kr)){var e=[];lg(e,Kr,t,wc(t)),Hp(F_,e)}}function B_(t,e,n){t==="focusin"?(wf(),Dr=e,Kr=n,Dr.attachEvent("onpropertychange",cg)):t==="focusout"&&wf()}function j_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pa(Kr)}function U_(t,e){if(t==="click")return pa(e)}function z_(t,e){if(t==="input"||t==="change")return pa(e)}function V_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yt=typeof Object.is=="function"?Object.is:V_;function qr(t,e){if(Yt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!Wl.call(e,s)||!Yt(t[s],e[s]))return!1}return!0}function Cf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Sf(t,e){var n=Cf(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Cf(n)}}function hg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?hg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function fg(){for(var t=window,e=Eo();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Eo(t.document)}return e}function Ac(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function H_(t){var e=fg(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hg(n.ownerDocument.documentElement,n)){if(i!==null&&Ac(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,f=Math.min(i.start,s);i=i.end===void 0?f:Math.min(i.end,s),!t.extend&&f>i&&(s=i,i=f,f=s),s=Sf(n,f);var y=Sf(n,i);s&&y&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==y.node||t.focusOffset!==y.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),f>i?(t.addRange(e),t.extend(y.node,y.offset)):(e.setEnd(y.node,y.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var $_=mn&&"documentMode"in document&&11>=document.documentMode,bi=null,cu=null,Rr=null,hu=!1;function Tf(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;hu||bi==null||bi!==Eo(i)||(i=bi,"selectionStart"in i&&Ac(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Rr&&qr(Rr,i)||(Rr=i,i=Do(cu,"onSelect"),0<i.length&&(e=new kc("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=bi)))}function zs(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ai={animationend:zs("Animation","AnimationEnd"),animationiteration:zs("Animation","AnimationIteration"),animationstart:zs("Animation","AnimationStart"),transitionend:zs("Transition","TransitionEnd")},sl={},dg={};mn&&(dg=document.createElement("div").style,"AnimationEvent"in window||(delete Ai.animationend.animation,delete Ai.animationiteration.animation,delete Ai.animationstart.animation),"TransitionEvent"in window||delete Ai.transitionend.transition);function ga(t){if(sl[t])return sl[t];if(!Ai[t])return t;var e=Ai[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in dg)return sl[t]=e[n];return t}var pg=ga("animationend"),gg=ga("animationiteration"),mg=ga("animationstart"),vg=ga("transitionend"),yg=new Map,xf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $n(t,e){yg.set(t,e),_i(e,[t])}for(var ol=0;ol<xf.length;ol++){var al=xf[ol],W_=al.toLowerCase(),X_=al[0].toUpperCase()+al.slice(1);$n(W_,"on"+X_)}$n(pg,"onAnimationEnd");$n(gg,"onAnimationIteration");$n(mg,"onAnimationStart");$n("dblclick","onDoubleClick");$n("focusin","onFocus");$n("focusout","onBlur");$n(vg,"onTransitionEnd");Ki("onMouseEnter",["mouseout","mouseover"]);Ki("onMouseLeave",["mouseout","mouseover"]);Ki("onPointerEnter",["pointerout","pointerover"]);Ki("onPointerLeave",["pointerout","pointerover"]);_i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_i("onBeforeInput",["compositionend","keypress","textInput","paste"]);_i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Er="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Y_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Er));function Ef(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,W0(i,e,void 0,t),t.currentTarget=null}function _g(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var f=void 0;if(e)for(var y=i.length-1;0<=y;y--){var d=i[y],r=d.instance,h=d.currentTarget;if(d=d.listener,r!==f&&s.isPropagationStopped())break e;Ef(s,d,h),f=r}else for(y=0;y<i.length;y++){if(d=i[y],r=d.instance,h=d.currentTarget,d=d.listener,r!==f&&s.isPropagationStopped())break e;Ef(s,d,h),f=r}}}if(Oo)throw t=ou,Oo=!1,ou=null,t}function Se(t,e){var n=e[mu];n===void 0&&(n=e[mu]=new Set);var i=t+"__bubble";n.has(i)||(wg(e,t,2,!1),n.add(i))}function ll(t,e,n){var i=0;e&&(i|=4),wg(n,t,i,e)}var Vs="_reactListening"+Math.random().toString(36).slice(2);function Qr(t){if(!t[Vs]){t[Vs]=!0,Op.forEach(function(n){n!=="selectionchange"&&(Y_.has(n)||ll(n,!1,t),ll(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Vs]||(e[Vs]=!0,ll("selectionchange",!1,e))}}function wg(t,e,n,i){switch(ig(e)){case 1:var s=a_;break;case 4:s=l_;break;default:s=xc}n=s.bind(null,e,n,t),s=void 0,!su||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function ul(t,e,n,i,s){var f=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var y=i.tag;if(y===3||y===4){var d=i.stateNode.containerInfo;if(d===s||d.nodeType===8&&d.parentNode===s)break;if(y===4)for(y=i.return;y!==null;){var r=y.tag;if((r===3||r===4)&&(r=y.stateNode.containerInfo,r===s||r.nodeType===8&&r.parentNode===s))return;y=y.return}for(;d!==null;){if(y=Zn(d),y===null)return;if(r=y.tag,r===5||r===6){i=f=y;continue e}d=d.parentNode}}i=i.return}Hp(function(){var h=f,p=wc(n),o=[];e:{var l=yg.get(t);if(l!==void 0){var a=kc,c=t;switch(t){case"keypress":if(ho(n)===0)break e;case"keydown":case"keyup":a=T_;break;case"focusin":c="focus",a=nl;break;case"focusout":c="blur",a=nl;break;case"beforeblur":case"afterblur":a=nl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":a=df;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":a=h_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":a=k_;break;case pg:case gg:case mg:a=p_;break;case vg:a=b_;break;case"scroll":a=u_;break;case"wheel":a=P_;break;case"copy":case"cut":case"paste":a=m_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":a=gf}var g=(e&4)!==0,u=!g&&t==="scroll",m=g?l!==null?l+"Capture":null:l;g=[];for(var v=h,_;v!==null;){_=v;var w=_.stateNode;if(_.tag===5&&w!==null&&(_=w,m!==null&&(w=Wr(v,m),w!=null&&g.push(Jr(v,w,_)))),u)break;v=v.return}0<g.length&&(l=new a(l,c,null,n,p),o.push({event:l,listeners:g}))}}if(!(e&7)){e:{if(l=t==="mouseover"||t==="pointerover",a=t==="mouseout"||t==="pointerout",l&&n!==iu&&(c=n.relatedTarget||n.fromElement)&&(Zn(c)||c[vn]))break e;if((a||l)&&(l=p.window===p?p:(l=p.ownerDocument)?l.defaultView||l.parentWindow:window,a?(c=n.relatedTarget||n.toElement,a=h,c=c?Zn(c):null,c!==null&&(u=wi(c),c!==u||c.tag!==5&&c.tag!==6)&&(c=null)):(a=null,c=h),a!==c)){if(g=df,w="onMouseLeave",m="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=gf,w="onPointerLeave",m="onPointerEnter",v="pointer"),u=a==null?l:Pi(a),_=c==null?l:Pi(c),l=new g(w,v+"leave",a,n,p),l.target=u,l.relatedTarget=_,w=null,Zn(p)===h&&(g=new g(m,v+"enter",c,n,p),g.target=_,g.relatedTarget=u,w=g),u=w,a&&c)t:{for(g=a,m=c,v=0,_=g;_;_=Si(_))v++;for(_=0,w=m;w;w=Si(w))_++;for(;0<v-_;)g=Si(g),v--;for(;0<_-v;)m=Si(m),_--;for(;v--;){if(g===m||m!==null&&g===m.alternate)break t;g=Si(g),m=Si(m)}g=null}else g=null;a!==null&&kf(o,l,a,g,!1),c!==null&&u!==null&&kf(o,u,c,g,!0)}}e:{if(l=h?Pi(h):window,a=l.nodeName&&l.nodeName.toLowerCase(),a==="select"||a==="input"&&l.type==="file")var C=N_;else if(yf(l))if(ug)C=z_;else{C=j_;var S=B_}else(a=l.nodeName)&&a.toLowerCase()==="input"&&(l.type==="checkbox"||l.type==="radio")&&(C=U_);if(C&&(C=C(t,h))){lg(o,C,n,p);break e}S&&S(t,l,h),t==="focusout"&&(S=l._wrapperState)&&S.controlled&&l.type==="number"&&Jl(l,"number",l.value)}switch(S=h?Pi(h):window,t){case"focusin":(yf(S)||S.contentEditable==="true")&&(bi=S,cu=h,Rr=null);break;case"focusout":Rr=cu=bi=null;break;case"mousedown":hu=!0;break;case"contextmenu":case"mouseup":case"dragend":hu=!1,Tf(o,n,p);break;case"selectionchange":if($_)break;case"keydown":case"keyup":Tf(o,n,p)}var x;if(bc)e:{switch(t){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Oi?og(t,n)&&(O="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(O="onCompositionStart");O&&(sg&&n.locale!=="ko"&&(Oi||O!=="onCompositionStart"?O==="onCompositionEnd"&&Oi&&(x=rg()):(An=p,Ec="value"in An?An.value:An.textContent,Oi=!0)),S=Do(h,O),0<S.length&&(O=new pf(O,t,null,n,p),o.push({event:O,listeners:S}),x?O.data=x:(x=ag(n),x!==null&&(O.data=x)))),(x=D_?R_(t,n):L_(t,n))&&(h=Do(h,"onBeforeInput"),0<h.length&&(p=new pf("onBeforeInput","beforeinput",null,n,p),o.push({event:p,listeners:h}),p.data=x))}_g(o,e)})}function Jr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Do(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,f=s.stateNode;s.tag===5&&f!==null&&(s=f,f=Wr(t,n),f!=null&&i.unshift(Jr(t,f,s)),f=Wr(t,e),f!=null&&i.push(Jr(t,f,s))),t=t.return}return i}function Si(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function kf(t,e,n,i,s){for(var f=e._reactName,y=[];n!==null&&n!==i;){var d=n,r=d.alternate,h=d.stateNode;if(r!==null&&r===i)break;d.tag===5&&h!==null&&(d=h,s?(r=Wr(n,f),r!=null&&y.unshift(Jr(n,r,d))):s||(r=Wr(n,f),r!=null&&y.push(Jr(n,r,d)))),n=n.return}y.length!==0&&t.push({event:e,listeners:y})}var G_=/\r\n?/g,K_=/\u0000|\uFFFD/g;function Of(t){return(typeof t=="string"?t:""+t).replace(G_,`
`).replace(K_,"")}function Hs(t,e,n){if(e=Of(e),Of(t)!==e&&n)throw Error(K(425))}function Ro(){}var fu=null,du=null;function pu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var gu=typeof setTimeout=="function"?setTimeout:void 0,q_=typeof clearTimeout=="function"?clearTimeout:void 0,bf=typeof Promise=="function"?Promise:void 0,Q_=typeof queueMicrotask=="function"?queueMicrotask:typeof bf<"u"?function(t){return bf.resolve(null).then(t).catch(J_)}:gu;function J_(t){setTimeout(function(){throw t})}function cl(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),Gr(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);Gr(e)}function Ln(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Af(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var rr=Math.random().toString(36).slice(2),Zt="__reactFiber$"+rr,Zr="__reactProps$"+rr,vn="__reactContainer$"+rr,mu="__reactEvents$"+rr,Z_="__reactListeners$"+rr,ew="__reactHandles$"+rr;function Zn(t){var e=t[Zt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[vn]||n[Zt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Af(t);t!==null;){if(n=t[Zt])return n;t=Af(t)}return e}t=n,n=t.parentNode}return null}function ws(t){return t=t[Zt]||t[vn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Pi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function ma(t){return t[Zr]||null}var vu=[],Ii=-1;function Wn(t){return{current:t}}function xe(t){0>Ii||(t.current=vu[Ii],vu[Ii]=null,Ii--)}function Ce(t,e){Ii++,vu[Ii]=t.current,t.current=e}var Hn={},et=Wn(Hn),ft=Wn(!1),ci=Hn;function qi(t,e){var n=t.type.contextTypes;if(!n)return Hn;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},f;for(f in n)s[f]=e[f];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function dt(t){return t=t.childContextTypes,t!=null}function Lo(){xe(ft),xe(et)}function Pf(t,e,n){if(et.current!==Hn)throw Error(K(168));Ce(et,e),Ce(ft,n)}function Cg(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(K(108,B0(t)||"Unknown",s));return Ae({},n,i)}function Mo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hn,ci=et.current,Ce(et,t),Ce(ft,ft.current),!0}function If(t,e,n){var i=t.stateNode;if(!i)throw Error(K(169));n?(t=Cg(t,e,ci),i.__reactInternalMemoizedMergedChildContext=t,xe(ft),xe(et),Ce(et,t)):xe(ft),Ce(ft,n)}var hn=null,va=!1,hl=!1;function Sg(t){hn===null?hn=[t]:hn.push(t)}function tw(t){va=!0,Sg(t)}function Xn(){if(!hl&&hn!==null){hl=!0;var t=0,e=_e;try{var n=hn;for(_e=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}hn=null,va=!1}catch(s){throw hn!==null&&(hn=hn.slice(t+1)),Yp(Cc,Xn),s}finally{_e=e,hl=!1}}return null}var Di=[],Ri=0,Fo=null,No=0,At=[],Pt=0,hi=null,fn=1,dn="";function qn(t,e){Di[Ri++]=No,Di[Ri++]=Fo,Fo=t,No=e}function Tg(t,e,n){At[Pt++]=fn,At[Pt++]=dn,At[Pt++]=hi,hi=t;var i=fn;t=dn;var s=32-Wt(i)-1;i&=~(1<<s),n+=1;var f=32-Wt(e)+s;if(30<f){var y=s-s%5;f=(i&(1<<y)-1).toString(32),i>>=y,s-=y,fn=1<<32-Wt(e)+s|n<<s|i,dn=f+t}else fn=1<<f|n<<s|i,dn=t}function Pc(t){t.return!==null&&(qn(t,1),Tg(t,1,0))}function Ic(t){for(;t===Fo;)Fo=Di[--Ri],Di[Ri]=null,No=Di[--Ri],Di[Ri]=null;for(;t===hi;)hi=At[--Pt],At[Pt]=null,dn=At[--Pt],At[Pt]=null,fn=At[--Pt],At[Pt]=null}var Tt=null,wt=null,ke=!1,Ht=null;function xg(t,e){var n=Rt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Df(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Tt=t,wt=Ln(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Tt=t,wt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=hi!==null?{id:fn,overflow:dn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Rt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Tt=t,wt=null,!0):!1;default:return!1}}function yu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function _u(t){if(ke){var e=wt;if(e){var n=e;if(!Df(t,e)){if(yu(t))throw Error(K(418));e=Ln(n.nextSibling);var i=Tt;e&&Df(t,e)?xg(i,n):(t.flags=t.flags&-4097|2,ke=!1,Tt=t)}}else{if(yu(t))throw Error(K(418));t.flags=t.flags&-4097|2,ke=!1,Tt=t}}}function Rf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tt=t}function $s(t){if(t!==Tt)return!1;if(!ke)return Rf(t),ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!pu(t.type,t.memoizedProps)),e&&(e=wt)){if(yu(t))throw Eg(),Error(K(418));for(;e;)xg(t,e),e=Ln(e.nextSibling)}if(Rf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){wt=Ln(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}wt=null}}else wt=Tt?Ln(t.stateNode.nextSibling):null;return!0}function Eg(){for(var t=wt;t;)t=Ln(t.nextSibling)}function Qi(){wt=Tt=null,ke=!1}function Dc(t){Ht===null?Ht=[t]:Ht.push(t)}var nw=Cn.ReactCurrentBatchConfig;function Ut(t,e){if(t&&t.defaultProps){e=Ae({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Bo=Wn(null),jo=null,Li=null,Rc=null;function Lc(){Rc=Li=jo=null}function Mc(t){var e=Bo.current;xe(Bo),t._currentValue=e}function wu(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Vi(t,e){jo=t,Rc=Li=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ht=!0),t.firstContext=null)}function Mt(t){var e=t._currentValue;if(Rc!==t)if(t={context:t,memoizedValue:e,next:null},Li===null){if(jo===null)throw Error(K(308));Li=t,jo.dependencies={lanes:0,firstContext:t}}else Li=Li.next=t;return e}var ei=null;function Fc(t){ei===null?ei=[t]:ei.push(t)}function kg(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,Fc(e)):(n.next=s.next,s.next=n),e.interleaved=n,yn(t,i)}function yn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var En=!1;function Nc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Og(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Mn(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ge&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,yn(t,n)}return s=i.interleaved,s===null?(e.next=e,Fc(i)):(e.next=s.next,s.next=e),i.interleaved=e,yn(t,n)}function fo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Sc(t,n)}}function Lf(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,f=null;if(n=n.firstBaseUpdate,n!==null){do{var y={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};f===null?s=f=y:f=f.next=y,n=n.next}while(n!==null);f===null?s=f=e:f=f.next=e}else s=f=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:f,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Uo(t,e,n,i){var s=t.updateQueue;En=!1;var f=s.firstBaseUpdate,y=s.lastBaseUpdate,d=s.shared.pending;if(d!==null){s.shared.pending=null;var r=d,h=r.next;r.next=null,y===null?f=h:y.next=h,y=r;var p=t.alternate;p!==null&&(p=p.updateQueue,d=p.lastBaseUpdate,d!==y&&(d===null?p.firstBaseUpdate=h:d.next=h,p.lastBaseUpdate=r))}if(f!==null){var o=s.baseState;y=0,p=h=r=null,d=f;do{var l=d.lane,a=d.eventTime;if((i&l)===l){p!==null&&(p=p.next={eventTime:a,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var c=t,g=d;switch(l=e,a=n,g.tag){case 1:if(c=g.payload,typeof c=="function"){o=c.call(a,o,l);break e}o=c;break e;case 3:c.flags=c.flags&-65537|128;case 0:if(c=g.payload,l=typeof c=="function"?c.call(a,o,l):c,l==null)break e;o=Ae({},o,l);break e;case 2:En=!0}}d.callback!==null&&d.lane!==0&&(t.flags|=64,l=s.effects,l===null?s.effects=[d]:l.push(d))}else a={eventTime:a,lane:l,tag:d.tag,payload:d.payload,callback:d.callback,next:null},p===null?(h=p=a,r=o):p=p.next=a,y|=l;if(d=d.next,d===null){if(d=s.shared.pending,d===null)break;l=d,d=l.next,l.next=null,s.lastBaseUpdate=l,s.shared.pending=null}}while(1);if(p===null&&(r=o),s.baseState=r,s.firstBaseUpdate=h,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do y|=s.lane,s=s.next;while(s!==e)}else f===null&&(s.shared.lanes=0);di|=y,t.lanes=y,t.memoizedState=o}}function Mf(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(K(191,s));s.call(i)}}}var bg=new kp.Component().refs;function Cu(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ae({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ya={isMounted:function(t){return(t=t._reactInternals)?wi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=st(),s=Nn(t),f=gn(i,s);f.payload=e,n!=null&&(f.callback=n),e=Mn(t,f,s),e!==null&&(Xt(e,t,s,i),fo(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=st(),s=Nn(t),f=gn(i,s);f.tag=1,f.payload=e,n!=null&&(f.callback=n),e=Mn(t,f,s),e!==null&&(Xt(e,t,s,i),fo(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=st(),i=Nn(t),s=gn(n,i);s.tag=2,e!=null&&(s.callback=e),e=Mn(t,s,i),e!==null&&(Xt(e,t,i,n),fo(e,t,i))}};function Ff(t,e,n,i,s,f,y){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,f,y):e.prototype&&e.prototype.isPureReactComponent?!qr(n,i)||!qr(s,f):!0}function Ag(t,e,n){var i=!1,s=Hn,f=e.contextType;return typeof f=="object"&&f!==null?f=Mt(f):(s=dt(e)?ci:et.current,i=e.contextTypes,f=(i=i!=null)?qi(t,s):Hn),e=new e(n,f),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ya,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=f),e}function Nf(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&ya.enqueueReplaceState(e,e.state,null)}function Su(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs=bg,Nc(t);var f=e.contextType;typeof f=="object"&&f!==null?s.context=Mt(f):(f=dt(e)?ci:et.current,s.context=qi(t,f)),s.state=t.memoizedState,f=e.getDerivedStateFromProps,typeof f=="function"&&(Cu(t,e,f,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ya.enqueueReplaceState(s,s.state,null),Uo(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function gr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var i=n.stateNode}if(!i)throw Error(K(147,t));var s=i,f=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===f?e.ref:(e=function(y){var d=s.refs;d===bg&&(d=s.refs={}),y===null?delete d[f]:d[f]=y},e._stringRef=f,e)}if(typeof t!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,t))}return t}function Ws(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Bf(t){var e=t._init;return e(t._payload)}function Pg(t){function e(m,v){if(t){var _=m.deletions;_===null?(m.deletions=[v],m.flags|=16):_.push(v)}}function n(m,v){if(!t)return null;for(;v!==null;)e(m,v),v=v.sibling;return null}function i(m,v){for(m=new Map;v!==null;)v.key!==null?m.set(v.key,v):m.set(v.index,v),v=v.sibling;return m}function s(m,v){return m=Bn(m,v),m.index=0,m.sibling=null,m}function f(m,v,_){return m.index=_,t?(_=m.alternate,_!==null?(_=_.index,_<v?(m.flags|=2,v):_):(m.flags|=2,v)):(m.flags|=1048576,v)}function y(m){return t&&m.alternate===null&&(m.flags|=2),m}function d(m,v,_,w){return v===null||v.tag!==6?(v=yl(_,m.mode,w),v.return=m,v):(v=s(v,_),v.return=m,v)}function r(m,v,_,w){var C=_.type;return C===ki?p(m,v,_.props.children,w,_.key):v!==null&&(v.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===xn&&Bf(C)===v.type)?(w=s(v,_.props),w.ref=gr(m,v,_),w.return=m,w):(w=_o(_.type,_.key,_.props,null,m.mode,w),w.ref=gr(m,v,_),w.return=m,w)}function h(m,v,_,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=_l(_,m.mode,w),v.return=m,v):(v=s(v,_.children||[]),v.return=m,v)}function p(m,v,_,w,C){return v===null||v.tag!==7?(v=ai(_,m.mode,w,C),v.return=m,v):(v=s(v,_),v.return=m,v)}function o(m,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=yl(""+v,m.mode,_),v.return=m,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ls:return _=_o(v.type,v.key,v.props,null,m.mode,_),_.ref=gr(m,null,v),_.return=m,_;case Ei:return v=_l(v,m.mode,_),v.return=m,v;case xn:var w=v._init;return o(m,w(v._payload),_)}if(Tr(v)||cr(v))return v=ai(v,m.mode,_,null),v.return=m,v;Ws(m,v)}return null}function l(m,v,_,w){var C=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return C!==null?null:d(m,v,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ls:return _.key===C?r(m,v,_,w):null;case Ei:return _.key===C?h(m,v,_,w):null;case xn:return C=_._init,l(m,v,C(_._payload),w)}if(Tr(_)||cr(_))return C!==null?null:p(m,v,_,w,null);Ws(m,_)}return null}function a(m,v,_,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return m=m.get(_)||null,d(v,m,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ls:return m=m.get(w.key===null?_:w.key)||null,r(v,m,w,C);case Ei:return m=m.get(w.key===null?_:w.key)||null,h(v,m,w,C);case xn:var S=w._init;return a(m,v,_,S(w._payload),C)}if(Tr(w)||cr(w))return m=m.get(_)||null,p(v,m,w,C,null);Ws(v,w)}return null}function c(m,v,_,w){for(var C=null,S=null,x=v,O=v=0,L=null;x!==null&&O<_.length;O++){x.index>O?(L=x,x=null):L=x.sibling;var F=l(m,x,_[O],w);if(F===null){x===null&&(x=L);break}t&&x&&F.alternate===null&&e(m,x),v=f(F,v,O),S===null?C=F:S.sibling=F,S=F,x=L}if(O===_.length)return n(m,x),ke&&qn(m,O),C;if(x===null){for(;O<_.length;O++)x=o(m,_[O],w),x!==null&&(v=f(x,v,O),S===null?C=x:S.sibling=x,S=x);return ke&&qn(m,O),C}for(x=i(m,x);O<_.length;O++)L=a(x,m,O,_[O],w),L!==null&&(t&&L.alternate!==null&&x.delete(L.key===null?O:L.key),v=f(L,v,O),S===null?C=L:S.sibling=L,S=L);return t&&x.forEach(function(Y){return e(m,Y)}),ke&&qn(m,O),C}function g(m,v,_,w){var C=cr(_);if(typeof C!="function")throw Error(K(150));if(_=C.call(_),_==null)throw Error(K(151));for(var S=C=null,x=v,O=v=0,L=null,F=_.next();x!==null&&!F.done;O++,F=_.next()){x.index>O?(L=x,x=null):L=x.sibling;var Y=l(m,x,F.value,w);if(Y===null){x===null&&(x=L);break}t&&x&&Y.alternate===null&&e(m,x),v=f(Y,v,O),S===null?C=Y:S.sibling=Y,S=Y,x=L}if(F.done)return n(m,x),ke&&qn(m,O),C;if(x===null){for(;!F.done;O++,F=_.next())F=o(m,F.value,w),F!==null&&(v=f(F,v,O),S===null?C=F:S.sibling=F,S=F);return ke&&qn(m,O),C}for(x=i(m,x);!F.done;O++,F=_.next())F=a(x,m,O,F.value,w),F!==null&&(t&&F.alternate!==null&&x.delete(F.key===null?O:F.key),v=f(F,v,O),S===null?C=F:S.sibling=F,S=F);return t&&x.forEach(function(Q){return e(m,Q)}),ke&&qn(m,O),C}function u(m,v,_,w){if(typeof _=="object"&&_!==null&&_.type===ki&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Ls:e:{for(var C=_.key,S=v;S!==null;){if(S.key===C){if(C=_.type,C===ki){if(S.tag===7){n(m,S.sibling),v=s(S,_.props.children),v.return=m,m=v;break e}}else if(S.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===xn&&Bf(C)===S.type){n(m,S.sibling),v=s(S,_.props),v.ref=gr(m,S,_),v.return=m,m=v;break e}n(m,S);break}else e(m,S);S=S.sibling}_.type===ki?(v=ai(_.props.children,m.mode,w,_.key),v.return=m,m=v):(w=_o(_.type,_.key,_.props,null,m.mode,w),w.ref=gr(m,v,_),w.return=m,m=w)}return y(m);case Ei:e:{for(S=_.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(m,v.sibling),v=s(v,_.children||[]),v.return=m,m=v;break e}else{n(m,v);break}else e(m,v);v=v.sibling}v=_l(_,m.mode,w),v.return=m,m=v}return y(m);case xn:return S=_._init,u(m,v,S(_._payload),w)}if(Tr(_))return c(m,v,_,w);if(cr(_))return g(m,v,_,w);Ws(m,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(n(m,v.sibling),v=s(v,_),v.return=m,m=v):(n(m,v),v=yl(_,m.mode,w),v.return=m,m=v),y(m)):n(m,v)}return u}var Ji=Pg(!0),Ig=Pg(!1),Cs={},sn=Wn(Cs),es=Wn(Cs),ts=Wn(Cs);function ti(t){if(t===Cs)throw Error(K(174));return t}function Bc(t,e){switch(Ce(ts,e),Ce(es,t),Ce(sn,Cs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:eu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=eu(e,t)}xe(sn),Ce(sn,e)}function Zi(){xe(sn),xe(es),xe(ts)}function Dg(t){ti(ts.current);var e=ti(sn.current),n=eu(e,t.type);e!==n&&(Ce(es,t),Ce(sn,n))}function jc(t){es.current===t&&(xe(sn),xe(es))}var Oe=Wn(0);function zo(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var fl=[];function Uc(){for(var t=0;t<fl.length;t++)fl[t]._workInProgressVersionPrimary=null;fl.length=0}var po=Cn.ReactCurrentDispatcher,dl=Cn.ReactCurrentBatchConfig,fi=0,be=null,Be=null,Ue=null,Vo=!1,Lr=!1,ns=0,iw=0;function Ke(){throw Error(K(321))}function zc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Yt(t[n],e[n]))return!1;return!0}function Vc(t,e,n,i,s,f){if(fi=f,be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,po.current=t===null||t.memoizedState===null?aw:lw,t=n(i,s),Lr){f=0;do{if(Lr=!1,ns=0,25<=f)throw Error(K(301));f+=1,Ue=Be=null,e.updateQueue=null,po.current=uw,t=n(i,s)}while(Lr)}if(po.current=Ho,e=Be!==null&&Be.next!==null,fi=0,Ue=Be=be=null,Vo=!1,e)throw Error(K(300));return t}function Hc(){var t=ns!==0;return ns=0,t}function Jt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ue===null?be.memoizedState=Ue=t:Ue=Ue.next=t,Ue}function Ft(){if(Be===null){var t=be.alternate;t=t!==null?t.memoizedState:null}else t=Be.next;var e=Ue===null?be.memoizedState:Ue.next;if(e!==null)Ue=e,Be=t;else{if(t===null)throw Error(K(310));Be=t,t={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},Ue===null?be.memoizedState=Ue=t:Ue=Ue.next=t}return Ue}function is(t,e){return typeof e=="function"?e(t):e}function pl(t){var e=Ft(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var i=Be,s=i.baseQueue,f=n.pending;if(f!==null){if(s!==null){var y=s.next;s.next=f.next,f.next=y}i.baseQueue=s=f,n.pending=null}if(s!==null){f=s.next,i=i.baseState;var d=y=null,r=null,h=f;do{var p=h.lane;if((fi&p)===p)r!==null&&(r=r.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),i=h.hasEagerState?h.eagerState:t(i,h.action);else{var o={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};r===null?(d=r=o,y=i):r=r.next=o,be.lanes|=p,di|=p}h=h.next}while(h!==null&&h!==f);r===null?y=i:r.next=d,Yt(i,e.memoizedState)||(ht=!0),e.memoizedState=i,e.baseState=y,e.baseQueue=r,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do f=s.lane,be.lanes|=f,di|=f,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function gl(t){var e=Ft(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,f=e.memoizedState;if(s!==null){n.pending=null;var y=s=s.next;do f=t(f,y.action),y=y.next;while(y!==s);Yt(f,e.memoizedState)||(ht=!0),e.memoizedState=f,e.baseQueue===null&&(e.baseState=f),n.lastRenderedState=f}return[f,i]}function Rg(){}function Lg(t,e){var n=be,i=Ft(),s=e(),f=!Yt(i.memoizedState,s);if(f&&(i.memoizedState=s,ht=!0),i=i.queue,$c(Ng.bind(null,n,i,t),[t]),i.getSnapshot!==e||f||Ue!==null&&Ue.memoizedState.tag&1){if(n.flags|=2048,rs(9,Fg.bind(null,n,i,s,e),void 0,null),ze===null)throw Error(K(349));fi&30||Mg(n,e,s)}return s}function Mg(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Fg(t,e,n,i){e.value=n,e.getSnapshot=i,Bg(e)&&jg(t)}function Ng(t,e,n){return n(function(){Bg(e)&&jg(t)})}function Bg(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Yt(t,n)}catch{return!0}}function jg(t){var e=yn(t,1);e!==null&&Xt(e,t,1,-1)}function jf(t){var e=Jt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:is,lastRenderedState:t},e.queue=t,t=t.dispatch=ow.bind(null,be,t),[e.memoizedState,t]}function rs(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Ug(){return Ft().memoizedState}function go(t,e,n,i){var s=Jt();be.flags|=t,s.memoizedState=rs(1|e,n,void 0,i===void 0?null:i)}function _a(t,e,n,i){var s=Ft();i=i===void 0?null:i;var f=void 0;if(Be!==null){var y=Be.memoizedState;if(f=y.destroy,i!==null&&zc(i,y.deps)){s.memoizedState=rs(e,n,f,i);return}}be.flags|=t,s.memoizedState=rs(1|e,n,f,i)}function Uf(t,e){return go(8390656,8,t,e)}function $c(t,e){return _a(2048,8,t,e)}function zg(t,e){return _a(4,2,t,e)}function Vg(t,e){return _a(4,4,t,e)}function Hg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function $g(t,e,n){return n=n!=null?n.concat([t]):null,_a(4,4,Hg.bind(null,e,t),n)}function Wc(){}function Wg(t,e){var n=Ft();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&zc(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Xg(t,e){var n=Ft();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&zc(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Yg(t,e,n){return fi&21?(Yt(n,e)||(n=qp(),be.lanes|=n,di|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ht=!0),t.memoizedState=n)}function rw(t,e){var n=_e;_e=n!==0&&4>n?n:4,t(!0);var i=dl.transition;dl.transition={};try{t(!1),e()}finally{_e=n,dl.transition=i}}function Gg(){return Ft().memoizedState}function sw(t,e,n){var i=Nn(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Kg(t))qg(e,n);else if(n=kg(t,e,n,i),n!==null){var s=st();Xt(n,t,i,s),Qg(n,e,i)}}function ow(t,e,n){var i=Nn(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Kg(t))qg(e,s);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=e.lastRenderedReducer,f!==null))try{var y=e.lastRenderedState,d=f(y,n);if(s.hasEagerState=!0,s.eagerState=d,Yt(d,y)){var r=e.interleaved;r===null?(s.next=s,Fc(e)):(s.next=r.next,r.next=s),e.interleaved=s;return}}catch{}finally{}n=kg(t,e,s,i),n!==null&&(s=st(),Xt(n,t,i,s),Qg(n,e,i))}}function Kg(t){var e=t.alternate;return t===be||e!==null&&e===be}function qg(t,e){Lr=Vo=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Qg(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Sc(t,n)}}var Ho={readContext:Mt,useCallback:Ke,useContext:Ke,useEffect:Ke,useImperativeHandle:Ke,useInsertionEffect:Ke,useLayoutEffect:Ke,useMemo:Ke,useReducer:Ke,useRef:Ke,useState:Ke,useDebugValue:Ke,useDeferredValue:Ke,useTransition:Ke,useMutableSource:Ke,useSyncExternalStore:Ke,useId:Ke,unstable_isNewReconciler:!1},aw={readContext:Mt,useCallback:function(t,e){return Jt().memoizedState=[t,e===void 0?null:e],t},useContext:Mt,useEffect:Uf,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,go(4194308,4,Hg.bind(null,e,t),n)},useLayoutEffect:function(t,e){return go(4194308,4,t,e)},useInsertionEffect:function(t,e){return go(4,2,t,e)},useMemo:function(t,e){var n=Jt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Jt();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=sw.bind(null,be,t),[i.memoizedState,t]},useRef:function(t){var e=Jt();return t={current:t},e.memoizedState=t},useState:jf,useDebugValue:Wc,useDeferredValue:function(t){return Jt().memoizedState=t},useTransition:function(){var t=jf(!1),e=t[0];return t=rw.bind(null,t[1]),Jt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=be,s=Jt();if(ke){if(n===void 0)throw Error(K(407));n=n()}else{if(n=e(),ze===null)throw Error(K(349));fi&30||Mg(i,e,n)}s.memoizedState=n;var f={value:n,getSnapshot:e};return s.queue=f,Uf(Ng.bind(null,i,f,t),[t]),i.flags|=2048,rs(9,Fg.bind(null,i,f,n,e),void 0,null),n},useId:function(){var t=Jt(),e=ze.identifierPrefix;if(ke){var n=dn,i=fn;n=(i&~(1<<32-Wt(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=ns++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=iw++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},lw={readContext:Mt,useCallback:Wg,useContext:Mt,useEffect:$c,useImperativeHandle:$g,useInsertionEffect:zg,useLayoutEffect:Vg,useMemo:Xg,useReducer:pl,useRef:Ug,useState:function(){return pl(is)},useDebugValue:Wc,useDeferredValue:function(t){var e=Ft();return Yg(e,Be.memoizedState,t)},useTransition:function(){var t=pl(is)[0],e=Ft().memoizedState;return[t,e]},useMutableSource:Rg,useSyncExternalStore:Lg,useId:Gg,unstable_isNewReconciler:!1},uw={readContext:Mt,useCallback:Wg,useContext:Mt,useEffect:$c,useImperativeHandle:$g,useInsertionEffect:zg,useLayoutEffect:Vg,useMemo:Xg,useReducer:gl,useRef:Ug,useState:function(){return gl(is)},useDebugValue:Wc,useDeferredValue:function(t){var e=Ft();return Be===null?e.memoizedState=t:Yg(e,Be.memoizedState,t)},useTransition:function(){var t=gl(is)[0],e=Ft().memoizedState;return[t,e]},useMutableSource:Rg,useSyncExternalStore:Lg,useId:Gg,unstable_isNewReconciler:!1};function er(t,e){try{var n="",i=e;do n+=N0(i),i=i.return;while(i);var s=n}catch(f){s=`
Error generating stack: `+f.message+`
`+f.stack}return{value:t,source:e,stack:s,digest:null}}function ml(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Tu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var cw=typeof WeakMap=="function"?WeakMap:Map;function Jg(t,e,n){n=gn(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Wo||(Wo=!0,Ru=i),Tu(t,e)},n}function Zg(t,e,n){n=gn(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){Tu(t,e)}}var f=t.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(n.callback=function(){Tu(t,e),typeof i!="function"&&(Fn===null?Fn=new Set([this]):Fn.add(this));var y=e.stack;this.componentDidCatch(e.value,{componentStack:y!==null?y:""})}),n}function zf(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new cw;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=xw.bind(null,t,e,n),e.then(t,t))}function Vf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Hf(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=gn(-1,1),e.tag=2,Mn(n,e,1))),n.lanes|=1),t)}var hw=Cn.ReactCurrentOwner,ht=!1;function it(t,e,n,i){e.child=t===null?Ig(e,null,n,i):Ji(e,t.child,n,i)}function $f(t,e,n,i,s){n=n.render;var f=e.ref;return Vi(e,s),i=Vc(t,e,n,i,f,s),n=Hc(),t!==null&&!ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,_n(t,e,s)):(ke&&n&&Pc(e),e.flags|=1,it(t,e,i,s),e.child)}function Wf(t,e,n,i,s){if(t===null){var f=n.type;return typeof f=="function"&&!Zc(f)&&f.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=f,em(t,e,f,i,s)):(t=_o(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(f=t.child,!(t.lanes&s)){var y=f.memoizedProps;if(n=n.compare,n=n!==null?n:qr,n(y,i)&&t.ref===e.ref)return _n(t,e,s)}return e.flags|=1,t=Bn(f,i),t.ref=e.ref,t.return=e,e.child=t}function em(t,e,n,i,s){if(t!==null){var f=t.memoizedProps;if(qr(f,i)&&t.ref===e.ref)if(ht=!1,e.pendingProps=i=f,(t.lanes&s)!==0)t.flags&131072&&(ht=!0);else return e.lanes=t.lanes,_n(t,e,s)}return xu(t,e,n,i,s)}function tm(t,e,n){var i=e.pendingProps,s=i.children,f=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(Fi,vt),vt|=n;else{if(!(n&1073741824))return t=f!==null?f.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ce(Fi,vt),vt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=f!==null?f.baseLanes:n,Ce(Fi,vt),vt|=i}else f!==null?(i=f.baseLanes|n,e.memoizedState=null):i=n,Ce(Fi,vt),vt|=i;return it(t,e,s,n),e.child}function nm(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function xu(t,e,n,i,s){var f=dt(n)?ci:et.current;return f=qi(e,f),Vi(e,s),n=Vc(t,e,n,i,f,s),i=Hc(),t!==null&&!ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,_n(t,e,s)):(ke&&i&&Pc(e),e.flags|=1,it(t,e,n,s),e.child)}function Xf(t,e,n,i,s){if(dt(n)){var f=!0;Mo(e)}else f=!1;if(Vi(e,s),e.stateNode===null)mo(t,e),Ag(e,n,i),Su(e,n,i,s),i=!0;else if(t===null){var y=e.stateNode,d=e.memoizedProps;y.props=d;var r=y.context,h=n.contextType;typeof h=="object"&&h!==null?h=Mt(h):(h=dt(n)?ci:et.current,h=qi(e,h));var p=n.getDerivedStateFromProps,o=typeof p=="function"||typeof y.getSnapshotBeforeUpdate=="function";o||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(d!==i||r!==h)&&Nf(e,y,i,h),En=!1;var l=e.memoizedState;y.state=l,Uo(e,i,y,s),r=e.memoizedState,d!==i||l!==r||ft.current||En?(typeof p=="function"&&(Cu(e,n,p,i),r=e.memoizedState),(d=En||Ff(e,n,d,i,l,r,h))?(o||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(e.flags|=4194308)):(typeof y.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=r),y.props=i,y.state=r,y.context=h,i=d):(typeof y.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{y=e.stateNode,Og(t,e),d=e.memoizedProps,h=e.type===e.elementType?d:Ut(e.type,d),y.props=h,o=e.pendingProps,l=y.context,r=n.contextType,typeof r=="object"&&r!==null?r=Mt(r):(r=dt(n)?ci:et.current,r=qi(e,r));var a=n.getDerivedStateFromProps;(p=typeof a=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(d!==o||l!==r)&&Nf(e,y,i,r),En=!1,l=e.memoizedState,y.state=l,Uo(e,i,y,s);var c=e.memoizedState;d!==o||l!==c||ft.current||En?(typeof a=="function"&&(Cu(e,n,a,i),c=e.memoizedState),(h=En||Ff(e,n,h,i,l,c,r)||!1)?(p||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(i,c,r),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(i,c,r)),typeof y.componentDidUpdate=="function"&&(e.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof y.componentDidUpdate!="function"||d===t.memoizedProps&&l===t.memoizedState||(e.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&l===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=c),y.props=i,y.state=c,y.context=r,i=h):(typeof y.componentDidUpdate!="function"||d===t.memoizedProps&&l===t.memoizedState||(e.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&l===t.memoizedState||(e.flags|=1024),i=!1)}return Eu(t,e,n,i,f,s)}function Eu(t,e,n,i,s,f){nm(t,e);var y=(e.flags&128)!==0;if(!i&&!y)return s&&If(e,n,!1),_n(t,e,f);i=e.stateNode,hw.current=e;var d=y&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&y?(e.child=Ji(e,t.child,null,f),e.child=Ji(e,null,d,f)):it(t,e,d,f),e.memoizedState=i.state,s&&If(e,n,!0),e.child}function im(t){var e=t.stateNode;e.pendingContext?Pf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Pf(t,e.context,!1),Bc(t,e.containerInfo)}function Yf(t,e,n,i,s){return Qi(),Dc(s),e.flags|=256,it(t,e,n,i),e.child}var ku={dehydrated:null,treeContext:null,retryLane:0};function Ou(t){return{baseLanes:t,cachePool:null,transitions:null}}function rm(t,e,n){var i=e.pendingProps,s=Oe.current,f=!1,y=(e.flags&128)!==0,d;if((d=y)||(d=t!==null&&t.memoizedState===null?!1:(s&2)!==0),d?(f=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ce(Oe,s&1),t===null)return _u(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(y=i.children,t=i.fallback,f?(i=e.mode,f=e.child,y={mode:"hidden",children:y},!(i&1)&&f!==null?(f.childLanes=0,f.pendingProps=y):f=Sa(y,i,0,null),t=ai(t,i,n,null),f.return=e,t.return=e,f.sibling=t,e.child=f,e.child.memoizedState=Ou(n),e.memoizedState=ku,t):Xc(e,y));if(s=t.memoizedState,s!==null&&(d=s.dehydrated,d!==null))return fw(t,e,y,i,d,s,n);if(f){f=i.fallback,y=e.mode,s=t.child,d=s.sibling;var r={mode:"hidden",children:i.children};return!(y&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=r,e.deletions=null):(i=Bn(s,r),i.subtreeFlags=s.subtreeFlags&14680064),d!==null?f=Bn(d,f):(f=ai(f,y,n,null),f.flags|=2),f.return=e,i.return=e,i.sibling=f,e.child=i,i=f,f=e.child,y=t.child.memoizedState,y=y===null?Ou(n):{baseLanes:y.baseLanes|n,cachePool:null,transitions:y.transitions},f.memoizedState=y,f.childLanes=t.childLanes&~n,e.memoizedState=ku,i}return f=t.child,t=f.sibling,i=Bn(f,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Xc(t,e){return e=Sa({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Xs(t,e,n,i){return i!==null&&Dc(i),Ji(e,t.child,null,n),t=Xc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function fw(t,e,n,i,s,f,y){if(n)return e.flags&256?(e.flags&=-257,i=ml(Error(K(422))),Xs(t,e,y,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(f=i.fallback,s=e.mode,i=Sa({mode:"visible",children:i.children},s,0,null),f=ai(f,s,y,null),f.flags|=2,i.return=e,f.return=e,i.sibling=f,e.child=i,e.mode&1&&Ji(e,t.child,null,y),e.child.memoizedState=Ou(y),e.memoizedState=ku,f);if(!(e.mode&1))return Xs(t,e,y,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var d=i.dgst;return i=d,f=Error(K(419)),i=ml(f,i,void 0),Xs(t,e,y,i)}if(d=(y&t.childLanes)!==0,ht||d){if(i=ze,i!==null){switch(y&-y){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|y)?0:s,s!==0&&s!==f.retryLane&&(f.retryLane=s,yn(t,s),Xt(i,t,s,-1))}return Jc(),i=ml(Error(K(421))),Xs(t,e,y,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Ew.bind(null,t),s._reactRetry=e,null):(t=f.treeContext,wt=Ln(s.nextSibling),Tt=e,ke=!0,Ht=null,t!==null&&(At[Pt++]=fn,At[Pt++]=dn,At[Pt++]=hi,fn=t.id,dn=t.overflow,hi=e),e=Xc(e,i.children),e.flags|=4096,e)}function Gf(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),wu(t.return,e,n)}function vl(t,e,n,i,s){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(f.isBackwards=e,f.rendering=null,f.renderingStartTime=0,f.last=i,f.tail=n,f.tailMode=s)}function sm(t,e,n){var i=e.pendingProps,s=i.revealOrder,f=i.tail;if(it(t,e,i.children,n),i=Oe.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Gf(t,n,e);else if(t.tag===19)Gf(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Ce(Oe,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&zo(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),vl(e,!1,s,n,f);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&zo(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}vl(e,!0,n,null,f);break;case"together":vl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function mo(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function _n(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),di|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,n=Bn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Bn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function dw(t,e,n){switch(e.tag){case 3:im(e),Qi();break;case 5:Dg(e);break;case 1:dt(e.type)&&Mo(e);break;case 4:Bc(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;Ce(Bo,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ce(Oe,Oe.current&1),e.flags|=128,null):n&e.child.childLanes?rm(t,e,n):(Ce(Oe,Oe.current&1),t=_n(t,e,n),t!==null?t.sibling:null);Ce(Oe,Oe.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return sm(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ce(Oe,Oe.current),i)break;return null;case 22:case 23:return e.lanes=0,tm(t,e,n)}return _n(t,e,n)}var om,bu,am,lm;om=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};bu=function(){};am=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,ti(sn.current);var f=null;switch(n){case"input":s=ql(t,s),i=ql(t,i),f=[];break;case"select":s=Ae({},s,{value:void 0}),i=Ae({},i,{value:void 0}),f=[];break;case"textarea":s=Zl(t,s),i=Zl(t,i),f=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Ro)}tu(n,i);var y;n=null;for(h in s)if(!i.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var d=s[h];for(y in d)d.hasOwnProperty(y)&&(n||(n={}),n[y]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Hr.hasOwnProperty(h)?f||(f=[]):(f=f||[]).push(h,null));for(h in i){var r=i[h];if(d=s!=null?s[h]:void 0,i.hasOwnProperty(h)&&r!==d&&(r!=null||d!=null))if(h==="style")if(d){for(y in d)!d.hasOwnProperty(y)||r&&r.hasOwnProperty(y)||(n||(n={}),n[y]="");for(y in r)r.hasOwnProperty(y)&&d[y]!==r[y]&&(n||(n={}),n[y]=r[y])}else n||(f||(f=[]),f.push(h,n)),n=r;else h==="dangerouslySetInnerHTML"?(r=r?r.__html:void 0,d=d?d.__html:void 0,r!=null&&d!==r&&(f=f||[]).push(h,r)):h==="children"?typeof r!="string"&&typeof r!="number"||(f=f||[]).push(h,""+r):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Hr.hasOwnProperty(h)?(r!=null&&h==="onScroll"&&Se("scroll",t),f||d===r||(f=[])):(f=f||[]).push(h,r))}n&&(f=f||[]).push("style",n);var h=f;(e.updateQueue=h)&&(e.flags|=4)}};lm=function(t,e,n,i){n!==i&&(e.flags|=4)};function mr(t,e){if(!ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function qe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function pw(t,e,n){var i=e.pendingProps;switch(Ic(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(e),null;case 1:return dt(e.type)&&Lo(),qe(e),null;case 3:return i=e.stateNode,Zi(),xe(ft),xe(et),Uc(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&($s(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ht!==null&&(Fu(Ht),Ht=null))),bu(t,e),qe(e),null;case 5:jc(e);var s=ti(ts.current);if(n=e.type,t!==null&&e.stateNode!=null)am(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(K(166));return qe(e),null}if(t=ti(sn.current),$s(e)){i=e.stateNode,n=e.type;var f=e.memoizedProps;switch(i[Zt]=e,i[Zr]=f,t=(e.mode&1)!==0,n){case"dialog":Se("cancel",i),Se("close",i);break;case"iframe":case"object":case"embed":Se("load",i);break;case"video":case"audio":for(s=0;s<Er.length;s++)Se(Er[s],i);break;case"source":Se("error",i);break;case"img":case"image":case"link":Se("error",i),Se("load",i);break;case"details":Se("toggle",i);break;case"input":nf(i,f),Se("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!f.multiple},Se("invalid",i);break;case"textarea":sf(i,f),Se("invalid",i)}tu(n,f),s=null;for(var y in f)if(f.hasOwnProperty(y)){var d=f[y];y==="children"?typeof d=="string"?i.textContent!==d&&(f.suppressHydrationWarning!==!0&&Hs(i.textContent,d,t),s=["children",d]):typeof d=="number"&&i.textContent!==""+d&&(f.suppressHydrationWarning!==!0&&Hs(i.textContent,d,t),s=["children",""+d]):Hr.hasOwnProperty(y)&&d!=null&&y==="onScroll"&&Se("scroll",i)}switch(n){case"input":Ms(i),rf(i,f,!0);break;case"textarea":Ms(i),of(i);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(i.onclick=Ro)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{y=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Mp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=y.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=y.createElement(n,{is:i.is}):(t=y.createElement(n),n==="select"&&(y=t,i.multiple?y.multiple=!0:i.size&&(y.size=i.size))):t=y.createElementNS(t,n),t[Zt]=e,t[Zr]=i,om(t,e,!1,!1),e.stateNode=t;e:{switch(y=nu(n,i),n){case"dialog":Se("cancel",t),Se("close",t),s=i;break;case"iframe":case"object":case"embed":Se("load",t),s=i;break;case"video":case"audio":for(s=0;s<Er.length;s++)Se(Er[s],t);s=i;break;case"source":Se("error",t),s=i;break;case"img":case"image":case"link":Se("error",t),Se("load",t),s=i;break;case"details":Se("toggle",t),s=i;break;case"input":nf(t,i),s=ql(t,i),Se("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=Ae({},i,{value:void 0}),Se("invalid",t);break;case"textarea":sf(t,i),s=Zl(t,i),Se("invalid",t);break;default:s=i}tu(n,s),d=s;for(f in d)if(d.hasOwnProperty(f)){var r=d[f];f==="style"?Bp(t,r):f==="dangerouslySetInnerHTML"?(r=r?r.__html:void 0,r!=null&&Fp(t,r)):f==="children"?typeof r=="string"?(n!=="textarea"||r!=="")&&$r(t,r):typeof r=="number"&&$r(t,""+r):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Hr.hasOwnProperty(f)?r!=null&&f==="onScroll"&&Se("scroll",t):r!=null&&mc(t,f,r,y))}switch(n){case"input":Ms(t),rf(t,i,!1);break;case"textarea":Ms(t),of(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Vn(i.value));break;case"select":t.multiple=!!i.multiple,f=i.value,f!=null?Bi(t,!!i.multiple,f,!1):i.defaultValue!=null&&Bi(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ro)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return qe(e),null;case 6:if(t&&e.stateNode!=null)lm(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(K(166));if(n=ti(ts.current),ti(sn.current),$s(e)){if(i=e.stateNode,n=e.memoizedProps,i[Zt]=e,(f=i.nodeValue!==n)&&(t=Tt,t!==null))switch(t.tag){case 3:Hs(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Hs(i.nodeValue,n,(t.mode&1)!==0)}f&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Zt]=e,e.stateNode=i}return qe(e),null;case 13:if(xe(Oe),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ke&&wt!==null&&e.mode&1&&!(e.flags&128))Eg(),Qi(),e.flags|=98560,f=!1;else if(f=$s(e),i!==null&&i.dehydrated!==null){if(t===null){if(!f)throw Error(K(318));if(f=e.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(K(317));f[Zt]=e}else Qi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qe(e),f=!1}else Ht!==null&&(Fu(Ht),Ht=null),f=!0;if(!f)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Oe.current&1?je===0&&(je=3):Jc())),e.updateQueue!==null&&(e.flags|=4),qe(e),null);case 4:return Zi(),bu(t,e),t===null&&Qr(e.stateNode.containerInfo),qe(e),null;case 10:return Mc(e.type._context),qe(e),null;case 17:return dt(e.type)&&Lo(),qe(e),null;case 19:if(xe(Oe),f=e.memoizedState,f===null)return qe(e),null;if(i=(e.flags&128)!==0,y=f.rendering,y===null)if(i)mr(f,!1);else{if(je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(y=zo(t),y!==null){for(e.flags|=128,mr(f,!1),i=y.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)f=n,t=i,f.flags&=14680066,y=f.alternate,y===null?(f.childLanes=0,f.lanes=t,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=y.childLanes,f.lanes=y.lanes,f.child=y.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=y.memoizedProps,f.memoizedState=y.memoizedState,f.updateQueue=y.updateQueue,f.type=y.type,t=y.dependencies,f.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ce(Oe,Oe.current&1|2),e.child}t=t.sibling}f.tail!==null&&Re()>tr&&(e.flags|=128,i=!0,mr(f,!1),e.lanes=4194304)}else{if(!i)if(t=zo(y),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),mr(f,!0),f.tail===null&&f.tailMode==="hidden"&&!y.alternate&&!ke)return qe(e),null}else 2*Re()-f.renderingStartTime>tr&&n!==1073741824&&(e.flags|=128,i=!0,mr(f,!1),e.lanes=4194304);f.isBackwards?(y.sibling=e.child,e.child=y):(n=f.last,n!==null?n.sibling=y:e.child=y,f.last=y)}return f.tail!==null?(e=f.tail,f.rendering=e,f.tail=e.sibling,f.renderingStartTime=Re(),e.sibling=null,n=Oe.current,Ce(Oe,i?n&1|2:n&1),e):(qe(e),null);case 22:case 23:return Qc(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?vt&1073741824&&(qe(e),e.subtreeFlags&6&&(e.flags|=8192)):qe(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function gw(t,e){switch(Ic(e),e.tag){case 1:return dt(e.type)&&Lo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Zi(),xe(ft),xe(et),Uc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return jc(e),null;case 13:if(xe(Oe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));Qi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xe(Oe),null;case 4:return Zi(),null;case 10:return Mc(e.type._context),null;case 22:case 23:return Qc(),null;case 24:return null;default:return null}}var Ys=!1,Qe=!1,mw=typeof WeakSet=="function"?WeakSet:Set,re=null;function Mi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Pe(t,e,i)}else n.current=null}function Au(t,e,n){try{n()}catch(i){Pe(t,e,i)}}var Kf=!1;function vw(t,e){if(fu=Po,t=fg(),Ac(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,f=i.focusNode;i=i.focusOffset;try{n.nodeType,f.nodeType}catch{n=null;break e}var y=0,d=-1,r=-1,h=0,p=0,o=t,l=null;t:for(;;){for(var a;o!==n||s!==0&&o.nodeType!==3||(d=y+s),o!==f||i!==0&&o.nodeType!==3||(r=y+i),o.nodeType===3&&(y+=o.nodeValue.length),(a=o.firstChild)!==null;)l=o,o=a;for(;;){if(o===t)break t;if(l===n&&++h===s&&(d=y),l===f&&++p===i&&(r=y),(a=o.nextSibling)!==null)break;o=l,l=o.parentNode}o=a}n=d===-1||r===-1?null:{start:d,end:r}}else n=null}n=n||{start:0,end:0}}else n=null;for(du={focusedElem:t,selectionRange:n},Po=!1,re=e;re!==null;)if(e=re,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,re=t;else for(;re!==null;){e=re;try{var c=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(c!==null){var g=c.memoizedProps,u=c.memoizedState,m=e.stateNode,v=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:Ut(e.type,g),u);m.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(w){Pe(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,re=t;break}re=e.return}return c=Kf,Kf=!1,c}function Mr(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var f=s.destroy;s.destroy=void 0,f!==void 0&&Au(e,n,f)}s=s.next}while(s!==i)}}function wa(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Pu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function um(t){var e=t.alternate;e!==null&&(t.alternate=null,um(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Zt],delete e[Zr],delete e[mu],delete e[Z_],delete e[ew])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function cm(t){return t.tag===5||t.tag===3||t.tag===4}function qf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||cm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Iu(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ro));else if(i!==4&&(t=t.child,t!==null))for(Iu(t,e,n),t=t.sibling;t!==null;)Iu(t,e,n),t=t.sibling}function Du(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Du(t,e,n),t=t.sibling;t!==null;)Du(t,e,n),t=t.sibling}var $e=null,zt=!1;function Sn(t,e,n){for(n=n.child;n!==null;)hm(t,e,n),n=n.sibling}function hm(t,e,n){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(fa,n)}catch{}switch(n.tag){case 5:Qe||Mi(n,e);case 6:var i=$e,s=zt;$e=null,Sn(t,e,n),$e=i,zt=s,$e!==null&&(zt?(t=$e,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):$e.removeChild(n.stateNode));break;case 18:$e!==null&&(zt?(t=$e,n=n.stateNode,t.nodeType===8?cl(t.parentNode,n):t.nodeType===1&&cl(t,n),Gr(t)):cl($e,n.stateNode));break;case 4:i=$e,s=zt,$e=n.stateNode.containerInfo,zt=!0,Sn(t,e,n),$e=i,zt=s;break;case 0:case 11:case 14:case 15:if(!Qe&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var f=s,y=f.destroy;f=f.tag,y!==void 0&&(f&2||f&4)&&Au(n,e,y),s=s.next}while(s!==i)}Sn(t,e,n);break;case 1:if(!Qe&&(Mi(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(d){Pe(n,e,d)}Sn(t,e,n);break;case 21:Sn(t,e,n);break;case 22:n.mode&1?(Qe=(i=Qe)||n.memoizedState!==null,Sn(t,e,n),Qe=i):Sn(t,e,n);break;default:Sn(t,e,n)}}function Qf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new mw),e.forEach(function(i){var s=kw.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function jt(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var f=t,y=e,d=y;e:for(;d!==null;){switch(d.tag){case 5:$e=d.stateNode,zt=!1;break e;case 3:$e=d.stateNode.containerInfo,zt=!0;break e;case 4:$e=d.stateNode.containerInfo,zt=!0;break e}d=d.return}if($e===null)throw Error(K(160));hm(f,y,s),$e=null,zt=!1;var r=s.alternate;r!==null&&(r.return=null),s.return=null}catch(h){Pe(s,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)fm(e,t),e=e.sibling}function fm(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(jt(e,t),Qt(t),i&4){try{Mr(3,t,t.return),wa(3,t)}catch(g){Pe(t,t.return,g)}try{Mr(5,t,t.return)}catch(g){Pe(t,t.return,g)}}break;case 1:jt(e,t),Qt(t),i&512&&n!==null&&Mi(n,n.return);break;case 5:if(jt(e,t),Qt(t),i&512&&n!==null&&Mi(n,n.return),t.flags&32){var s=t.stateNode;try{$r(s,"")}catch(g){Pe(t,t.return,g)}}if(i&4&&(s=t.stateNode,s!=null)){var f=t.memoizedProps,y=n!==null?n.memoizedProps:f,d=t.type,r=t.updateQueue;if(t.updateQueue=null,r!==null)try{d==="input"&&f.type==="radio"&&f.name!=null&&Rp(s,f),nu(d,y);var h=nu(d,f);for(y=0;y<r.length;y+=2){var p=r[y],o=r[y+1];p==="style"?Bp(s,o):p==="dangerouslySetInnerHTML"?Fp(s,o):p==="children"?$r(s,o):mc(s,p,o,h)}switch(d){case"input":Ql(s,f);break;case"textarea":Lp(s,f);break;case"select":var l=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!f.multiple;var a=f.value;a!=null?Bi(s,!!f.multiple,a,!1):l!==!!f.multiple&&(f.defaultValue!=null?Bi(s,!!f.multiple,f.defaultValue,!0):Bi(s,!!f.multiple,f.multiple?[]:"",!1))}s[Zr]=f}catch(g){Pe(t,t.return,g)}}break;case 6:if(jt(e,t),Qt(t),i&4){if(t.stateNode===null)throw Error(K(162));s=t.stateNode,f=t.memoizedProps;try{s.nodeValue=f}catch(g){Pe(t,t.return,g)}}break;case 3:if(jt(e,t),Qt(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Gr(e.containerInfo)}catch(g){Pe(t,t.return,g)}break;case 4:jt(e,t),Qt(t);break;case 13:jt(e,t),Qt(t),s=t.child,s.flags&8192&&(f=s.memoizedState!==null,s.stateNode.isHidden=f,!f||s.alternate!==null&&s.alternate.memoizedState!==null||(Kc=Re())),i&4&&Qf(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(Qe=(h=Qe)||p,jt(e,t),Qe=h):jt(e,t),Qt(t),i&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(re=t,p=t.child;p!==null;){for(o=re=p;re!==null;){switch(l=re,a=l.child,l.tag){case 0:case 11:case 14:case 15:Mr(4,l,l.return);break;case 1:Mi(l,l.return);var c=l.stateNode;if(typeof c.componentWillUnmount=="function"){i=l,n=l.return;try{e=i,c.props=e.memoizedProps,c.state=e.memoizedState,c.componentWillUnmount()}catch(g){Pe(i,n,g)}}break;case 5:Mi(l,l.return);break;case 22:if(l.memoizedState!==null){Zf(o);continue}}a!==null?(a.return=l,re=a):Zf(o)}p=p.sibling}e:for(p=null,o=t;;){if(o.tag===5){if(p===null){p=o;try{s=o.stateNode,h?(f=s.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(d=o.stateNode,r=o.memoizedProps.style,y=r!=null&&r.hasOwnProperty("display")?r.display:null,d.style.display=Np("display",y))}catch(g){Pe(t,t.return,g)}}}else if(o.tag===6){if(p===null)try{o.stateNode.nodeValue=h?"":o.memoizedProps}catch(g){Pe(t,t.return,g)}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===t)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;o.sibling===null;){if(o.return===null||o.return===t)break e;p===o&&(p=null),o=o.return}p===o&&(p=null),o.sibling.return=o.return,o=o.sibling}}break;case 19:jt(e,t),Qt(t),i&4&&Qf(t);break;case 21:break;default:jt(e,t),Qt(t)}}function Qt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(cm(n)){var i=n;break e}n=n.return}throw Error(K(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&($r(s,""),i.flags&=-33);var f=qf(t);Du(t,f,s);break;case 3:case 4:var y=i.stateNode.containerInfo,d=qf(t);Iu(t,d,y);break;default:throw Error(K(161))}}catch(r){Pe(t,t.return,r)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function yw(t,e,n){re=t,dm(t)}function dm(t,e,n){for(var i=(t.mode&1)!==0;re!==null;){var s=re,f=s.child;if(s.tag===22&&i){var y=s.memoizedState!==null||Ys;if(!y){var d=s.alternate,r=d!==null&&d.memoizedState!==null||Qe;d=Ys;var h=Qe;if(Ys=y,(Qe=r)&&!h)for(re=s;re!==null;)y=re,r=y.child,y.tag===22&&y.memoizedState!==null?ed(s):r!==null?(r.return=y,re=r):ed(s);for(;f!==null;)re=f,dm(f),f=f.sibling;re=s,Ys=d,Qe=h}Jf(t)}else s.subtreeFlags&8772&&f!==null?(f.return=s,re=f):Jf(t)}}function Jf(t){for(;re!==null;){var e=re;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qe||wa(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Qe)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ut(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var f=e.updateQueue;f!==null&&Mf(e,f,i);break;case 3:var y=e.updateQueue;if(y!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Mf(e,y,n)}break;case 5:var d=e.stateNode;if(n===null&&e.flags&4){n=d;var r=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":r.autoFocus&&n.focus();break;case"img":r.src&&(n.src=r.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var o=p.dehydrated;o!==null&&Gr(o)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}Qe||e.flags&512&&Pu(e)}catch(l){Pe(e,e.return,l)}}if(e===t){re=null;break}if(n=e.sibling,n!==null){n.return=e.return,re=n;break}re=e.return}}function Zf(t){for(;re!==null;){var e=re;if(e===t){re=null;break}var n=e.sibling;if(n!==null){n.return=e.return,re=n;break}re=e.return}}function ed(t){for(;re!==null;){var e=re;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{wa(4,e)}catch(r){Pe(e,n,r)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(r){Pe(e,s,r)}}var f=e.return;try{Pu(e)}catch(r){Pe(e,f,r)}break;case 5:var y=e.return;try{Pu(e)}catch(r){Pe(e,y,r)}}}catch(r){Pe(e,e.return,r)}if(e===t){re=null;break}var d=e.sibling;if(d!==null){d.return=e.return,re=d;break}re=e.return}}var _w=Math.ceil,$o=Cn.ReactCurrentDispatcher,Yc=Cn.ReactCurrentOwner,Lt=Cn.ReactCurrentBatchConfig,ge=0,ze=null,Fe=null,Xe=0,vt=0,Fi=Wn(0),je=0,ss=null,di=0,Ca=0,Gc=0,Fr=null,ut=null,Kc=0,tr=1/0,cn=null,Wo=!1,Ru=null,Fn=null,Gs=!1,Pn=null,Xo=0,Nr=0,Lu=null,vo=-1,yo=0;function st(){return ge&6?Re():vo!==-1?vo:vo=Re()}function Nn(t){return t.mode&1?ge&2&&Xe!==0?Xe&-Xe:nw.transition!==null?(yo===0&&(yo=qp()),yo):(t=_e,t!==0||(t=window.event,t=t===void 0?16:ig(t.type)),t):1}function Xt(t,e,n,i){if(50<Nr)throw Nr=0,Lu=null,Error(K(185));ys(t,n,i),(!(ge&2)||t!==ze)&&(t===ze&&(!(ge&2)&&(Ca|=n),je===4&&On(t,Xe)),pt(t,i),n===1&&ge===0&&!(e.mode&1)&&(tr=Re()+500,va&&Xn()))}function pt(t,e){var n=t.callbackNode;n_(t,e);var i=Ao(t,t===ze?Xe:0);if(i===0)n!==null&&uf(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&uf(n),e===1)t.tag===0?tw(td.bind(null,t)):Sg(td.bind(null,t)),Q_(function(){!(ge&6)&&Xn()}),n=null;else{switch(Qp(i)){case 1:n=Cc;break;case 4:n=Gp;break;case 16:n=bo;break;case 536870912:n=Kp;break;default:n=bo}n=Cm(n,pm.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function pm(t,e){if(vo=-1,yo=0,ge&6)throw Error(K(327));var n=t.callbackNode;if(Hi()&&t.callbackNode!==n)return null;var i=Ao(t,t===ze?Xe:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Yo(t,i);else{e=i;var s=ge;ge|=2;var f=mm();(ze!==t||Xe!==e)&&(cn=null,tr=Re()+500,oi(t,e));do try{Sw();break}catch(d){gm(t,d)}while(1);Lc(),$o.current=f,ge=s,Fe!==null?e=0:(ze=null,Xe=0,e=je)}if(e!==0){if(e===2&&(s=au(t),s!==0&&(i=s,e=Mu(t,s))),e===1)throw n=ss,oi(t,0),On(t,i),pt(t,Re()),n;if(e===6)On(t,i);else{if(s=t.current.alternate,!(i&30)&&!ww(s)&&(e=Yo(t,i),e===2&&(f=au(t),f!==0&&(i=f,e=Mu(t,f))),e===1))throw n=ss,oi(t,0),On(t,i),pt(t,Re()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(K(345));case 2:Qn(t,ut,cn);break;case 3:if(On(t,i),(i&130023424)===i&&(e=Kc+500-Re(),10<e)){if(Ao(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){st(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=gu(Qn.bind(null,t,ut,cn),e);break}Qn(t,ut,cn);break;case 4:if(On(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var y=31-Wt(i);f=1<<y,y=e[y],y>s&&(s=y),i&=~f}if(i=s,i=Re()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*_w(i/1960))-i,10<i){t.timeoutHandle=gu(Qn.bind(null,t,ut,cn),i);break}Qn(t,ut,cn);break;case 5:Qn(t,ut,cn);break;default:throw Error(K(329))}}}return pt(t,Re()),t.callbackNode===n?pm.bind(null,t):null}function Mu(t,e){var n=Fr;return t.current.memoizedState.isDehydrated&&(oi(t,e).flags|=256),t=Yo(t,e),t!==2&&(e=ut,ut=n,e!==null&&Fu(e)),t}function Fu(t){ut===null?ut=t:ut.push.apply(ut,t)}function ww(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],f=s.getSnapshot;s=s.value;try{if(!Yt(f(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function On(t,e){for(e&=~Gc,e&=~Ca,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Wt(e),i=1<<n;t[n]=-1,e&=~i}}function td(t){if(ge&6)throw Error(K(327));Hi();var e=Ao(t,0);if(!(e&1))return pt(t,Re()),null;var n=Yo(t,e);if(t.tag!==0&&n===2){var i=au(t);i!==0&&(e=i,n=Mu(t,i))}if(n===1)throw n=ss,oi(t,0),On(t,e),pt(t,Re()),n;if(n===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Qn(t,ut,cn),pt(t,Re()),null}function qc(t,e){var n=ge;ge|=1;try{return t(e)}finally{ge=n,ge===0&&(tr=Re()+500,va&&Xn())}}function pi(t){Pn!==null&&Pn.tag===0&&!(ge&6)&&Hi();var e=ge;ge|=1;var n=Lt.transition,i=_e;try{if(Lt.transition=null,_e=1,t)return t()}finally{_e=i,Lt.transition=n,ge=e,!(ge&6)&&Xn()}}function Qc(){vt=Fi.current,xe(Fi)}function oi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,q_(n)),Fe!==null)for(n=Fe.return;n!==null;){var i=n;switch(Ic(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Lo();break;case 3:Zi(),xe(ft),xe(et),Uc();break;case 5:jc(i);break;case 4:Zi();break;case 13:xe(Oe);break;case 19:xe(Oe);break;case 10:Mc(i.type._context);break;case 22:case 23:Qc()}n=n.return}if(ze=t,Fe=t=Bn(t.current,null),Xe=vt=e,je=0,ss=null,Gc=Ca=di=0,ut=Fr=null,ei!==null){for(e=0;e<ei.length;e++)if(n=ei[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,f=n.pending;if(f!==null){var y=f.next;f.next=s,i.next=y}n.pending=i}ei=null}return t}function gm(t,e){do{var n=Fe;try{if(Lc(),po.current=Ho,Vo){for(var i=be.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Vo=!1}if(fi=0,Ue=Be=be=null,Lr=!1,ns=0,Yc.current=null,n===null||n.return===null){je=1,ss=e,Fe=null;break}e:{var f=t,y=n.return,d=n,r=e;if(e=Xe,d.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){var h=r,p=d,o=p.tag;if(!(p.mode&1)&&(o===0||o===11||o===15)){var l=p.alternate;l?(p.updateQueue=l.updateQueue,p.memoizedState=l.memoizedState,p.lanes=l.lanes):(p.updateQueue=null,p.memoizedState=null)}var a=Vf(y);if(a!==null){a.flags&=-257,Hf(a,y,d,f,e),a.mode&1&&zf(f,h,e),e=a,r=h;var c=e.updateQueue;if(c===null){var g=new Set;g.add(r),e.updateQueue=g}else c.add(r);break e}else{if(!(e&1)){zf(f,h,e),Jc();break e}r=Error(K(426))}}else if(ke&&d.mode&1){var u=Vf(y);if(u!==null){!(u.flags&65536)&&(u.flags|=256),Hf(u,y,d,f,e),Dc(er(r,d));break e}}f=r=er(r,d),je!==4&&(je=2),Fr===null?Fr=[f]:Fr.push(f),f=y;do{switch(f.tag){case 3:f.flags|=65536,e&=-e,f.lanes|=e;var m=Jg(f,r,e);Lf(f,m);break e;case 1:d=r;var v=f.type,_=f.stateNode;if(!(f.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Fn===null||!Fn.has(_)))){f.flags|=65536,e&=-e,f.lanes|=e;var w=Zg(f,d,e);Lf(f,w);break e}}f=f.return}while(f!==null)}ym(n)}catch(C){e=C,Fe===n&&n!==null&&(Fe=n=n.return);continue}break}while(1)}function mm(){var t=$o.current;return $o.current=Ho,t===null?Ho:t}function Jc(){(je===0||je===3||je===2)&&(je=4),ze===null||!(di&268435455)&&!(Ca&268435455)||On(ze,Xe)}function Yo(t,e){var n=ge;ge|=2;var i=mm();(ze!==t||Xe!==e)&&(cn=null,oi(t,e));do try{Cw();break}catch(s){gm(t,s)}while(1);if(Lc(),ge=n,$o.current=i,Fe!==null)throw Error(K(261));return ze=null,Xe=0,je}function Cw(){for(;Fe!==null;)vm(Fe)}function Sw(){for(;Fe!==null&&!Y0();)vm(Fe)}function vm(t){var e=wm(t.alternate,t,vt);t.memoizedProps=t.pendingProps,e===null?ym(t):Fe=e,Yc.current=null}function ym(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=gw(n,e),n!==null){n.flags&=32767,Fe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{je=6,Fe=null;return}}else if(n=pw(n,e,vt),n!==null){Fe=n;return}if(e=e.sibling,e!==null){Fe=e;return}Fe=e=t}while(e!==null);je===0&&(je=5)}function Qn(t,e,n){var i=_e,s=Lt.transition;try{Lt.transition=null,_e=1,Tw(t,e,n,i)}finally{Lt.transition=s,_e=i}return null}function Tw(t,e,n,i){do Hi();while(Pn!==null);if(ge&6)throw Error(K(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var f=n.lanes|n.childLanes;if(i_(t,f),t===ze&&(Fe=ze=null,Xe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Gs||(Gs=!0,Cm(bo,function(){return Hi(),null})),f=(n.flags&15990)!==0,n.subtreeFlags&15990||f){f=Lt.transition,Lt.transition=null;var y=_e;_e=1;var d=ge;ge|=4,Yc.current=null,vw(t,n),fm(n,t),H_(du),Po=!!fu,du=fu=null,t.current=n,yw(n),G0(),ge=d,_e=y,Lt.transition=f}else t.current=n;if(Gs&&(Gs=!1,Pn=t,Xo=s),f=t.pendingLanes,f===0&&(Fn=null),Q0(n.stateNode),pt(t,Re()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(Wo)throw Wo=!1,t=Ru,Ru=null,t;return Xo&1&&t.tag!==0&&Hi(),f=t.pendingLanes,f&1?t===Lu?Nr++:(Nr=0,Lu=t):Nr=0,Xn(),null}function Hi(){if(Pn!==null){var t=Qp(Xo),e=Lt.transition,n=_e;try{if(Lt.transition=null,_e=16>t?16:t,Pn===null)var i=!1;else{if(t=Pn,Pn=null,Xo=0,ge&6)throw Error(K(331));var s=ge;for(ge|=4,re=t.current;re!==null;){var f=re,y=f.child;if(re.flags&16){var d=f.deletions;if(d!==null){for(var r=0;r<d.length;r++){var h=d[r];for(re=h;re!==null;){var p=re;switch(p.tag){case 0:case 11:case 15:Mr(8,p,f)}var o=p.child;if(o!==null)o.return=p,re=o;else for(;re!==null;){p=re;var l=p.sibling,a=p.return;if(um(p),p===h){re=null;break}if(l!==null){l.return=a,re=l;break}re=a}}}var c=f.alternate;if(c!==null){var g=c.child;if(g!==null){c.child=null;do{var u=g.sibling;g.sibling=null,g=u}while(g!==null)}}re=f}}if(f.subtreeFlags&2064&&y!==null)y.return=f,re=y;else e:for(;re!==null;){if(f=re,f.flags&2048)switch(f.tag){case 0:case 11:case 15:Mr(9,f,f.return)}var m=f.sibling;if(m!==null){m.return=f.return,re=m;break e}re=f.return}}var v=t.current;for(re=v;re!==null;){y=re;var _=y.child;if(y.subtreeFlags&2064&&_!==null)_.return=y,re=_;else e:for(y=v;re!==null;){if(d=re,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:wa(9,d)}}catch(C){Pe(d,d.return,C)}if(d===y){re=null;break e}var w=d.sibling;if(w!==null){w.return=d.return,re=w;break e}re=d.return}}if(ge=s,Xn(),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(fa,t)}catch{}i=!0}return i}finally{_e=n,Lt.transition=e}}return!1}function nd(t,e,n){e=er(n,e),e=Jg(t,e,1),t=Mn(t,e,1),e=st(),t!==null&&(ys(t,1,e),pt(t,e))}function Pe(t,e,n){if(t.tag===3)nd(t,t,n);else for(;e!==null;){if(e.tag===3){nd(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Fn===null||!Fn.has(i))){t=er(n,t),t=Zg(e,t,1),e=Mn(e,t,1),t=st(),e!==null&&(ys(e,1,t),pt(e,t));break}}e=e.return}}function xw(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=st(),t.pingedLanes|=t.suspendedLanes&n,ze===t&&(Xe&n)===n&&(je===4||je===3&&(Xe&130023424)===Xe&&500>Re()-Kc?oi(t,0):Gc|=n),pt(t,e)}function _m(t,e){e===0&&(t.mode&1?(e=Bs,Bs<<=1,!(Bs&130023424)&&(Bs=4194304)):e=1);var n=st();t=yn(t,e),t!==null&&(ys(t,e,n),pt(t,n))}function Ew(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),_m(t,n)}function kw(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(K(314))}i!==null&&i.delete(e),_m(t,n)}var wm;wm=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ft.current)ht=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ht=!1,dw(t,e,n);ht=!!(t.flags&131072)}else ht=!1,ke&&e.flags&1048576&&Tg(e,No,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;mo(t,e),t=e.pendingProps;var s=qi(e,et.current);Vi(e,n),s=Vc(null,e,i,t,s,n);var f=Hc();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,dt(i)?(f=!0,Mo(e)):f=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Nc(e),s.updater=ya,e.stateNode=s,s._reactInternals=e,Su(e,i,t,n),e=Eu(null,e,i,!0,f,n)):(e.tag=0,ke&&f&&Pc(e),it(null,e,s,n),e=e.child),e;case 16:i=e.elementType;e:{switch(mo(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=bw(i),t=Ut(i,t),s){case 0:e=xu(null,e,i,t,n);break e;case 1:e=Xf(null,e,i,t,n);break e;case 11:e=$f(null,e,i,t,n);break e;case 14:e=Wf(null,e,i,Ut(i.type,t),n);break e}throw Error(K(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Ut(i,s),xu(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Ut(i,s),Xf(t,e,i,s,n);case 3:e:{if(im(e),t===null)throw Error(K(387));i=e.pendingProps,f=e.memoizedState,s=f.element,Og(t,e),Uo(e,i,null,n);var y=e.memoizedState;if(i=y.element,f.isDehydrated)if(f={element:i,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},e.updateQueue.baseState=f,e.memoizedState=f,e.flags&256){s=er(Error(K(423)),e),e=Yf(t,e,i,n,s);break e}else if(i!==s){s=er(Error(K(424)),e),e=Yf(t,e,i,n,s);break e}else for(wt=Ln(e.stateNode.containerInfo.firstChild),Tt=e,ke=!0,Ht=null,n=Ig(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qi(),i===s){e=_n(t,e,n);break e}it(t,e,i,n)}e=e.child}return e;case 5:return Dg(e),t===null&&_u(e),i=e.type,s=e.pendingProps,f=t!==null?t.memoizedProps:null,y=s.children,pu(i,s)?y=null:f!==null&&pu(i,f)&&(e.flags|=32),nm(t,e),it(t,e,y,n),e.child;case 6:return t===null&&_u(e),null;case 13:return rm(t,e,n);case 4:return Bc(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Ji(e,null,i,n):it(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Ut(i,s),$f(t,e,i,s,n);case 7:return it(t,e,e.pendingProps,n),e.child;case 8:return it(t,e,e.pendingProps.children,n),e.child;case 12:return it(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,f=e.memoizedProps,y=s.value,Ce(Bo,i._currentValue),i._currentValue=y,f!==null)if(Yt(f.value,y)){if(f.children===s.children&&!ft.current){e=_n(t,e,n);break e}}else for(f=e.child,f!==null&&(f.return=e);f!==null;){var d=f.dependencies;if(d!==null){y=f.child;for(var r=d.firstContext;r!==null;){if(r.context===i){if(f.tag===1){r=gn(-1,n&-n),r.tag=2;var h=f.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?r.next=r:(r.next=p.next,p.next=r),h.pending=r}}f.lanes|=n,r=f.alternate,r!==null&&(r.lanes|=n),wu(f.return,n,e),d.lanes|=n;break}r=r.next}}else if(f.tag===10)y=f.type===e.type?null:f.child;else if(f.tag===18){if(y=f.return,y===null)throw Error(K(341));y.lanes|=n,d=y.alternate,d!==null&&(d.lanes|=n),wu(y,n,e),y=f.sibling}else y=f.child;if(y!==null)y.return=f;else for(y=f;y!==null;){if(y===e){y=null;break}if(f=y.sibling,f!==null){f.return=y.return,y=f;break}y=y.return}f=y}it(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,Vi(e,n),s=Mt(s),i=i(s),e.flags|=1,it(t,e,i,n),e.child;case 14:return i=e.type,s=Ut(i,e.pendingProps),s=Ut(i.type,s),Wf(t,e,i,s,n);case 15:return em(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Ut(i,s),mo(t,e),e.tag=1,dt(i)?(t=!0,Mo(e)):t=!1,Vi(e,n),Ag(e,i,s),Su(e,i,s,n),Eu(null,e,i,!0,t,n);case 19:return sm(t,e,n);case 22:return tm(t,e,n)}throw Error(K(156,e.tag))};function Cm(t,e){return Yp(t,e)}function Ow(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rt(t,e,n,i){return new Ow(t,e,n,i)}function Zc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function bw(t){if(typeof t=="function")return Zc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===yc)return 11;if(t===_c)return 14}return 2}function Bn(t,e){var n=t.alternate;return n===null?(n=Rt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function _o(t,e,n,i,s,f){var y=2;if(i=t,typeof t=="function")Zc(t)&&(y=1);else if(typeof t=="string")y=5;else e:switch(t){case ki:return ai(n.children,s,f,e);case vc:y=8,s|=8;break;case Xl:return t=Rt(12,n,e,s|2),t.elementType=Xl,t.lanes=f,t;case Yl:return t=Rt(13,n,e,s),t.elementType=Yl,t.lanes=f,t;case Gl:return t=Rt(19,n,e,s),t.elementType=Gl,t.lanes=f,t;case Pp:return Sa(n,s,f,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bp:y=10;break e;case Ap:y=9;break e;case yc:y=11;break e;case _c:y=14;break e;case xn:y=16,i=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=Rt(y,n,e,s),e.elementType=t,e.type=i,e.lanes=f,e}function ai(t,e,n,i){return t=Rt(7,t,i,e),t.lanes=n,t}function Sa(t,e,n,i){return t=Rt(22,t,i,e),t.elementType=Pp,t.lanes=n,t.stateNode={isHidden:!1},t}function yl(t,e,n){return t=Rt(6,t,null,e),t.lanes=n,t}function _l(t,e,n){return e=Rt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Aw(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Za(0),this.expirationTimes=Za(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Za(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function eh(t,e,n,i,s,f,y,d,r){return t=new Aw(t,e,n,d,r),e===1?(e=1,f===!0&&(e|=8)):e=0,f=Rt(3,null,null,e),t.current=f,f.stateNode=t,f.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nc(f),t}function Pw(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ei,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function Sm(t){if(!t)return Hn;t=t._reactInternals;e:{if(wi(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(dt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var n=t.type;if(dt(n))return Cg(t,n,e)}return e}function Tm(t,e,n,i,s,f,y,d,r){return t=eh(n,i,!0,t,s,f,y,d,r),t.context=Sm(null),n=t.current,i=st(),s=Nn(n),f=gn(i,s),f.callback=e??null,Mn(n,f,s),t.current.lanes=s,ys(t,s,i),pt(t,i),t}function Ta(t,e,n,i){var s=e.current,f=st(),y=Nn(s);return n=Sm(n),e.context===null?e.context=n:e.pendingContext=n,e=gn(f,y),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Mn(s,e,y),t!==null&&(Xt(t,s,y,f),fo(t,s,y)),y}function Go(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function id(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function th(t,e){id(t,e),(t=t.alternate)&&id(t,e)}function Iw(){return null}var xm=typeof reportError=="function"?reportError:function(t){console.error(t)};function nh(t){this._internalRoot=t}xa.prototype.render=nh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));Ta(t,e,null,null)};xa.prototype.unmount=nh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;pi(function(){Ta(null,t,null,null)}),e[vn]=null}};function xa(t){this._internalRoot=t}xa.prototype.unstable_scheduleHydration=function(t){if(t){var e=eg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<kn.length&&e!==0&&e<kn[n].priority;n++);kn.splice(n,0,t),n===0&&ng(t)}};function ih(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ea(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function rd(){}function Dw(t,e,n,i,s){if(s){if(typeof i=="function"){var f=i;i=function(){var h=Go(y);f.call(h)}}var y=Tm(e,i,t,0,null,!1,!1,"",rd);return t._reactRootContainer=y,t[vn]=y.current,Qr(t.nodeType===8?t.parentNode:t),pi(),y}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var d=i;i=function(){var h=Go(r);d.call(h)}}var r=eh(t,0,!1,null,null,!1,!1,"",rd);return t._reactRootContainer=r,t[vn]=r.current,Qr(t.nodeType===8?t.parentNode:t),pi(function(){Ta(e,r,n,i)}),r}function ka(t,e,n,i,s){var f=n._reactRootContainer;if(f){var y=f;if(typeof s=="function"){var d=s;s=function(){var r=Go(y);d.call(r)}}Ta(e,y,t,s)}else y=Dw(n,e,t,s,i);return Go(y)}Jp=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=xr(e.pendingLanes);n!==0&&(Sc(e,n|1),pt(e,Re()),!(ge&6)&&(tr=Re()+500,Xn()))}break;case 13:pi(function(){var i=yn(t,1);if(i!==null){var s=st();Xt(i,t,1,s)}}),th(t,1)}};Tc=function(t){if(t.tag===13){var e=yn(t,134217728);if(e!==null){var n=st();Xt(e,t,134217728,n)}th(t,134217728)}};Zp=function(t){if(t.tag===13){var e=Nn(t),n=yn(t,e);if(n!==null){var i=st();Xt(n,t,e,i)}th(t,e)}};eg=function(){return _e};tg=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}};ru=function(t,e,n){switch(e){case"input":if(Ql(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=ma(i);if(!s)throw Error(K(90));Dp(i),Ql(i,s)}}}break;case"textarea":Lp(t,n);break;case"select":e=n.value,e!=null&&Bi(t,!!n.multiple,e,!1)}};zp=qc;Vp=pi;var Rw={usingClientEntryPoint:!1,Events:[ws,Pi,ma,jp,Up,qc]},vr={findFiberByHostInstance:Zn,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Lw={bundleType:vr.bundleType,version:vr.version,rendererPackageName:vr.rendererPackageName,rendererConfig:vr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Wp(t),t===null?null:t.stateNode},findFiberByHostInstance:vr.findFiberByHostInstance||Iw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ks=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ks.isDisabled&&Ks.supportsFiber)try{fa=Ks.inject(Lw),rn=Ks}catch{}}kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rw;kt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ih(e))throw Error(K(200));return Pw(t,e,null,n)};kt.createRoot=function(t,e){if(!ih(t))throw Error(K(299));var n=!1,i="",s=xm;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=eh(t,1,!1,null,null,n,!1,i,s),t[vn]=e.current,Qr(t.nodeType===8?t.parentNode:t),new nh(e)};kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=Wp(e),t=t===null?null:t.stateNode,t};kt.flushSync=function(t){return pi(t)};kt.hydrate=function(t,e,n){if(!Ea(e))throw Error(K(200));return ka(null,t,e,!0,n)};kt.hydrateRoot=function(t,e,n){if(!ih(t))throw Error(K(405));var i=n!=null&&n.hydratedSources||null,s=!1,f="",y=xm;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(f=n.identifierPrefix),n.onRecoverableError!==void 0&&(y=n.onRecoverableError)),e=Tm(e,null,t,1,n??null,s,!1,f,y),t[vn]=e.current,Qr(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new xa(e)};kt.render=function(t,e,n){if(!Ea(e))throw Error(K(200));return ka(null,t,e,!1,n)};kt.unmountComponentAtNode=function(t){if(!Ea(t))throw Error(K(40));return t._reactRootContainer?(pi(function(){ka(null,null,t,!1,function(){t._reactRootContainer=null,t[vn]=null})}),!0):!1};kt.unstable_batchedUpdates=qc;kt.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Ea(n))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return ka(t,e,n,!1,i)};kt.version="18.2.0-next-9e3b772b8-20220608";function Em(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Em)}catch(t){console.error(t)}}Em(),Tp.exports=kt;var Mw=Tp.exports,sd=Mw;$l.createRoot=sd.createRoot,$l.hydrateRoot=sd.hydrateRoot;const on=Object.create(null);on.open="0";on.close="1";on.ping="2";on.pong="3";on.message="4";on.upgrade="5";on.noop="6";const wo=Object.create(null);Object.keys(on).forEach(t=>{wo[on[t]]=t});const Nu={type:"error",data:"parser error"},km=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Om=typeof ArrayBuffer=="function",bm=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,rh=({type:t,data:e},n,i)=>km&&e instanceof Blob?n?i(e):od(e,i):Om&&(e instanceof ArrayBuffer||bm(e))?n?i(e):od(new Blob([e]),i):i(on[t]+(e||"")),od=(t,e)=>{const n=new FileReader;return n.onload=function(){const i=n.result.split(",")[1];e("b"+(i||""))},n.readAsDataURL(t)};function ad(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let wl;function Fw(t,e){if(km&&t.data instanceof Blob)return t.data.arrayBuffer().then(ad).then(e);if(Om&&(t.data instanceof ArrayBuffer||bm(t.data)))return e(ad(t.data));rh(t,!1,n=>{wl||(wl=new TextEncoder),e(wl.encode(n))})}const ld="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",kr=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<ld.length;t++)kr[ld.charCodeAt(t)]=t;const Nw=t=>{let e=t.length*.75,n=t.length,i,s=0,f,y,d,r;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const h=new ArrayBuffer(e),p=new Uint8Array(h);for(i=0;i<n;i+=4)f=kr[t.charCodeAt(i)],y=kr[t.charCodeAt(i+1)],d=kr[t.charCodeAt(i+2)],r=kr[t.charCodeAt(i+3)],p[s++]=f<<2|y>>4,p[s++]=(y&15)<<4|d>>2,p[s++]=(d&3)<<6|r&63;return h},Bw=typeof ArrayBuffer=="function",sh=(t,e)=>{if(typeof t!="string")return{type:"message",data:Am(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:jw(t.substring(1),e)}:wo[n]?t.length>1?{type:wo[n],data:t.substring(1)}:{type:wo[n]}:Nu},jw=(t,e)=>{if(Bw){const n=Nw(t);return Am(n,e)}else return{base64:!0,data:t}},Am=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},Pm=String.fromCharCode(30),Uw=(t,e)=>{const n=t.length,i=new Array(n);let s=0;t.forEach((f,y)=>{rh(f,!1,d=>{i[y]=d,++s===n&&e(i.join(Pm))})})},zw=(t,e)=>{const n=t.split(Pm),i=[];for(let s=0;s<n.length;s++){const f=sh(n[s],e);if(i.push(f),f.type==="error")break}return i};function Vw(){return new TransformStream({transform(t,e){Fw(t,n=>{const i=n.length;let s;if(i<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,i);else if(i<65536){s=new Uint8Array(3);const f=new DataView(s.buffer);f.setUint8(0,126),f.setUint16(1,i)}else{s=new Uint8Array(9);const f=new DataView(s.buffer);f.setUint8(0,127),f.setBigUint64(1,BigInt(i))}t.data&&typeof t.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(n)})}})}let Cl;function qs(t){return t.reduce((e,n)=>e+n.length,0)}function Qs(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let i=0;for(let s=0;s<e;s++)n[s]=t[0][i++],i===t[0].length&&(t.shift(),i=0);return t.length&&i<t[0].length&&(t[0]=t[0].slice(i)),n}function Hw(t,e){Cl||(Cl=new TextDecoder);const n=[];let i=0,s=-1,f=!1;return new TransformStream({transform(y,d){for(n.push(y);;){if(i===0){if(qs(n)<1)break;const r=Qs(n,1);f=(r[0]&128)===128,s=r[0]&127,s<126?i=3:s===126?i=1:i=2}else if(i===1){if(qs(n)<2)break;const r=Qs(n,2);s=new DataView(r.buffer,r.byteOffset,r.length).getUint16(0),i=3}else if(i===2){if(qs(n)<8)break;const r=Qs(n,8),h=new DataView(r.buffer,r.byteOffset,r.length),p=h.getUint32(0);if(p>Math.pow(2,53-32)-1){d.enqueue(Nu);break}s=p*Math.pow(2,32)+h.getUint32(4),i=3}else{if(qs(n)<s)break;const r=Qs(n,s);d.enqueue(sh(f?r:Cl.decode(r),e)),i=0}if(s===0||s>t){d.enqueue(Nu);break}}}})}const Im=4;function Ne(t){if(t)return $w(t)}function $w(t){for(var e in Ne.prototype)t[e]=Ne.prototype[e];return t}Ne.prototype.on=Ne.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Ne.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Ne.prototype.off=Ne.prototype.removeListener=Ne.prototype.removeAllListeners=Ne.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var i,s=0;s<n.length;s++)if(i=n[s],i===e||i.fn===e){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Ne.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(n){n=n.slice(0);for(var i=0,s=n.length;i<s;++i)n[i].apply(this,e)}return this};Ne.prototype.emitReserved=Ne.prototype.emit;Ne.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Ne.prototype.hasListeners=function(t){return!!this.listeners(t).length};const It=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())();function Dm(t,...e){return e.reduce((n,i)=>(t.hasOwnProperty(i)&&(n[i]=t[i]),n),{})}const Ww=It.setTimeout,Xw=It.clearTimeout;function Oa(t,e){e.useNativeTimers?(t.setTimeoutFn=Ww.bind(It),t.clearTimeoutFn=Xw.bind(It)):(t.setTimeoutFn=It.setTimeout.bind(It),t.clearTimeoutFn=It.clearTimeout.bind(It))}const Yw=1.33;function Gw(t){return typeof t=="string"?Kw(t):Math.ceil((t.byteLength||t.size)*Yw)}function Kw(t){let e=0,n=0;for(let i=0,s=t.length;i<s;i++)e=t.charCodeAt(i),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(i++,n+=4);return n}function qw(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function Qw(t){let e={},n=t.split("&");for(let i=0,s=n.length;i<s;i++){let f=n[i].split("=");e[decodeURIComponent(f[0])]=decodeURIComponent(f[1])}return e}class Jw extends Error{constructor(e,n,i){super(e),this.description=n,this.context=i,this.type="TransportError"}}class oh extends Ne{constructor(e){super(),this.writable=!1,Oa(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,n,i){return super.emitReserved("error",new Jw(e,n,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=sh(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=qw(e);return n.length?"?"+n:""}}const Rm="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Bu=64,Zw={};let ud=0,Js=0,cd;function hd(t){let e="";do e=Rm[t%Bu]+e,t=Math.floor(t/Bu);while(t>0);return e}function Lm(){const t=hd(+new Date);return t!==cd?(ud=0,cd=t):t+"."+hd(ud++)}for(;Js<Bu;Js++)Zw[Rm[Js]]=Js;let Mm=!1;try{Mm=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const e1=Mm;function Fm(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||e1))return new XMLHttpRequest}catch{}if(!e)try{return new It[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function t1(){}const n1=function(){return new Fm({xdomain:!1}).responseType!=null}();class i1 extends oh{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const i=location.protocol==="https:";let s=location.port;s||(s=i?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||s!==e.port}const n=e&&e.forceBase64;this.supportsBinary=n1&&!n,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let i=0;this.polling&&(i++,this.once("pollComplete",function(){--i||n()})),this.writable||(i++,this.once("drain",function(){--i||n()}))}else n()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};zw(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Uw(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Lm()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}request(e={}){return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new $i(this.uri(),e)}doWrite(e,n){const i=this.request({method:"POST",data:e});i.on("success",n),i.on("error",(s,f)=>{this.onError("xhr post error",s,f)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,i)=>{this.onError("xhr poll error",n,i)}),this.pollXhr=e}}let $i=class Co extends Ne{constructor(e,n){super(),Oa(this,n),this.opts=n,this.method=n.method||"GET",this.uri=e,this.data=n.data!==void 0?n.data:null,this.create()}create(){var e;const n=Dm(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this.opts.xd;const i=this.xhr=new Fm(n);try{i.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let s in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(s)&&i.setRequestHeader(s,this.opts.extraHeaders[s])}}catch{}if(this.method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(e=this.opts.cookieJar)===null||e===void 0||e.addCookies(i),"withCredentials"in i&&(i.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(i.timeout=this.opts.requestTimeout),i.onreadystatechange=()=>{var s;i.readyState===3&&((s=this.opts.cookieJar)===null||s===void 0||s.parseCookies(i)),i.readyState===4&&(i.status===200||i.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof i.status=="number"?i.status:0)},0))},i.send(this.data)}catch(s){this.setTimeoutFn(()=>{this.onError(s)},0);return}typeof document<"u"&&(this.index=Co.requestsCount++,Co.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=t1,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete Co.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}};$i.requestsCount=0;$i.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",fd);else if(typeof addEventListener=="function"){const t="onpagehide"in It?"pagehide":"unload";addEventListener(t,fd,!1)}}function fd(){for(let t in $i.requests)$i.requests.hasOwnProperty(t)&&$i.requests[t].abort()}const ah=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0))(),Zs=It.WebSocket||It.MozWebSocket,dd=!0,r1="arraybuffer",pd=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class s1 extends oh{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),n=this.opts.protocols,i=pd?{}:Dm(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=dd&&!pd?n?new Zs(e,n):new Zs(e):new Zs(e,n,i)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const i=e[n],s=n===e.length-1;rh(i,this.supportsBinary,f=>{const y={};try{dd&&this.ws.send(f)}catch{}s&&ah(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Lm()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}check(){return!!Zs}}class o1 extends oh{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(e=>{const n=Hw(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=e.readable.pipeThrough(n).getReader(),s=Vw();s.readable.pipeTo(e.writable),this.writer=s.writable.getWriter();const f=()=>{i.read().then(({done:d,value:r})=>{d||(this.onPacket(r),f())}).catch(d=>{})};f();const y={type:"open"};this.query.sid&&(y.data=`{"sid":"${this.query.sid}"}`),this.writer.write(y).then(()=>this.onOpen())})}))}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const i=e[n],s=n===e.length-1;this.writer.write(i).then(()=>{s&&ah(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this.transport)===null||e===void 0||e.close()}}const a1={websocket:s1,webtransport:o1,polling:i1},l1=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,u1=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function ju(t){if(t.length>2e3)throw"URI too long";const e=t,n=t.indexOf("["),i=t.indexOf("]");n!=-1&&i!=-1&&(t=t.substring(0,n)+t.substring(n,i).replace(/:/g,";")+t.substring(i,t.length));let s=l1.exec(t||""),f={},y=14;for(;y--;)f[u1[y]]=s[y]||"";return n!=-1&&i!=-1&&(f.source=e,f.host=f.host.substring(1,f.host.length-1).replace(/;/g,":"),f.authority=f.authority.replace("[","").replace("]","").replace(/;/g,":"),f.ipv6uri=!0),f.pathNames=c1(f,f.path),f.queryKey=h1(f,f.query),f}function c1(t,e){const n=/\/{2,9}/g,i=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&i.splice(0,1),e.slice(-1)=="/"&&i.splice(i.length-1,1),i}function h1(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,s,f){s&&(n[s]=f)}),n}let Nm=class xi extends Ne{constructor(e,n={}){super(),this.binaryType=r1,this.writeBuffer=[],e&&typeof e=="object"&&(n=e,e=null),e?(e=ju(e),n.hostname=e.host,n.secure=e.protocol==="https"||e.protocol==="wss",n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=ju(n.host).host),Oa(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Qw(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=Im,n.transport=e,this.id&&(n.sid=this.id);const i=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new a1[e](i)}open(){let e;if(this.opts.rememberUpgrade&&xi.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",n=>this.onClose("transport close",n))}probe(e){let n=this.createTransport(e),i=!1;xi.priorWebsocketSuccess=!1;const s=()=>{i||(n.send([{type:"ping",data:"probe"}]),n.once("packet",o=>{if(!i)if(o.type==="pong"&&o.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;xi.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(p(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const l=new Error("probe error");l.transport=n.name,this.emitReserved("upgradeError",l)}}))};function f(){i||(i=!0,p(),n.close(),n=null)}const y=o=>{const l=new Error("probe error: "+o);l.transport=n.name,f(),this.emitReserved("upgradeError",l)};function d(){y("transport closed")}function r(){y("socket closed")}function h(o){n&&o.name!==n.name&&f()}const p=()=>{n.removeListener("open",s),n.removeListener("error",y),n.removeListener("close",d),this.off("close",r),this.off("upgrading",h)};n.once("open",s),n.once("error",y),n.once("close",d),this.once("close",r),this.once("upgrading",h),this.upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{i||n.open()},200):n.open()}onOpen(){if(this.readyState="open",xi.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let e=0;const n=this.upgrades.length;for(;e<n;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),this.resetPingTimeout(),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=e.data,this.onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let i=0;i<this.writeBuffer.length;i++){const s=this.writeBuffer[i].data;if(s&&(n+=Gw(s)),i>0&&n>this.maxPayload)return this.writeBuffer.slice(0,i);n+=2}return this.writeBuffer}write(e,n,i){return this.sendPacket("message",e,n,i),this}send(e,n,i){return this.sendPacket("message",e,n,i),this}sendPacket(e,n,i,s){if(typeof n=="function"&&(s=n,n=void 0),typeof i=="function"&&(s=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const f={type:e,data:n,options:i};this.emitReserved("packetCreate",f),this.writeBuffer.push(f),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},i=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():e()}):this.upgrading?i():e()),this}onError(e){xi.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,n){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const n=[];let i=0;const s=e.length;for(;i<s;i++)~this.transports.indexOf(e[i])&&n.push(e[i]);return n}};Nm.protocol=Im;function f1(t,e="",n){let i=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),i=ju(t)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const f=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+f+":"+i.port+e,i.href=i.protocol+"://"+f+(n&&n.port===i.port?"":":"+i.port),i}const d1=typeof ArrayBuffer=="function",p1=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Bm=Object.prototype.toString,g1=typeof Blob=="function"||typeof Blob<"u"&&Bm.call(Blob)==="[object BlobConstructor]",m1=typeof File=="function"||typeof File<"u"&&Bm.call(File)==="[object FileConstructor]";function lh(t){return d1&&(t instanceof ArrayBuffer||p1(t))||g1&&t instanceof Blob||m1&&t instanceof File}function So(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,i=t.length;n<i;n++)if(So(t[n]))return!0;return!1}if(lh(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return So(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&So(t[n]))return!0;return!1}function v1(t){const e=[],n=t.data,i=t;return i.data=Uu(n,e),i.attachments=e.length,{packet:i,buffers:e}}function Uu(t,e){if(!t)return t;if(lh(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let i=0;i<t.length;i++)n[i]=Uu(t[i],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=Uu(t[i],e));return n}return t}function y1(t,e){return t.data=zu(t.data,e),delete t.attachments,t}function zu(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=zu(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=zu(t[n],e));return t}const _1=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],w1=5;var fe;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(fe||(fe={}));class C1{constructor(e){this.replacer=e}encode(e){return(e.type===fe.EVENT||e.type===fe.ACK)&&So(e)?this.encodeAsBinary({type:e.type===fe.EVENT?fe.BINARY_EVENT:fe.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===fe.BINARY_EVENT||e.type===fe.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=v1(e),i=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(i),s}}function gd(t){return Object.prototype.toString.call(t)==="[object Object]"}class uh extends Ne{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const i=n.type===fe.BINARY_EVENT;i||n.type===fe.BINARY_ACK?(n.type=i?fe.EVENT:fe.ACK,this.reconstructor=new S1(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(lh(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const i={type:Number(e.charAt(0))};if(fe[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===fe.BINARY_EVENT||i.type===fe.BINARY_ACK){const f=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const y=e.substring(f,n);if(y!=Number(y)||e.charAt(n)!=="-")throw new Error("Illegal attachments");i.attachments=Number(y)}if(e.charAt(n+1)==="/"){const f=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););i.nsp=e.substring(f,n)}else i.nsp="/";const s=e.charAt(n+1);if(s!==""&&Number(s)==s){const f=n+1;for(;++n;){const y=e.charAt(n);if(y==null||Number(y)!=y){--n;break}if(n===e.length)break}i.id=Number(e.substring(f,n+1))}if(e.charAt(++n)){const f=this.tryParse(e.substr(n));if(uh.isPayloadValid(i.type,f))i.data=f;else throw new Error("invalid payload")}return i}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case fe.CONNECT:return gd(n);case fe.DISCONNECT:return n===void 0;case fe.CONNECT_ERROR:return typeof n=="string"||gd(n);case fe.EVENT:case fe.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&_1.indexOf(n[0])===-1);case fe.ACK:case fe.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class S1{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=y1(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const T1=Object.freeze(Object.defineProperty({__proto__:null,Decoder:uh,Encoder:C1,get PacketType(){return fe},protocol:w1},Symbol.toStringTag,{value:"Module"}));function Vt(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const x1=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class jm extends Ne{constructor(e,n,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Vt(e,"open",this.onopen.bind(this)),Vt(e,"packet",this.onpacket.bind(this)),Vt(e,"error",this.onerror.bind(this)),Vt(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){if(x1.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const i={type:fe.EVENT,data:n};if(i.options={},i.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const y=this.ids++,d=n.pop();this._registerAckCallback(y,d),i.id=y}const s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!s||!this.connected)||(this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(e,n){var i;const s=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(s===void 0){this.acks[e]=n;return}const f=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let y=0;y<this.sendBuffer.length;y++)this.sendBuffer[y].id===e&&this.sendBuffer.splice(y,1);n.call(this,new Error("operation has timed out"))},s);this.acks[e]=(...y)=>{this.io.clearTimeoutFn(f),n.apply(this,[null,...y])}}emitWithAck(e,...n){const i=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((s,f)=>{n.push((y,d)=>i?y?f(y):s(d):s(y)),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...f)=>i!==this._queue[0]?void 0:(s!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...f)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:fe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case fe.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case fe.EVENT:case fe.BINARY_EVENT:this.onevent(e);break;case fe.ACK:case fe.BINARY_ACK:this.onack(e);break;case fe.DISCONNECT:this.ondisconnect();break;case fe.CONNECT_ERROR:this.destroy();const i=new Error(e.data.message);i.data=e.data.data,this.emitReserved("connect_error",i);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const i of n)i.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let i=!1;return function(...s){i||(i=!0,n.packet({type:fe.ACK,id:e,data:s}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(n.apply(this,e.data),delete this.acks[e.id])}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:fe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let i=0;i<n.length;i++)if(e===n[i])return n.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let i=0;i<n.length;i++)if(e===n[i])return n.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const i of n)i.apply(this,e.data)}}}function sr(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}sr.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};sr.prototype.reset=function(){this.attempts=0};sr.prototype.setMin=function(t){this.ms=t};sr.prototype.setMax=function(t){this.max=t};sr.prototype.setJitter=function(t){this.jitter=t};class Vu extends Ne{constructor(e,n){var i;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Oa(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((i=n.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new sr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const s=n.parser||T1;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Nm(this.uri,this.opts);const n=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const s=Vt(n,"open",function(){i.onopen(),e&&e()}),f=d=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",d),e?e(d):this.maybeReconnectOnOpen()},y=Vt(n,"error",f);if(this._timeout!==!1){const d=this._timeout,r=this.setTimeoutFn(()=>{s(),f(new Error("timeout")),n.close()},d);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}return this.subs.push(s),this.subs.push(y),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Vt(e,"ping",this.onping.bind(this)),Vt(e,"data",this.ondata.bind(this)),Vt(e,"error",this.onerror.bind(this)),Vt(e,"close",this.onclose.bind(this)),Vt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){ah(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let i=this.nsps[e];return i?this._autoConnect&&!i.active&&i.connect():(i=new jm(this,e,n),this.nsps[e]=i),i}_destroy(e){const n=Object.keys(this.nsps);for(const i of n)if(this.nsps[i].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let i=0;i<n.length;i++)this.engine.write(n[i],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,n){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},n);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const yr={};function To(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=f1(t,e.path||"/socket.io"),i=n.source,s=n.id,f=n.path,y=yr[s]&&f in yr[s].nsps,d=e.forceNew||e["force new connection"]||e.multiplex===!1||y;let r;return d?r=new Vu(i,e):(yr[s]||(yr[s]=new Vu(i,e)),r=yr[s]),n.query&&!e.query&&(e.query=n.queryKey),r.socket(n.path,e)}Object.assign(To,{Manager:Vu,Socket:jm,io:To,connect:To});var Um={};const E1={},k1=Object.freeze(Object.defineProperty({__proto__:null,default:E1},Symbol.toStringTag,{value:"Module"})),Sl=c0(k1);(function(t){/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */var e=e||{version:"5.3.0"};if(t.fabric=e,typeof document<"u"&&typeof window<"u")document instanceof(typeof HTMLDocument<"u"?HTMLDocument:Document)?e.document=document:e.document=document.implementation.createHTMLDocument(""),e.window=window;else{var n=Sl,i=new n.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;e.document=i.document,e.jsdomImplForWrapper=Sl.implForWrapper,e.nodeCanvas=Sl.Canvas,e.window=i,DOMParser=e.window.DOMParser}e.isTouchSupported="ontouchstart"in e.window||"ontouchstart"in e.document||e.window&&e.window.navigator&&e.window.navigator.maxTouchPoints>0,e.isLikelyNode=typeof Buffer<"u"&&typeof window>"u",e.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],e.DPI=96,e.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",e.commaWsp="(?:\\s+,?\\s*|,\\s*)",e.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/ig,e.reNonWord=/[ \n\.,;!\?\-]/,e.fontPaths={},e.iMatrix=[1,0,0,1,0,0],e.svgNS="http://www.w3.org/2000/svg",e.perfLimitSizeTotal=2097152,e.maxCacheSideLimit=4096,e.minCacheSideLimit=256,e.charWidthsCache={},e.textureSize=2048,e.disableStyleCopyPaste=!1,e.enableGLFiltering=!0,e.devicePixelRatio=e.window.devicePixelRatio||e.window.webkitDevicePixelRatio||e.window.mozDevicePixelRatio||1,e.browserShadowBlurConstant=1,e.arcToSegmentsCache={},e.boundsOfCurveCache={},e.cachesBoundsOfCurve=!0,e.forceGLPutImageData=!1,e.initFilterBackend=function(){if(e.enableGLFiltering&&e.isWebglSupported&&e.isWebglSupported(e.textureSize))return console.log("max texture size: "+e.maxTextureSize),new e.WebglFilterBackend({tileSize:e.textureSize});if(e.Canvas2dFilterBackend)return new e.Canvas2dFilterBackend},typeof document<"u"&&typeof window<"u"&&(window.fabric=e),function(){function d(a,c){if(this.__eventListeners[a]){var g=this.__eventListeners[a];c?g[g.indexOf(c)]=!1:e.util.array.fill(g,!1)}}function r(a,c){if(this.__eventListeners||(this.__eventListeners={}),arguments.length===1)for(var g in a)this.on(g,a[g]);else this.__eventListeners[a]||(this.__eventListeners[a]=[]),this.__eventListeners[a].push(c);return this}function h(a,c){var g=(function(){c.apply(this,arguments),this.off(a,g)}).bind(this);this.on(a,g)}function p(a,c){if(arguments.length===1)for(var g in a)h.call(this,g,a[g]);else h.call(this,a,c);return this}function o(a,c){if(!this.__eventListeners)return this;if(arguments.length===0)for(a in this.__eventListeners)d.call(this,a);else if(arguments.length===1&&typeof arguments[0]=="object")for(var g in a)d.call(this,g,a[g]);else d.call(this,a,c);return this}function l(a,c){if(!this.__eventListeners)return this;var g=this.__eventListeners[a];if(!g)return this;for(var u=0,m=g.length;u<m;u++)g[u]&&g[u].call(this,c||{});return this.__eventListeners[a]=g.filter(function(v){return v!==!1}),this}e.Observable={fire:l,on:r,once:p,off:o}}(),e.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var d=0,r=arguments.length;d<r;d++)this._onObjectAdded(arguments[d]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(d,r,h){var p=this._objects;return h?p[r]=d:p.splice(r,0,d),this._onObjectAdded&&this._onObjectAdded(d),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var d=this._objects,r,h=!1,p=0,o=arguments.length;p<o;p++)r=d.indexOf(arguments[p]),r!==-1&&(h=!0,d.splice(r,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[p]));return this.renderOnAddRemove&&h&&this.requestRenderAll(),this},forEachObject:function(d,r){for(var h=this.getObjects(),p=0,o=h.length;p<o;p++)d.call(r,h[p],p,h);return this},getObjects:function(d){return typeof d>"u"?this._objects.concat():this._objects.filter(function(r){return r.type===d})},item:function(d){return this._objects[d]},isEmpty:function(){return this._objects.length===0},size:function(){return this._objects.length},contains:function(d,r){return this._objects.indexOf(d)>-1?!0:r?this._objects.some(function(h){return typeof h.contains=="function"&&h.contains(d,!0)}):!1},complexity:function(){return this._objects.reduce(function(d,r){return d+=r.complexity?r.complexity():0,d},0)}},e.CommonMethods={_setOptions:function(d){for(var r in d)this.set(r,d[r])},_initGradient:function(d,r){d&&d.colorStops&&!(d instanceof e.Gradient)&&this.set(r,new e.Gradient(d))},_initPattern:function(d,r,h){d&&d.source&&!(d instanceof e.Pattern)?this.set(r,new e.Pattern(d,h)):h&&h()},_setObject:function(d){for(var r in d)this._set(r,d[r])},set:function(d,r){return typeof d=="object"?this._setObject(d):this._set(d,r),this},_set:function(d,r){this[d]=r},toggle:function(d){var r=this.get(d);return typeof r=="boolean"&&this.set(d,!r),this},get:function(d){return this[d]}},function(d){var r=Math.sqrt,h=Math.atan2,p=Math.pow,o=Math.PI/180,l=Math.PI/2;e.util={cos:function(a){if(a===0)return 1;a<0&&(a=-a);var c=a/l;switch(c){case 1:case 3:return 0;case 2:return-1}return Math.cos(a)},sin:function(a){if(a===0)return 0;var c=a/l,g=1;switch(a<0&&(g=-1),c){case 1:return g;case 2:return 0;case 3:return-g}return Math.sin(a)},removeFromArray:function(a,c){var g=a.indexOf(c);return g!==-1&&a.splice(g,1),a},getRandomInt:function(a,c){return Math.floor(Math.random()*(c-a+1))+a},degreesToRadians:function(a){return a*o},radiansToDegrees:function(a){return a/o},rotatePoint:function(a,c,g){var u=new e.Point(a.x-c.x,a.y-c.y),m=e.util.rotateVector(u,g);return new e.Point(m.x,m.y).addEquals(c)},rotateVector:function(a,c){var g=e.util.sin(c),u=e.util.cos(c),m=a.x*u-a.y*g,v=a.x*g+a.y*u;return{x:m,y:v}},createVector:function(a,c){return new e.Point(c.x-a.x,c.y-a.y)},calcAngleBetweenVectors:function(a,c){return Math.acos((a.x*c.x+a.y*c.y)/(Math.hypot(a.x,a.y)*Math.hypot(c.x,c.y)))},getHatVector:function(a){return new e.Point(a.x,a.y).multiply(1/Math.hypot(a.x,a.y))},getBisector:function(a,c,g){var u=e.util.createVector(a,c),m=e.util.createVector(a,g),v=e.util.calcAngleBetweenVectors(u,m),_=e.util.calcAngleBetweenVectors(e.util.rotateVector(u,v),m),w=v*(_===0?1:-1)/2;return{vector:e.util.getHatVector(e.util.rotateVector(u,w)),angle:v}},projectStrokeOnPoints:function(a,c,g){var u=[],m=c.strokeWidth/2,v=c.strokeUniform?new e.Point(1/c.scaleX,1/c.scaleY):new e.Point(1,1),_=function(w){var C=m/Math.hypot(w.x,w.y);return new e.Point(w.x*C*v.x,w.y*C*v.y)};return a.length<=1||a.forEach(function(w,C){var S=new e.Point(w.x,w.y),x,O;C===0?(O=a[C+1],x=g?_(e.util.createVector(O,S)).addEquals(S):a[a.length-1]):C===a.length-1?(x=a[C-1],O=g?_(e.util.createVector(x,S)).addEquals(S):a[0]):(x=a[C-1],O=a[C+1]);var L=e.util.getBisector(S,x,O),F=L.vector,Y=L.angle,Q,te;if(c.strokeLineJoin==="miter"&&(Q=-m/Math.sin(Y/2),te=new e.Point(F.x*Q*v.x,F.y*Q*v.y),Math.hypot(te.x,te.y)/m<=c.strokeMiterLimit)){u.push(S.add(te)),u.push(S.subtract(te));return}Q=-m*Math.SQRT2,te=new e.Point(F.x*Q*v.x,F.y*Q*v.y),u.push(S.add(te)),u.push(S.subtract(te))}),u},transformPoint:function(a,c,g){return g?new e.Point(c[0]*a.x+c[2]*a.y,c[1]*a.x+c[3]*a.y):new e.Point(c[0]*a.x+c[2]*a.y+c[4],c[1]*a.x+c[3]*a.y+c[5])},makeBoundingBoxFromPoints:function(a,c){if(c)for(var g=0;g<a.length;g++)a[g]=e.util.transformPoint(a[g],c);var u=[a[0].x,a[1].x,a[2].x,a[3].x],m=e.util.array.min(u),v=e.util.array.max(u),_=v-m,w=[a[0].y,a[1].y,a[2].y,a[3].y],C=e.util.array.min(w),S=e.util.array.max(w),x=S-C;return{left:m,top:C,width:_,height:x}},invertTransform:function(a){var c=1/(a[0]*a[3]-a[1]*a[2]),g=[c*a[3],-c*a[1],-c*a[2],c*a[0]],u=e.util.transformPoint({x:a[4],y:a[5]},g,!0);return g[4]=-u.x,g[5]=-u.y,g},toFixed:function(a,c){return parseFloat(Number(a).toFixed(c))},parseUnit:function(a,c){var g=/\D{0,2}$/.exec(a),u=parseFloat(a);switch(c||(c=e.Text.DEFAULT_SVG_FONT_SIZE),g[0]){case"mm":return u*e.DPI/25.4;case"cm":return u*e.DPI/2.54;case"in":return u*e.DPI;case"pt":return u*e.DPI/72;case"pc":return u*e.DPI/72*12;case"em":return u*c;default:return u}},falseFunction:function(){return!1},getKlass:function(a,c){return a=e.util.string.camelize(a.charAt(0).toUpperCase()+a.slice(1)),e.util.resolveNamespace(c)[a]},getSvgAttributes:function(a){var c=["instantiated_by_use","style","id","class"];switch(a){case"linearGradient":c=c.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":c=c.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":c=c.concat(["offset","stop-color","stop-opacity"]);break}return c},resolveNamespace:function(a){if(!a)return e;var c=a.split("."),g=c.length,u,m=d||e.window;for(u=0;u<g;++u)m=m[c[u]];return m},loadImage:function(a,c,g,u){if(!a){c&&c.call(g,a);return}var m=e.util.createImage(),v=function(){c&&c.call(g,m,!1),m=m.onload=m.onerror=null};m.onload=v,m.onerror=function(){e.log("Error loading "+m.src),c&&c.call(g,null,!0),m=m.onload=m.onerror=null},a.indexOf("data")!==0&&u!==void 0&&u!==null&&(m.crossOrigin=u),a.substring(0,14)==="data:image/svg"&&(m.onload=null,e.util.loadImageInDom(m,v)),m.src=a},loadImageInDom:function(a,c){var g=e.document.createElement("div");g.style.width=g.style.height="1px",g.style.left=g.style.top="-100%",g.style.position="absolute",g.appendChild(a),e.document.querySelector("body").appendChild(g),a.onload=function(){c(),g.parentNode.removeChild(g),g=null}},enlivenObjects:function(a,c,g,u){a=a||[];var m=[],v=0,_=a.length;function w(){++v===_&&c&&c(m.filter(function(C){return C}))}if(!_){c&&c(m);return}a.forEach(function(C,S){if(!C||!C.type){w();return}var x=e.util.getKlass(C.type,g);x.fromObject(C,function(O,L){L||(m[S]=O),u&&u(C,O,L),w()})})},enlivenObjectEnlivables:function(a,c,g){var u=e.Object.ENLIVEN_PROPS.filter(function(m){return!!a[m]});e.util.enlivenObjects(u.map(function(m){return a[m]}),function(m){var v={};u.forEach(function(_,w){v[_]=m[w],c&&(c[_]=m[w])}),g&&g(v)})},enlivenPatterns:function(a,c){a=a||[];function g(){++m===v&&c&&c(u)}var u=[],m=0,v=a.length;if(!v){c&&c(u);return}a.forEach(function(_,w){_&&_.source?new e.Pattern(_,function(C){u[w]=C,g()}):(u[w]=_,g())})},groupSVGElements:function(a,c,g){var u;return a&&a.length===1?(typeof g<"u"&&(a[0].sourcePath=g),a[0]):(c&&(c.width&&c.height?c.centerPoint={x:c.width/2,y:c.height/2}:(delete c.width,delete c.height)),u=new e.Group(a,c),typeof g<"u"&&(u.sourcePath=g),u)},populateWithProperties:function(a,c,g){if(g&&Array.isArray(g))for(var u=0,m=g.length;u<m;u++)g[u]in a&&(c[g[u]]=a[g[u]])},createCanvasElement:function(){return e.document.createElement("canvas")},copyCanvasElement:function(a){var c=e.util.createCanvasElement();return c.width=a.width,c.height=a.height,c.getContext("2d").drawImage(a,0,0),c},toDataURL:function(a,c,g){return a.toDataURL("image/"+c,g)},createImage:function(){return e.document.createElement("img")},multiplyTransformMatrices:function(a,c,g){return[a[0]*c[0]+a[2]*c[1],a[1]*c[0]+a[3]*c[1],a[0]*c[2]+a[2]*c[3],a[1]*c[2]+a[3]*c[3],g?0:a[0]*c[4]+a[2]*c[5]+a[4],g?0:a[1]*c[4]+a[3]*c[5]+a[5]]},qrDecompose:function(a){var c=h(a[1],a[0]),g=p(a[0],2)+p(a[1],2),u=r(g),m=(a[0]*a[3]-a[2]*a[1])/u,v=h(a[0]*a[2]+a[1]*a[3],g);return{angle:c/o,scaleX:u,scaleY:m,skewX:v/o,skewY:0,translateX:a[4],translateY:a[5]}},calcRotateMatrix:function(a){if(!a.angle)return e.iMatrix.concat();var c=e.util.degreesToRadians(a.angle),g=e.util.cos(c),u=e.util.sin(c);return[g,u,-u,g,0,0]},calcDimensionsMatrix:function(a){var c=typeof a.scaleX>"u"?1:a.scaleX,g=typeof a.scaleY>"u"?1:a.scaleY,u=[a.flipX?-c:c,0,0,a.flipY?-g:g,0,0],m=e.util.multiplyTransformMatrices,v=e.util.degreesToRadians;return a.skewX&&(u=m(u,[1,0,Math.tan(v(a.skewX)),1],!0)),a.skewY&&(u=m(u,[1,Math.tan(v(a.skewY)),0,1],!0)),u},composeMatrix:function(a){var c=[1,0,0,1,a.translateX||0,a.translateY||0],g=e.util.multiplyTransformMatrices;return a.angle&&(c=g(c,e.util.calcRotateMatrix(a))),(a.scaleX!==1||a.scaleY!==1||a.skewX||a.skewY||a.flipX||a.flipY)&&(c=g(c,e.util.calcDimensionsMatrix(a))),c},resetObjectTransform:function(a){a.scaleX=1,a.scaleY=1,a.skewX=0,a.skewY=0,a.flipX=!1,a.flipY=!1,a.rotate(0)},saveObjectTransform:function(a){return{scaleX:a.scaleX,scaleY:a.scaleY,skewX:a.skewX,skewY:a.skewY,angle:a.angle,left:a.left,flipX:a.flipX,flipY:a.flipY,top:a.top}},isTransparent:function(a,c,g,u){u>0&&(c>u?c-=u:c=0,g>u?g-=u:g=0);var m=!0,v,_,w=a.getImageData(c,g,u*2||1,u*2||1),C=w.data.length;for(v=3;v<C&&(_=w.data[v],m=_<=0,m!==!1);v+=4);return w=null,m},parsePreserveAspectRatioAttribute:function(a){var c="meet",g="Mid",u="Mid",m=a.split(" "),v;return m&&m.length&&(c=m.pop(),c!=="meet"&&c!=="slice"?(v=c,c="meet"):m.length&&(v=m.pop())),g=v!=="none"?v.slice(1,4):"none",u=v!=="none"?v.slice(5,8):"none",{meetOrSlice:c,alignX:g,alignY:u}},clearFabricFontCache:function(a){a=(a||"").toLowerCase(),a?e.charWidthsCache[a]&&delete e.charWidthsCache[a]:e.charWidthsCache={}},limitDimsByArea:function(a,c){var g=Math.sqrt(c*a),u=Math.floor(c/g);return{x:Math.floor(g),y:u}},capValue:function(a,c,g){return Math.max(a,Math.min(c,g))},findScaleToFit:function(a,c){return Math.min(c.width/a.width,c.height/a.height)},findScaleToCover:function(a,c){return Math.max(c.width/a.width,c.height/a.height)},matrixToSVG:function(a){return"matrix("+a.map(function(c){return e.util.toFixed(c,e.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(a,c){var g=e.util.invertTransform(c),u=e.util.multiplyTransformMatrices(g,a.calcOwnMatrix());e.util.applyTransformToObject(a,u)},addTransformToObject:function(a,c){e.util.applyTransformToObject(a,e.util.multiplyTransformMatrices(c,a.calcOwnMatrix()))},applyTransformToObject:function(a,c){var g=e.util.qrDecompose(c),u=new e.Point(g.translateX,g.translateY);a.flipX=!1,a.flipY=!1,a.set("scaleX",g.scaleX),a.set("scaleY",g.scaleY),a.skewX=g.skewX,a.skewY=g.skewY,a.angle=g.angle,a.setPositionByOrigin(u,"center","center")},sizeAfterTransform:function(a,c,g){var u=a/2,m=c/2,v=[{x:-u,y:-m},{x:u,y:-m},{x:-u,y:m},{x:u,y:m}],_=e.util.calcDimensionsMatrix(g),w=e.util.makeBoundingBoxFromPoints(v,_);return{x:w.width,y:w.height}},mergeClipPaths:function(a,c){var g=a,u=c;g.inverted&&!u.inverted&&(g=c,u=a),e.util.applyTransformToObject(u,e.util.multiplyTransformMatrices(e.util.invertTransform(g.calcTransformMatrix()),u.calcTransformMatrix()));var m=g.inverted&&u.inverted;return m&&(g.inverted=u.inverted=!1),new e.Group([g],{clipPath:u,inverted:m})},hasStyleChanged:function(a,c,g){return g=g||!1,a.fill!==c.fill||a.stroke!==c.stroke||a.strokeWidth!==c.strokeWidth||a.fontSize!==c.fontSize||a.fontFamily!==c.fontFamily||a.fontWeight!==c.fontWeight||a.fontStyle!==c.fontStyle||a.textBackgroundColor!==c.textBackgroundColor||a.deltaY!==c.deltaY||g&&(a.overline!==c.overline||a.underline!==c.underline||a.linethrough!==c.linethrough)},stylesToArray:function(g,c){for(var g=e.util.object.clone(g,!0),u=c.split(`
`),m=-1,v={},_=[],w=0;w<u.length;w++){if(!g[w]){m+=u[w].length;continue}for(var C=0;C<u[w].length;C++){m++;var S=g[w][C];if(S&&Object.keys(S).length>0){var x=e.util.hasStyleChanged(v,S,!0);x?_.push({start:m,end:m+1,style:S}):_[_.length-1].end++}v=S||{}}}return _},stylesFromArray:function(a,c){if(!Array.isArray(a))return a;for(var g=c.split(`
`),u=-1,m=0,v={},_=0;_<g.length;_++)for(var w=0;w<g[_].length;w++)u++,a[m]&&a[m].start<=u&&u<a[m].end&&(v[_]=v[_]||{},v[_][w]=Object.assign({},a[m].style),u===a[m].end-1&&m++);return v}}}(t),function(){var d=Array.prototype.join,r={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},h={m:"l",M:"L"};function p(T,k,A,P,M,b,E,I,D,z,N){var W=e.util.cos(T),G=e.util.sin(T),Z=e.util.cos(k),B=e.util.sin(k),R=A*M*Z-P*b*B+E,H=P*M*Z+A*b*B+I,$=z+D*(-A*M*G-P*b*W),j=N+D*(-P*M*G+A*b*W),X=R+D*(A*M*B+P*b*Z),ee=H+D*(P*M*B-A*b*Z);return["C",$,j,X,ee,R,H]}function o(T,k,A,P,M,b,E){var I=Math.PI,D=E*I/180,z=e.util.sin(D),N=e.util.cos(D),W=0,G=0;A=Math.abs(A),P=Math.abs(P);var Z=-N*T*.5-z*k*.5,B=-N*k*.5+z*T*.5,R=A*A,H=P*P,$=B*B,j=Z*Z,X=R*H-R*$-H*j,ee=0;if(X<0){var ue=Math.sqrt(1-X/(R*H));A*=ue,P*=ue}else ee=(M===b?-1:1)*Math.sqrt(X/(R*$+H*j));var oe=ee*A*B/P,V=-ee*P*Z/A,ae=N*oe-z*V+T*.5,ce=z*oe+N*V+k*.5,de=l(1,0,(Z-oe)/A,(B-V)/P),Ee=l((Z-oe)/A,(B-V)/P,(-Z-oe)/A,(-B-V)/P);b===0&&Ee>0?Ee-=2*I:b===1&&Ee<0&&(Ee+=2*I);for(var me=Math.ceil(Math.abs(Ee/I*2)),tt=[],Me=Ee/me,Kn=8/3*Math.sin(Me/4)*Math.sin(Me/4)/Math.sin(Me/2),ur=de+Me,qt=0;qt<me;qt++)tt[qt]=p(de,ur,N,z,A,P,ae,ce,Kn,W,G),W=tt[qt][5],G=tt[qt][6],de=ur,ur+=Me;return tt}function l(T,k,A,P){var M=Math.atan2(k,T),b=Math.atan2(P,A);return b>=M?b-M:2*Math.PI-(M-b)}function a(T,k,A,P,M,b,E,I){var D;if(e.cachesBoundsOfCurve&&(D=d.call(arguments),e.boundsOfCurveCache[D]))return e.boundsOfCurveCache[D];var z=Math.sqrt,N=Math.min,W=Math.max,G=Math.abs,Z=[],B=[[],[]],R,H,$,j,X,ee,ue,oe;H=6*T-12*A+6*M,R=-3*T+9*A-9*M+3*E,$=3*A-3*T;for(var V=0;V<2;++V){if(V>0&&(H=6*k-12*P+6*b,R=-3*k+9*P-9*b+3*I,$=3*P-3*k),G(R)<1e-12){if(G(H)<1e-12)continue;j=-$/H,0<j&&j<1&&Z.push(j);continue}ue=H*H-4*$*R,!(ue<0)&&(oe=z(ue),X=(-H+oe)/(2*R),0<X&&X<1&&Z.push(X),ee=(-H-oe)/(2*R),0<ee&&ee<1&&Z.push(ee))}for(var ae,ce,de=Z.length,Ee=de,me;de--;)j=Z[de],me=1-j,ae=me*me*me*T+3*me*me*j*A+3*me*j*j*M+j*j*j*E,B[0][de]=ae,ce=me*me*me*k+3*me*me*j*P+3*me*j*j*b+j*j*j*I,B[1][de]=ce;B[0][Ee]=T,B[1][Ee]=k,B[0][Ee+1]=E,B[1][Ee+1]=I;var tt=[{x:N.apply(null,B[0]),y:N.apply(null,B[1])},{x:W.apply(null,B[0]),y:W.apply(null,B[1])}];return e.cachesBoundsOfCurve&&(e.boundsOfCurveCache[D]=tt),tt}function c(T,k,A){for(var P=A[1],M=A[2],b=A[3],E=A[4],I=A[5],D=A[6],z=A[7],N=o(D-T,z-k,P,M,E,I,b),W=0,G=N.length;W<G;W++)N[W][1]+=T,N[W][2]+=k,N[W][3]+=T,N[W][4]+=k,N[W][5]+=T,N[W][6]+=k;return N}function g(T){var k=0,A=0,P=T.length,M=0,b=0,E,I,D,z=[],N,W,G;for(I=0;I<P;++I){switch(D=!1,E=T[I].slice(0),E[0]){case"l":E[0]="L",E[1]+=k,E[2]+=A;case"L":k=E[1],A=E[2];break;case"h":E[1]+=k;case"H":E[0]="L",E[2]=A,k=E[1];break;case"v":E[1]+=A;case"V":E[0]="L",A=E[1],E[1]=k,E[2]=A;break;case"m":E[0]="M",E[1]+=k,E[2]+=A;case"M":k=E[1],A=E[2],M=E[1],b=E[2];break;case"c":E[0]="C",E[1]+=k,E[2]+=A,E[3]+=k,E[4]+=A,E[5]+=k,E[6]+=A;case"C":W=E[3],G=E[4],k=E[5],A=E[6];break;case"s":E[0]="S",E[1]+=k,E[2]+=A,E[3]+=k,E[4]+=A;case"S":N==="C"?(W=2*k-W,G=2*A-G):(W=k,G=A),k=E[3],A=E[4],E[0]="C",E[5]=E[3],E[6]=E[4],E[3]=E[1],E[4]=E[2],E[1]=W,E[2]=G,W=E[3],G=E[4];break;case"q":E[0]="Q",E[1]+=k,E[2]+=A,E[3]+=k,E[4]+=A;case"Q":W=E[1],G=E[2],k=E[3],A=E[4];break;case"t":E[0]="T",E[1]+=k,E[2]+=A;case"T":N==="Q"?(W=2*k-W,G=2*A-G):(W=k,G=A),E[0]="Q",k=E[1],A=E[2],E[1]=W,E[2]=G,E[3]=k,E[4]=A;break;case"a":E[0]="A",E[6]+=k,E[7]+=A;case"A":D=!0,z=z.concat(c(k,A,E)),k=E[6],A=E[7];break;case"z":case"Z":k=M,A=b;break}D||z.push(E),N=E[0]}return z}function u(T,k,A,P){return Math.sqrt((A-T)*(A-T)+(P-k)*(P-k))}function m(T){return T*T*T}function v(T){return 3*T*T*(1-T)}function _(T){return 3*T*(1-T)*(1-T)}function w(T){return(1-T)*(1-T)*(1-T)}function C(T,k,A,P,M,b,E,I){return function(D){var z=m(D),N=v(D),W=_(D),G=w(D);return{x:E*z+M*N+A*W+T*G,y:I*z+b*N+P*W+k*G}}}function S(T,k,A,P,M,b,E,I){return function(D){var z=1-D,N=3*z*z*(A-T)+6*z*D*(M-A)+3*D*D*(E-M),W=3*z*z*(P-k)+6*z*D*(b-P)+3*D*D*(I-b);return Math.atan2(W,N)}}function x(T){return T*T}function O(T){return 2*T*(1-T)}function L(T){return(1-T)*(1-T)}function F(T,k,A,P,M,b){return function(E){var I=x(E),D=O(E),z=L(E);return{x:M*I+A*D+T*z,y:b*I+P*D+k*z}}}function Y(T,k,A,P,M,b){return function(E){var I=1-E,D=2*I*(A-T)+2*E*(M-A),z=2*I*(P-k)+2*E*(b-P);return Math.atan2(z,D)}}function Q(T,k,A){var P={x:k,y:A},M,b=0,E;for(E=1;E<=100;E+=1)M=T(E/100),b+=u(P.x,P.y,M.x,M.y),P=M;return b}function te(T,k){for(var A=0,P=0,M=T.iterator,b={x:T.x,y:T.y},E,I,D=.01,z=T.angleFinder,N;P<k&&D>1e-4;)E=M(A),N=A,I=u(b.x,b.y,E.x,E.y),I+P>k?(A-=D,D/=2):(b=E,A+=D,P+=I);return E.angle=z(N),E}function q(T){for(var k=0,A=T.length,P,M=0,b=0,E=0,I=0,D=[],z,N,W,G=0;G<A;G++){switch(P=T[G],N={x:M,y:b,command:P[0]},P[0]){case"M":N.length=0,E=M=P[1],I=b=P[2];break;case"L":N.length=u(M,b,P[1],P[2]),M=P[1],b=P[2];break;case"C":z=C(M,b,P[1],P[2],P[3],P[4],P[5],P[6]),W=S(M,b,P[1],P[2],P[3],P[4],P[5],P[6]),N.iterator=z,N.angleFinder=W,N.length=Q(z,M,b),M=P[5],b=P[6];break;case"Q":z=F(M,b,P[1],P[2],P[3],P[4]),W=Y(M,b,P[1],P[2],P[3],P[4]),N.iterator=z,N.angleFinder=W,N.length=Q(z,M,b),M=P[3],b=P[4];break;case"Z":case"z":N.destX=E,N.destY=I,N.length=u(M,b,E,I),M=E,b=I;break}k+=N.length,D.push(N)}return D.push({length:k,x:M,y:b}),D}function J(T,k,A){A||(A=q(T));for(var P=0;k-A[P].length>0&&P<A.length-2;)k-=A[P].length,P++;var M=A[P],b=k/M.length,E=M.command,I=T[P],D;switch(E){case"M":return{x:M.x,y:M.y,angle:0};case"Z":case"z":return D=new e.Point(M.x,M.y).lerp(new e.Point(M.destX,M.destY),b),D.angle=Math.atan2(M.destY-M.y,M.destX-M.x),D;case"L":return D=new e.Point(M.x,M.y).lerp(new e.Point(I[1],I[2]),b),D.angle=Math.atan2(I[2]-M.y,I[1]-M.x),D;case"C":return te(M,k);case"Q":return te(M,k)}}function ie(T){var k=[],A=[],P,M,b=e.rePathCommand,E="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",I="("+E+")"+e.commaWsp,D="([01])"+e.commaWsp+"?",z=I+"?"+I+"?"+I+D+D+I+"?("+E+")",N=new RegExp(z,"g"),W,G,Z;if(!T||!T.match)return k;Z=T.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var B=0,R,H=Z.length;B<H;B++){P=Z[B],G=P.slice(1).trim(),A.length=0;var $=P.charAt(0);if(R=[$],$.toLowerCase()==="a")for(var j;j=N.exec(G);)for(var X=1;X<j.length;X++)A.push(j[X]);else for(;W=b.exec(G);)A.push(W[0]);for(var X=0,ee=A.length;X<ee;X++)M=parseFloat(A[X]),isNaN(M)||R.push(M);var ue=r[$.toLowerCase()],oe=h[$]||$;if(R.length-1>ue)for(var V=1,ae=R.length;V<ae;V+=ue)k.push([$].concat(R.slice(V,V+ue))),$=oe;else k.push(R)}return k}function se(T,k){var A=[],P,M=new e.Point(T[0].x,T[0].y),b=new e.Point(T[1].x,T[1].y),E=T.length,I=1,D=0,z=E>2;for(k=k||0,z&&(I=T[2].x<b.x?-1:T[2].x===b.x?0:1,D=T[2].y<b.y?-1:T[2].y===b.y?0:1),A.push(["M",M.x-I*k,M.y-D*k]),P=1;P<E;P++){if(!M.eq(b)){var N=M.midPointFrom(b);A.push(["Q",M.x,M.y,N.x,N.y])}M=T[P],P+1<T.length&&(b=T[P+1])}return z&&(I=M.x>T[P-2].x?1:M.x===T[P-2].x?0:-1,D=M.y>T[P-2].y?1:M.y===T[P-2].y?0:-1),A.push(["L",M.x+I*k,M.y+D*k]),A}function U(T,k,A){return A&&(k=e.util.multiplyTransformMatrices(k,[1,0,0,1,-A.x,-A.y])),T.map(function(P){for(var M=P.slice(0),b={},E=1;E<P.length-1;E+=2)b.x=P[E],b.y=P[E+1],b=e.util.transformPoint(b,k),M[E]=b.x,M[E+1]=b.y;return M})}e.util.joinPath=function(T){return T.map(function(k){return k.join(" ")}).join(" ")},e.util.parsePath=ie,e.util.makePathSimpler=g,e.util.getSmoothPathFromPoints=se,e.util.getPathSegmentsInfo=q,e.util.getBoundsOfCurve=a,e.util.getPointOnPath=J,e.util.transformPath=U}(),function(){var d=Array.prototype.slice;function r(a,c){for(var g=d.call(arguments,2),u=[],m=0,v=a.length;m<v;m++)u[m]=g.length?a[m][c].apply(a[m],g):a[m][c].call(a[m]);return u}function h(a,c){return l(a,c,function(g,u){return g>=u})}function p(a,c){return l(a,c,function(g,u){return g<u})}function o(a,c){for(var g=a.length;g--;)a[g]=c;return a}function l(a,c,g){if(!(!a||a.length===0)){var u=a.length-1,m=c?a[u][c]:a[u];if(c)for(;u--;)g(a[u][c],m)&&(m=a[u][c]);else for(;u--;)g(a[u],m)&&(m=a[u]);return m}}e.util.array={fill:o,invoke:r,min:p,max:h}}(),function(){function d(h,p,o){if(o)if(!e.isLikelyNode&&p instanceof Element)h=p;else if(p instanceof Array){h=[];for(var l=0,a=p.length;l<a;l++)h[l]=d({},p[l],o)}else if(p&&typeof p=="object")for(var c in p)c==="canvas"||c==="group"?h[c]=null:p.hasOwnProperty(c)&&(h[c]=d({},p[c],o));else h=p;else for(var c in p)h[c]=p[c];return h}function r(h,p){return d({},h,p)}e.util.object={extend:d,clone:r},e.util.object.extend(e.util,e.Observable)}(),function(){function d(l){return l.replace(/-+(.)?/g,function(a,c){return c?c.toUpperCase():""})}function r(l,a){return l.charAt(0).toUpperCase()+(a?l.slice(1):l.slice(1).toLowerCase())}function h(l){return l.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function p(l){var a=0,c,g=[];for(a=0,c;a<l.length;a++)(c=o(l,a))!==!1&&g.push(c);return g}function o(l,a){var c=l.charCodeAt(a);if(isNaN(c))return"";if(c<55296||c>57343)return l.charAt(a);if(55296<=c&&c<=56319){if(l.length<=a+1)throw"High surrogate without following low surrogate";var g=l.charCodeAt(a+1);if(56320>g||g>57343)throw"High surrogate without following low surrogate";return l.charAt(a)+l.charAt(a+1)}if(a===0)throw"Low surrogate without preceding high surrogate";var u=l.charCodeAt(a-1);if(55296>u||u>56319)throw"Low surrogate without preceding high surrogate";return!1}e.util.string={camelize:d,capitalize:r,escapeXml:h,graphemeSplit:p}}(),function(){var d=Array.prototype.slice,r=function(){},h=function(){for(var c in{toString:1})if(c==="toString")return!1;return!0}(),p=function(c,g,u){for(var m in g)m in c.prototype&&typeof c.prototype[m]=="function"&&(g[m]+"").indexOf("callSuper")>-1?c.prototype[m]=function(v){return function(){var _=this.constructor.superclass;this.constructor.superclass=u;var w=g[v].apply(this,arguments);if(this.constructor.superclass=_,v!=="initialize")return w}}(m):c.prototype[m]=g[m],h&&(g.toString!==Object.prototype.toString&&(c.prototype.toString=g.toString),g.valueOf!==Object.prototype.valueOf&&(c.prototype.valueOf=g.valueOf))};function o(){}function l(c){for(var g=null,u=this;u.constructor.superclass;){var m=u.constructor.superclass.prototype[c];if(u[c]!==m){g=m;break}u=u.constructor.superclass.prototype}return g?arguments.length>1?g.apply(this,d.call(arguments,1)):g.call(this):console.log("tried to callSuper "+c+", method not found in prototype chain",this)}function a(){var c=null,g=d.call(arguments,0);typeof g[0]=="function"&&(c=g.shift());function u(){this.initialize.apply(this,arguments)}u.superclass=c,u.subclasses=[],c&&(o.prototype=c.prototype,u.prototype=new o,c.subclasses.push(u));for(var m=0,v=g.length;m<v;m++)p(u,g[m],c);return u.prototype.initialize||(u.prototype.initialize=r),u.prototype.constructor=u,u.prototype.callSuper=l,u}e.util.createClass=a}(),function(){var d=!!e.document.createElement("div").attachEvent,r=["touchstart","touchmove","touchend"];e.util.addListener=function(p,o,l,a){p&&p.addEventListener(o,l,d?!1:a)},e.util.removeListener=function(p,o,l,a){p&&p.removeEventListener(o,l,d?!1:a)};function h(p){var o=p.changedTouches;return o&&o[0]?o[0]:p}e.util.getPointer=function(p){var o=p.target,l=e.util.getScrollLeftTop(o),a=h(p);return{x:a.clientX+l.left,y:a.clientY+l.top}},e.util.isTouchEvent=function(p){return r.indexOf(p.type)>-1||p.pointerType==="touch"}}(),function(){function d(a,c){var g=a.style;if(!g)return a;if(typeof c=="string")return a.style.cssText+=";"+c,c.indexOf("opacity")>-1?l(a,c.match(/opacity:\s*(\d?\.?\d*)/)[1]):a;for(var u in c)if(u==="opacity")l(a,c[u]);else{var m=u==="float"||u==="cssFloat"?typeof g.styleFloat>"u"?"cssFloat":"styleFloat":u;g.setProperty(m,c[u])}return a}var r=e.document.createElement("div"),h=typeof r.style.opacity=="string",p=typeof r.style.filter=="string",o=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,l=function(a){return a};h?l=function(a,c){return a.style.opacity=c,a}:p&&(l=function(a,c){var g=a.style;return a.currentStyle&&!a.currentStyle.hasLayout&&(g.zoom=1),o.test(g.filter)?(c=c>=.9999?"":"alpha(opacity="+c*100+")",g.filter=g.filter.replace(o,c)):g.filter+=" alpha(opacity="+c*100+")",a}),e.util.setStyle=d}(),function(){var d=Array.prototype.slice;function r(w){return typeof w=="string"?e.document.getElementById(w):w}var h,p=function(w){return d.call(w,0)};try{h=p(e.document.childNodes)instanceof Array}catch{}h||(p=function(w){for(var C=new Array(w.length),S=w.length;S--;)C[S]=w[S];return C});function o(w,C){var S=e.document.createElement(w);for(var x in C)x==="class"?S.className=C[x]:x==="for"?S.htmlFor=C[x]:S.setAttribute(x,C[x]);return S}function l(w,C){w&&(" "+w.className+" ").indexOf(" "+C+" ")===-1&&(w.className+=(w.className?" ":"")+C)}function a(w,C,S){return typeof C=="string"&&(C=o(C,S)),w.parentNode&&w.parentNode.replaceChild(C,w),C.appendChild(w),C}function c(w){for(var C=0,S=0,x=e.document.documentElement,O=e.document.body||{scrollLeft:0,scrollTop:0};w&&(w.parentNode||w.host)&&(w=w.parentNode||w.host,w===e.document?(C=O.scrollLeft||x.scrollLeft||0,S=O.scrollTop||x.scrollTop||0):(C+=w.scrollLeft||0,S+=w.scrollTop||0),!(w.nodeType===1&&w.style.position==="fixed")););return{left:C,top:S}}function g(w){var C,S=w&&w.ownerDocument,x={left:0,top:0},O={left:0,top:0},L,F={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!S)return O;for(var Y in F)O[F[Y]]+=parseInt(u(w,Y),10)||0;return C=S.documentElement,typeof w.getBoundingClientRect<"u"&&(x=w.getBoundingClientRect()),L=c(w),{left:x.left+L.left-(C.clientLeft||0)+O.left,top:x.top+L.top-(C.clientTop||0)+O.top}}var u;e.document.defaultView&&e.document.defaultView.getComputedStyle?u=function(w,C){var S=e.document.defaultView.getComputedStyle(w,null);return S?S[C]:void 0}:u=function(w,C){var S=w.style[C];return!S&&w.currentStyle&&(S=w.currentStyle[C]),S},function(){var w=e.document.documentElement.style,C="userSelect"in w?"userSelect":"MozUserSelect"in w?"MozUserSelect":"WebkitUserSelect"in w?"WebkitUserSelect":"KhtmlUserSelect"in w?"KhtmlUserSelect":"";function S(O){return typeof O.onselectstart<"u"&&(O.onselectstart=e.util.falseFunction),C?O.style[C]="none":typeof O.unselectable=="string"&&(O.unselectable="on"),O}function x(O){return typeof O.onselectstart<"u"&&(O.onselectstart=null),C?O.style[C]="":typeof O.unselectable=="string"&&(O.unselectable=""),O}e.util.makeElementUnselectable=S,e.util.makeElementSelectable=x}();function m(w){var C=e.jsdomImplForWrapper(w);return C._canvas||C._image}function v(w){if(e.isLikelyNode){var C=e.jsdomImplForWrapper(w);C&&(C._image=null,C._canvas=null,C._currentSrc=null,C._attributes=null,C._classList=null)}}function _(w,C){w.imageSmoothingEnabled=w.imageSmoothingEnabled||w.webkitImageSmoothingEnabled||w.mozImageSmoothingEnabled||w.msImageSmoothingEnabled||w.oImageSmoothingEnabled,w.imageSmoothingEnabled=C}e.util.setImageSmoothing=_,e.util.getById=r,e.util.toArray=p,e.util.addClass=l,e.util.makeElement=o,e.util.wrapElement=a,e.util.getScrollLeftTop=c,e.util.getElementOffset=g,e.util.getNodeCanvas=m,e.util.cleanUpJsdomNode=v}(),function(){function d(p,o){return p+(/\?/.test(p)?"&":"?")+o}function r(){}function h(p,o){o||(o={});var l=o.method?o.method.toUpperCase():"GET",a=o.onComplete||function(){},c=new e.window.XMLHttpRequest,g=o.body||o.parameters;return c.onreadystatechange=function(){c.readyState===4&&(a(c),c.onreadystatechange=r)},l==="GET"&&(g=null,typeof o.parameters=="string"&&(p=d(p,o.parameters))),c.open(l,p,!0),(l==="POST"||l==="PUT")&&c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.send(g),c}e.util.request=h}(),e.log=console.log,e.warn=console.warn,function(){var d=e.util.object.extend,r=e.util.object.clone,h=[];e.util.object.extend(h,{cancelAll:function(){var m=this.splice(0);return m.forEach(function(v){v.cancel()}),m},cancelByCanvas:function(m){if(!m)return[];var v=this.filter(function(_){return typeof _.target=="object"&&_.target.canvas===m});return v.forEach(function(_){_.cancel()}),v},cancelByTarget:function(m){var v=this.findAnimationsByTarget(m);return v.forEach(function(_){_.cancel()}),v},findAnimationIndex:function(m){return this.indexOf(this.findAnimation(m))},findAnimation:function(m){return this.find(function(v){return v.cancel===m})},findAnimationsByTarget:function(m){return m?this.filter(function(v){return v.target===m}):[]}});function p(){return!1}function o(m,v,_,w){return-_*Math.cos(m/w*(Math.PI/2))+_+v}function l(m){m||(m={});var v=!1,_,w=function(){var C=e.runningAnimations.indexOf(_);return C>-1&&e.runningAnimations.splice(C,1)[0]};return _=d(r(m),{cancel:function(){return v=!0,w()},currentValue:"startValue"in m?m.startValue:0,completionRate:0,durationRate:0}),e.runningAnimations.push(_),g(function(C){var S=C||+new Date,x=m.duration||500,O=S+x,L,F=m.onChange||p,Y=m.abort||p,Q=m.onComplete||p,te=m.easing||o,q="startValue"in m?m.startValue.length>0:!1,J="startValue"in m?m.startValue:0,ie="endValue"in m?m.endValue:100,se=m.byValue||(q?J.map(function(U,T){return ie[T]-J[T]}):ie-J);m.onStart&&m.onStart(),function U(T){L=T||+new Date;var k=L>O?x:L-S,A=k/x,P=q?J.map(function(b,E){return te(k,J[E],se[E],x)}):te(k,J,se,x),M=Math.abs(q?(P[0]-J[0])/se[0]:(P-J)/se);if(_.currentValue=q?P.slice():P,_.completionRate=M,_.durationRate=A,!v){if(Y(P,M,A)){w();return}if(L>O){_.currentValue=q?ie.slice():ie,_.completionRate=1,_.durationRate=1,F(q?ie.slice():ie,1,1),Q(ie,1,1),w();return}else F(P,M,A),g(U)}}(S)}),_.cancel}var a=e.window.requestAnimationFrame||e.window.webkitRequestAnimationFrame||e.window.mozRequestAnimationFrame||e.window.oRequestAnimationFrame||e.window.msRequestAnimationFrame||function(m){return e.window.setTimeout(m,1e3/60)},c=e.window.cancelAnimationFrame||e.window.clearTimeout;function g(){return a.apply(e.window,arguments)}function u(){return c.apply(e.window,arguments)}e.util.animate=l,e.util.requestAnimFrame=g,e.util.cancelAnimFrame=u,e.runningAnimations=h}(),function(){function d(h,p,o){var l="rgba("+parseInt(h[0]+o*(p[0]-h[0]),10)+","+parseInt(h[1]+o*(p[1]-h[1]),10)+","+parseInt(h[2]+o*(p[2]-h[2]),10);return l+=","+(h&&p?parseFloat(h[3]+o*(p[3]-h[3])):1),l+=")",l}function r(h,p,o,l){var a=new e.Color(h).getSource(),c=new e.Color(p).getSource(),g=l.onComplete,u=l.onChange;return l=l||{},e.util.animate(e.util.object.extend(l,{duration:o||500,startValue:a,endValue:c,byValue:c,easing:function(m,v,_,w){var C=l.colorEasing?l.colorEasing(m,w):1-Math.cos(m/w*(Math.PI/2));return d(v,_,C)},onComplete:function(m,v,_){if(g)return g(d(c,c,0),v,_)},onChange:function(m,v,_){if(u){if(Array.isArray(m))return u(d(m,m,0),v,_);u(m,v,_)}}}))}e.util.animateColor=r}(),function(){function d(T,k,A,P){return T<Math.abs(k)?(T=k,P=A/4):k===0&&T===0?P=A/(2*Math.PI)*Math.asin(1):P=A/(2*Math.PI)*Math.asin(k/T),{a:T,c:k,p:A,s:P}}function r(T,k,A){return T.a*Math.pow(2,10*(k-=1))*Math.sin((k*A-T.s)*(2*Math.PI)/T.p)}function h(T,k,A,P){return A*((T=T/P-1)*T*T+1)+k}function p(T,k,A,P){return T/=P/2,T<1?A/2*T*T*T+k:A/2*((T-=2)*T*T+2)+k}function o(T,k,A,P){return A*(T/=P)*T*T*T+k}function l(T,k,A,P){return-A*((T=T/P-1)*T*T*T-1)+k}function a(T,k,A,P){return T/=P/2,T<1?A/2*T*T*T*T+k:-A/2*((T-=2)*T*T*T-2)+k}function c(T,k,A,P){return A*(T/=P)*T*T*T*T+k}function g(T,k,A,P){return A*((T=T/P-1)*T*T*T*T+1)+k}function u(T,k,A,P){return T/=P/2,T<1?A/2*T*T*T*T*T+k:A/2*((T-=2)*T*T*T*T+2)+k}function m(T,k,A,P){return-A*Math.cos(T/P*(Math.PI/2))+A+k}function v(T,k,A,P){return A*Math.sin(T/P*(Math.PI/2))+k}function _(T,k,A,P){return-A/2*(Math.cos(Math.PI*T/P)-1)+k}function w(T,k,A,P){return T===0?k:A*Math.pow(2,10*(T/P-1))+k}function C(T,k,A,P){return T===P?k+A:A*(-Math.pow(2,-10*T/P)+1)+k}function S(T,k,A,P){return T===0?k:T===P?k+A:(T/=P/2,T<1?A/2*Math.pow(2,10*(T-1))+k:A/2*(-Math.pow(2,-10*--T)+2)+k)}function x(T,k,A,P){return-A*(Math.sqrt(1-(T/=P)*T)-1)+k}function O(T,k,A,P){return A*Math.sqrt(1-(T=T/P-1)*T)+k}function L(T,k,A,P){return T/=P/2,T<1?-A/2*(Math.sqrt(1-T*T)-1)+k:A/2*(Math.sqrt(1-(T-=2)*T)+1)+k}function F(T,k,A,P){var M=1.70158,b=0,E=A;if(T===0)return k;if(T/=P,T===1)return k+A;b||(b=P*.3);var I=d(E,A,b,M);return-r(I,T,P)+k}function Y(T,k,A,P){var M=1.70158,b=0,E=A;if(T===0)return k;if(T/=P,T===1)return k+A;b||(b=P*.3);var I=d(E,A,b,M);return I.a*Math.pow(2,-10*T)*Math.sin((T*P-I.s)*(2*Math.PI)/I.p)+I.c+k}function Q(T,k,A,P){var M=1.70158,b=0,E=A;if(T===0)return k;if(T/=P/2,T===2)return k+A;b||(b=P*(.3*1.5));var I=d(E,A,b,M);return T<1?-.5*r(I,T,P)+k:I.a*Math.pow(2,-10*(T-=1))*Math.sin((T*P-I.s)*(2*Math.PI)/I.p)*.5+I.c+k}function te(T,k,A,P,M){return M===void 0&&(M=1.70158),A*(T/=P)*T*((M+1)*T-M)+k}function q(T,k,A,P,M){return M===void 0&&(M=1.70158),A*((T=T/P-1)*T*((M+1)*T+M)+1)+k}function J(T,k,A,P,M){return M===void 0&&(M=1.70158),T/=P/2,T<1?A/2*(T*T*(((M*=1.525)+1)*T-M))+k:A/2*((T-=2)*T*(((M*=1.525)+1)*T+M)+2)+k}function ie(T,k,A,P){return A-se(P-T,0,A,P)+k}function se(T,k,A,P){return(T/=P)<1/2.75?A*(7.5625*T*T)+k:T<2/2.75?A*(7.5625*(T-=1.5/2.75)*T+.75)+k:T<2.5/2.75?A*(7.5625*(T-=2.25/2.75)*T+.9375)+k:A*(7.5625*(T-=2.625/2.75)*T+.984375)+k}function U(T,k,A,P){return T<P/2?ie(T*2,0,A,P)*.5+k:se(T*2-P,0,A,P)*.5+A*.5+k}e.util.ease={easeInQuad:function(T,k,A,P){return A*(T/=P)*T+k},easeOutQuad:function(T,k,A,P){return-A*(T/=P)*(T-2)+k},easeInOutQuad:function(T,k,A,P){return T/=P/2,T<1?A/2*T*T+k:-A/2*(--T*(T-2)-1)+k},easeInCubic:function(T,k,A,P){return A*(T/=P)*T*T+k},easeOutCubic:h,easeInOutCubic:p,easeInQuart:o,easeOutQuart:l,easeInOutQuart:a,easeInQuint:c,easeOutQuint:g,easeInOutQuint:u,easeInSine:m,easeOutSine:v,easeInOutSine:_,easeInExpo:w,easeOutExpo:C,easeInOutExpo:S,easeInCirc:x,easeOutCirc:O,easeInOutCirc:L,easeInElastic:F,easeOutElastic:Y,easeInOutElastic:Q,easeInBack:te,easeOutBack:q,easeInOutBack:J,easeInBounce:ie,easeOutBounce:se,easeInOutBounce:U}}(),function(d){var r=d.fabric||(d.fabric={}),h=r.util.object.extend,p=r.util.object.clone,o=r.util.toFixed,l=r.util.parseUnit,a=r.util.multiplyTransformMatrices,c=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],g=["symbol","image","marker","pattern","view","svg"],u=["pattern","defs","symbol","metadata","clipPath","mask","desc"],m=["symbol","g","a","svg","clipPath","defs"],v={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},_={stroke:"strokeOpacity",fill:"fillOpacity"},w="font-size",C="clip-path";r.svgValidTagNamesRegEx=O(c),r.svgViewBoxElementsRegEx=O(g),r.svgInvalidAncestorsRegEx=O(u),r.svgValidParentsRegEx=O(m),r.cssRules={},r.gradientDefs={},r.clipPaths={};function S(b){return b in v?v[b]:b}function x(b,E,I,D){var z=Array.isArray(E),N;if((b==="fill"||b==="stroke")&&E==="none")E="";else{if(b==="strokeUniform")return E==="non-scaling-stroke";if(b==="strokeDashArray")E==="none"?E=null:E=E.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(b==="transformMatrix")I&&I.transformMatrix?E=a(I.transformMatrix,r.parseTransformAttribute(E)):E=r.parseTransformAttribute(E);else if(b==="visible")E=E!=="none"&&E!=="hidden",I&&I.visible===!1&&(E=!1);else if(b==="opacity")E=parseFloat(E),I&&typeof I.opacity<"u"&&(E*=I.opacity);else if(b==="textAnchor")E=E==="start"?"left":E==="end"?"right":"center";else if(b==="charSpacing")N=l(E,D)/D*1e3;else if(b==="paintFirst"){var W=E.indexOf("fill"),G=E.indexOf("stroke"),E="fill";(W>-1&&G>-1&&G<W||W===-1&&G>-1)&&(E="stroke")}else{if(b==="href"||b==="xlink:href"||b==="font")return E;if(b==="imageSmoothing")return E==="optimizeQuality";N=z?E.map(l):l(E,D)}}return!z&&isNaN(N)?E:N}function O(b){return new RegExp("^("+b.join("|")+")\\b","i")}function L(b){for(var E in _)if(!(typeof b[_[E]]>"u"||b[E]==="")){if(typeof b[E]>"u"){if(!r.Object.prototype[E])continue;b[E]=r.Object.prototype[E]}if(b[E].indexOf("url(")!==0){var I=new r.Color(b[E]);b[E]=I.setAlpha(o(I.getAlpha()*b[_[E]],2)).toRgba()}}return b}function F(b,E){var I,D=[],z,N,W;for(N=0,W=E.length;N<W;N++)I=E[N],z=b.getElementsByTagName(I),D=D.concat(Array.prototype.slice.call(z));return D}r.parseTransformAttribute=function(){function b(V,ae){var ce=r.util.cos(ae[0]),de=r.util.sin(ae[0]),Ee=0,me=0;ae.length===3&&(Ee=ae[1],me=ae[2]),V[0]=ce,V[1]=de,V[2]=-de,V[3]=ce,V[4]=Ee-(ce*Ee-de*me),V[5]=me-(de*Ee+ce*me)}function E(V,ae){var ce=ae[0],de=ae.length===2?ae[1]:ae[0];V[0]=ce,V[3]=de}function I(V,ae,ce){V[ce]=Math.tan(r.util.degreesToRadians(ae[0]))}function D(V,ae){V[4]=ae[0],ae.length===2&&(V[5]=ae[1])}var z=r.iMatrix,N=r.reNum,W=r.commaWsp,G="(?:(skewX)\\s*\\(\\s*("+N+")\\s*\\))",Z="(?:(skewY)\\s*\\(\\s*("+N+")\\s*\\))",B="(?:(rotate)\\s*\\(\\s*("+N+")(?:"+W+"("+N+")"+W+"("+N+"))?\\s*\\))",R="(?:(scale)\\s*\\(\\s*("+N+")(?:"+W+"("+N+"))?\\s*\\))",H="(?:(translate)\\s*\\(\\s*("+N+")(?:"+W+"("+N+"))?\\s*\\))",$="(?:(matrix)\\s*\\(\\s*("+N+")"+W+"("+N+")"+W+"("+N+")"+W+"("+N+")"+W+"("+N+")"+W+"("+N+")\\s*\\))",j="(?:"+$+"|"+H+"|"+R+"|"+B+"|"+G+"|"+Z+")",X="(?:"+j+"(?:"+W+"*"+j+")*)",ee="^\\s*(?:"+X+"?)\\s*$",ue=new RegExp(ee),oe=new RegExp(j,"g");return function(V){var ae=z.concat(),ce=[];if(!V||V&&!ue.test(V))return ae;V.replace(oe,function(Ee){var me=new RegExp(j).exec(Ee).filter(function(Kn){return!!Kn}),tt=me[1],Me=me.slice(2).map(parseFloat);switch(tt){case"translate":D(ae,Me);break;case"rotate":Me[0]=r.util.degreesToRadians(Me[0]),b(ae,Me);break;case"scale":E(ae,Me);break;case"skewX":I(ae,Me,2);break;case"skewY":I(ae,Me,1);break;case"matrix":ae=Me;break}ce.push(ae.concat()),ae=z.concat()});for(var de=ce[0];ce.length>1;)ce.shift(),de=r.util.multiplyTransformMatrices(de,ce[0]);return de}}();function Y(b,E){var I,D;b.replace(/;\s*$/,"").split(";").forEach(function(z){var N=z.split(":");I=N[0].trim().toLowerCase(),D=N[1].trim(),E[I]=D})}function Q(b,E){var I,D;for(var z in b)typeof b[z]>"u"||(I=z.toLowerCase(),D=b[z],E[I]=D)}function te(b,E){var I={};for(var D in r.cssRules[E])if(q(b,D.split(" ")))for(var z in r.cssRules[E][D])I[z]=r.cssRules[E][D][z];return I}function q(b,E){var I,D=!0;return I=ie(b,E.pop()),I&&E.length&&(D=J(b,E)),I&&D&&E.length===0}function J(b,E){for(var I,D=!0;b.parentNode&&b.parentNode.nodeType===1&&E.length;)D&&(I=E.pop()),b=b.parentNode,D=ie(b,I);return E.length===0}function ie(b,E){var I=b.nodeName,D=b.getAttribute("class"),z=b.getAttribute("id"),N,W;if(N=new RegExp("^"+I,"i"),E=E.replace(N,""),z&&E.length&&(N=new RegExp("#"+z+"(?![a-zA-Z\\-]+)","i"),E=E.replace(N,"")),D&&E.length)for(D=D.split(" "),W=D.length;W--;)N=new RegExp("\\."+D[W]+"(?![a-zA-Z\\-]+)","i"),E=E.replace(N,"");return E.length===0}function se(b,E){var I;if(b.getElementById&&(I=b.getElementById(E)),I)return I;var D,z,N,W=b.getElementsByTagName("*");for(z=0,N=W.length;z<N;z++)if(D=W[z],E===D.getAttribute("id"))return D}function U(b){for(var E=F(b,["use","svg:use"]),I=0;E.length&&I<E.length;){var D=E[I],z=D.getAttribute("xlink:href")||D.getAttribute("href");if(z===null)return;var N=z.slice(1),W=D.getAttribute("x")||0,G=D.getAttribute("y")||0,Z=se(b,N).cloneNode(!0),B=(Z.getAttribute("transform")||"")+" translate("+W+", "+G+")",R,H=E.length,$,j,X,ee,ue=r.svgNS;if(k(Z),/^svg$/i.test(Z.nodeName)){var oe=Z.ownerDocument.createElementNS(ue,"g");for(j=0,X=Z.attributes,ee=X.length;j<ee;j++)$=X.item(j),oe.setAttributeNS(ue,$.nodeName,$.nodeValue);for(;Z.firstChild;)oe.appendChild(Z.firstChild);Z=oe}for(j=0,X=D.attributes,ee=X.length;j<ee;j++)$=X.item(j),!($.nodeName==="x"||$.nodeName==="y"||$.nodeName==="xlink:href"||$.nodeName==="href")&&($.nodeName==="transform"?B=$.nodeValue+" "+B:Z.setAttribute($.nodeName,$.nodeValue));Z.setAttribute("transform",B),Z.setAttribute("instantiated_by_use","1"),Z.removeAttribute("id"),R=D.parentNode,R.replaceChild(Z,D),E.length===H&&I++}}var T=new RegExp("^\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*,?\\s*("+r.reNum+"+)\\s*$");function k(b){if(!r.svgViewBoxElementsRegEx.test(b.nodeName))return{};var E=b.getAttribute("viewBox"),I=1,D=1,z=0,N=0,W,G,Z,B,R=b.getAttribute("width"),H=b.getAttribute("height"),$=b.getAttribute("x")||0,j=b.getAttribute("y")||0,X=b.getAttribute("preserveAspectRatio")||"",ee=!E||!(E=E.match(T)),ue=!R||!H||R==="100%"||H==="100%",oe=ee&&ue,V={},ae="",ce=0,de=0;if(V.width=0,V.height=0,V.toBeParsed=oe,ee&&($||j)&&b.parentNode&&b.parentNode.nodeName!=="#document"&&(ae=" translate("+l($)+" "+l(j)+") ",Z=(b.getAttribute("transform")||"")+ae,b.setAttribute("transform",Z),b.removeAttribute("x"),b.removeAttribute("y")),oe)return V;if(ee)return V.width=l(R),V.height=l(H),V;if(z=-parseFloat(E[1]),N=-parseFloat(E[2]),W=parseFloat(E[3]),G=parseFloat(E[4]),V.minX=z,V.minY=N,V.viewBoxWidth=W,V.viewBoxHeight=G,ue?(V.width=W,V.height=G):(V.width=l(R),V.height=l(H),I=V.width/W,D=V.height/G),X=r.util.parsePreserveAspectRatioAttribute(X),X.alignX!=="none"&&(X.meetOrSlice==="meet"&&(D=I=I>D?D:I),X.meetOrSlice==="slice"&&(D=I=I>D?I:D),ce=V.width-W*I,de=V.height-G*I,X.alignX==="Mid"&&(ce/=2),X.alignY==="Mid"&&(de/=2),X.alignX==="Min"&&(ce=0),X.alignY==="Min"&&(de=0)),I===1&&D===1&&z===0&&N===0&&$===0&&j===0)return V;if(($||j)&&b.parentNode.nodeName!=="#document"&&(ae=" translate("+l($)+" "+l(j)+") "),Z=ae+" matrix("+I+" 0 0 "+D+" "+(z*I+ce)+" "+(N*D+de)+") ",b.nodeName==="svg"){for(B=b.ownerDocument.createElementNS(r.svgNS,"g");b.firstChild;)B.appendChild(b.firstChild);b.appendChild(B)}else B=b,B.removeAttribute("x"),B.removeAttribute("y"),Z=B.getAttribute("transform")+Z;return B.setAttribute("transform",Z),V}function A(b,E){for(;b&&(b=b.parentNode);)if(b.nodeName&&E.test(b.nodeName.replace("svg:",""))&&!b.getAttribute("instantiated_by_use"))return!0;return!1}r.parseSVGDocument=function(b,E,I,D){if(b){U(b);var z=r.Object.__uid++,N,W,G=k(b),Z=r.util.toArray(b.getElementsByTagName("*"));if(G.crossOrigin=D&&D.crossOrigin,G.svgUid=z,Z.length===0&&r.isLikelyNode){Z=b.selectNodes('//*[name(.)!="svg"]');var B=[];for(N=0,W=Z.length;N<W;N++)B[N]=Z[N];Z=B}var R=Z.filter(function($){return k($),r.svgValidTagNamesRegEx.test($.nodeName.replace("svg:",""))&&!A($,r.svgInvalidAncestorsRegEx)});if(!R||R&&!R.length){E&&E([],{});return}var H={};Z.filter(function($){return $.nodeName.replace("svg:","")==="clipPath"}).forEach(function($){var j=$.getAttribute("id");H[j]=r.util.toArray($.getElementsByTagName("*")).filter(function(X){return r.svgValidTagNamesRegEx.test(X.nodeName.replace("svg:",""))})}),r.gradientDefs[z]=r.getGradientDefs(b),r.cssRules[z]=r.getCSSRules(b),r.clipPaths[z]=H,r.parseElements(R,function($,j){E&&(E($,G,j,Z),delete r.gradientDefs[z],delete r.cssRules[z],delete r.clipPaths[z])},p(G),I,D)}};function P(b,E){var I=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],D="xlink:href",z=E.getAttribute(D).slice(1),N=se(b,z);if(N&&N.getAttribute(D)&&P(b,N),I.forEach(function(G){N&&!E.hasAttribute(G)&&N.hasAttribute(G)&&E.setAttribute(G,N.getAttribute(G))}),!E.children.length)for(var W=N.cloneNode(!0);W.firstChild;)E.appendChild(W.firstChild);E.removeAttribute(D)}var M=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+r.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+r.reNum+"))?\\s+(.*)");h(r,{parseFontDeclaration:function(b,E){var I=b.match(M);if(I){var D=I[1],z=I[3],N=I[4],W=I[5],G=I[6];D&&(E.fontStyle=D),z&&(E.fontWeight=isNaN(parseFloat(z))?z:parseFloat(z)),N&&(E.fontSize=l(N)),G&&(E.fontFamily=G),W&&(E.lineHeight=W==="normal"?1:W)}},getGradientDefs:function(b){var E=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],I=F(b,E),D,z=0,N={};for(z=I.length;z--;)D=I[z],D.getAttribute("xlink:href")&&P(b,D),N[D.getAttribute("id")]=D;return N},parseAttributes:function(b,E,I){if(b){var D,z={},N,W;typeof I>"u"&&(I=b.getAttribute("svgUid")),b.parentNode&&r.svgValidParentsRegEx.test(b.parentNode.nodeName)&&(z=r.parseAttributes(b.parentNode,E,I));var G=E.reduce(function(X,ee){return D=b.getAttribute(ee),D&&(X[ee]=D),X},{}),Z=h(te(b,I),r.parseStyleAttribute(b));G=h(G,Z),Z[C]&&b.setAttribute(C,Z[C]),N=W=z.fontSize||r.Text.DEFAULT_SVG_FONT_SIZE,G[w]&&(G[w]=N=l(G[w],W));var B,R,H={};for(var $ in G)B=S($),R=x(B,G[$],z,N),H[B]=R;H&&H.font&&r.parseFontDeclaration(H.font,H);var j=h(z,H);return r.svgValidParentsRegEx.test(b.nodeName)?j:L(j)}},parseElements:function(b,E,I,D,z){new r.ElementsParser(b,E,I,D,z).parse()},parseStyleAttribute:function(b){var E={},I=b.getAttribute("style");return I&&(typeof I=="string"?Y(I,E):Q(I,E)),E},parsePointsAttribute:function(b){if(!b)return null;b=b.replace(/,/g," ").trim(),b=b.split(/\s+/);var E=[],I,D;for(I=0,D=b.length;I<D;I+=2)E.push({x:parseFloat(b[I]),y:parseFloat(b[I+1])});return E},getCSSRules:function(b){var E=b.getElementsByTagName("style"),I,D,z={},N;for(I=0,D=E.length;I<D;I++){var W=E[I].textContent;W=W.replace(/\/\*[\s\S]*?\*\//g,""),W.trim()!==""&&(N=W.split("}"),N=N.filter(function(G){return G.trim()}),N.forEach(function(G){var Z=G.split("{"),B={},R=Z[1].trim(),H=R.split(";").filter(function(ee){return ee.trim()});for(I=0,D=H.length;I<D;I++){var $=H[I].split(":"),j=$[0].trim(),X=$[1].trim();B[j]=X}G=Z[0].trim(),G.split(",").forEach(function(ee){ee=ee.replace(/^svg/i,"").trim(),ee!==""&&(z[ee]?r.util.object.extend(z[ee],B):z[ee]=r.util.object.clone(B))})}))}return z},loadSVGFromURL:function(b,E,I,D){b=b.replace(/^\n\s*/,"").trim(),new r.util.request(b,{method:"get",onComplete:z});function z(N){var W=N.responseXML;if(!W||!W.documentElement)return E&&E(null),!1;r.parseSVGDocument(W.documentElement,function(G,Z,B,R){E&&E(G,Z,B,R)},I,D)}},loadSVGFromString:function(b,E,I,D){var z=new r.window.DOMParser,N=z.parseFromString(b.trim(),"text/xml");r.parseSVGDocument(N.documentElement,function(W,G,Z,B){E(W,G,Z,B)},I,D)}})}(t),e.ElementsParser=function(d,r,h,p,o,l){this.elements=d,this.callback=r,this.options=h,this.reviver=p,this.svgUid=h&&h.svgUid||0,this.parsingOptions=o,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=l},function(d){d.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},d.createObjects=function(){var r=this;this.elements.forEach(function(h,p){h.setAttribute("svgUid",r.svgUid),r.createObject(h,p)})},d.findTag=function(r){return e[e.util.string.capitalize(r.tagName.replace("svg:",""))]},d.createObject=function(r,h){var p=this.findTag(r);if(p&&p.fromElement)try{p.fromElement(r,this.createCallback(h,r),this.options)}catch(o){e.log(o)}else this.checkIfDone()},d.createCallback=function(r,h){var p=this;return function(o){var l;p.resolveGradient(o,h,"fill"),p.resolveGradient(o,h,"stroke"),o instanceof e.Image&&o._originalElement&&(l=o.parsePreserveAspectRatioAttribute(h)),o._removeTransformMatrix(l),p.resolveClipPath(o,h),p.reviver&&p.reviver(h,o),p.instances[r]=o,p.checkIfDone()}},d.extractPropertyDefinition=function(r,h,p){var o=r[h],l=this.regexUrl;if(l.test(o)){l.lastIndex=0;var a=l.exec(o)[1];return l.lastIndex=0,e[p][this.svgUid][a]}},d.resolveGradient=function(r,h,p){var o=this.extractPropertyDefinition(r,p,"gradientDefs");if(o){var l=h.getAttribute(p+"-opacity"),a=e.Gradient.fromElement(o,r,l,this.options);r.set(p,a)}},d.createClipPathCallback=function(r,h){return function(p){p._removeTransformMatrix(),p.fillRule=p.clipRule,h.push(p)}},d.resolveClipPath=function(r,h){var p=this.extractPropertyDefinition(r,"clipPath","clipPaths"),o,l,a,c,g,u;if(p){c=[],a=e.util.invertTransform(r.calcTransformMatrix());for(var m=p[0].parentNode,v=h;v.parentNode&&v.getAttribute("clip-path")!==r.clipPath;)v=v.parentNode;v.parentNode.appendChild(m);for(var _=0;_<p.length;_++)o=p[_],l=this.findTag(o),l.fromElement(o,this.createClipPathCallback(r,c),this.options);c.length===1?p=c[0]:p=new e.Group(c),g=e.util.multiplyTransformMatrices(a,p.calcTransformMatrix()),p.clipPath&&this.resolveClipPath(p,v);var u=e.util.qrDecompose(g);p.flipX=!1,p.flipY=!1,p.set("scaleX",u.scaleX),p.set("scaleY",u.scaleY),p.angle=u.angle,p.skewX=u.skewX,p.skewY=0,p.setPositionByOrigin({x:u.translateX,y:u.translateY},"center","center"),r.clipPath=p}else delete r.clipPath},d.checkIfDone=function(){--this.numElements===0&&(this.instances=this.instances.filter(function(r){return r!=null}),this.callback(this.instances,this.elements))}}(e.ElementsParser.prototype),function(d){var r=d.fabric||(d.fabric={});if(r.Point){r.warn("fabric.Point is already defined");return}r.Point=h;function h(p,o){this.x=p,this.y=o}h.prototype={type:"point",constructor:h,add:function(p){return new h(this.x+p.x,this.y+p.y)},addEquals:function(p){return this.x+=p.x,this.y+=p.y,this},scalarAdd:function(p){return new h(this.x+p,this.y+p)},scalarAddEquals:function(p){return this.x+=p,this.y+=p,this},subtract:function(p){return new h(this.x-p.x,this.y-p.y)},subtractEquals:function(p){return this.x-=p.x,this.y-=p.y,this},scalarSubtract:function(p){return new h(this.x-p,this.y-p)},scalarSubtractEquals:function(p){return this.x-=p,this.y-=p,this},multiply:function(p){return new h(this.x*p,this.y*p)},multiplyEquals:function(p){return this.x*=p,this.y*=p,this},divide:function(p){return new h(this.x/p,this.y/p)},divideEquals:function(p){return this.x/=p,this.y/=p,this},eq:function(p){return this.x===p.x&&this.y===p.y},lt:function(p){return this.x<p.x&&this.y<p.y},lte:function(p){return this.x<=p.x&&this.y<=p.y},gt:function(p){return this.x>p.x&&this.y>p.y},gte:function(p){return this.x>=p.x&&this.y>=p.y},lerp:function(p,o){return typeof o>"u"&&(o=.5),o=Math.max(Math.min(1,o),0),new h(this.x+(p.x-this.x)*o,this.y+(p.y-this.y)*o)},distanceFrom:function(p){var o=this.x-p.x,l=this.y-p.y;return Math.sqrt(o*o+l*l)},midPointFrom:function(p){return this.lerp(p)},min:function(p){return new h(Math.min(this.x,p.x),Math.min(this.y,p.y))},max:function(p){return new h(Math.max(this.x,p.x),Math.max(this.y,p.y))},toString:function(){return this.x+","+this.y},setXY:function(p,o){return this.x=p,this.y=o,this},setX:function(p){return this.x=p,this},setY:function(p){return this.y=p,this},setFromPoint:function(p){return this.x=p.x,this.y=p.y,this},swap:function(p){var o=this.x,l=this.y;this.x=p.x,this.y=p.y,p.x=o,p.y=l},clone:function(){return new h(this.x,this.y)}}}(t),function(d){var r=d.fabric||(d.fabric={});if(r.Intersection){r.warn("fabric.Intersection is already defined");return}function h(p){this.status=p,this.points=[]}r.Intersection=h,r.Intersection.prototype={constructor:h,appendPoint:function(p){return this.points.push(p),this},appendPoints:function(p){return this.points=this.points.concat(p),this}},r.Intersection.intersectLineLine=function(p,o,l,a){var c,g=(a.x-l.x)*(p.y-l.y)-(a.y-l.y)*(p.x-l.x),u=(o.x-p.x)*(p.y-l.y)-(o.y-p.y)*(p.x-l.x),m=(a.y-l.y)*(o.x-p.x)-(a.x-l.x)*(o.y-p.y);if(m!==0){var v=g/m,_=u/m;0<=v&&v<=1&&0<=_&&_<=1?(c=new h("Intersection"),c.appendPoint(new r.Point(p.x+v*(o.x-p.x),p.y+v*(o.y-p.y)))):c=new h}else g===0||u===0?c=new h("Coincident"):c=new h("Parallel");return c},r.Intersection.intersectLinePolygon=function(p,o,l){var a=new h,c=l.length,g,u,m,v;for(v=0;v<c;v++)g=l[v],u=l[(v+1)%c],m=h.intersectLineLine(p,o,g,u),a.appendPoints(m.points);return a.points.length>0&&(a.status="Intersection"),a},r.Intersection.intersectPolygonPolygon=function(p,o){var l=new h,a=p.length,c;for(c=0;c<a;c++){var g=p[c],u=p[(c+1)%a],m=h.intersectLinePolygon(g,u,o);l.appendPoints(m.points)}return l.points.length>0&&(l.status="Intersection"),l},r.Intersection.intersectPolygonRectangle=function(p,o,l){var a=o.min(l),c=o.max(l),g=new r.Point(c.x,a.y),u=new r.Point(a.x,c.y),m=h.intersectLinePolygon(a,g,p),v=h.intersectLinePolygon(g,c,p),_=h.intersectLinePolygon(c,u,p),w=h.intersectLinePolygon(u,a,p),C=new h;return C.appendPoints(m.points),C.appendPoints(v.points),C.appendPoints(_.points),C.appendPoints(w.points),C.points.length>0&&(C.status="Intersection"),C}}(t),function(d){var r=d.fabric||(d.fabric={});if(r.Color){r.warn("fabric.Color is already defined.");return}function h(o){o?this._tryParsingColor(o):this.setSource([0,0,0,1])}r.Color=h,r.Color.prototype={_tryParsingColor:function(o){var l;o in h.colorNameMap&&(o=h.colorNameMap[o]),o==="transparent"&&(l=[255,255,255,0]),l||(l=h.sourceFromHex(o)),l||(l=h.sourceFromRgb(o)),l||(l=h.sourceFromHsl(o)),l||(l=[0,0,0,1]),l&&this.setSource(l)},_rgbToHsl:function(o,l,a){o/=255,l/=255,a/=255;var c,g,u,m=r.util.array.max([o,l,a]),v=r.util.array.min([o,l,a]);if(u=(m+v)/2,m===v)c=g=0;else{var _=m-v;switch(g=u>.5?_/(2-m-v):_/(m+v),m){case o:c=(l-a)/_+(l<a?6:0);break;case l:c=(a-o)/_+2;break;case a:c=(o-l)/_+4;break}c/=6}return[Math.round(c*360),Math.round(g*100),Math.round(u*100)]},getSource:function(){return this._source},setSource:function(o){this._source=o},toRgb:function(){var o=this.getSource();return"rgb("+o[0]+","+o[1]+","+o[2]+")"},toRgba:function(){var o=this.getSource();return"rgba("+o[0]+","+o[1]+","+o[2]+","+o[3]+")"},toHsl:function(){var o=this.getSource(),l=this._rgbToHsl(o[0],o[1],o[2]);return"hsl("+l[0]+","+l[1]+"%,"+l[2]+"%)"},toHsla:function(){var o=this.getSource(),l=this._rgbToHsl(o[0],o[1],o[2]);return"hsla("+l[0]+","+l[1]+"%,"+l[2]+"%,"+o[3]+")"},toHex:function(){var o=this.getSource(),l,a,c;return l=o[0].toString(16),l=l.length===1?"0"+l:l,a=o[1].toString(16),a=a.length===1?"0"+a:a,c=o[2].toString(16),c=c.length===1?"0"+c:c,l.toUpperCase()+a.toUpperCase()+c.toUpperCase()},toHexa:function(){var o=this.getSource(),l;return l=Math.round(o[3]*255),l=l.toString(16),l=l.length===1?"0"+l:l,this.toHex()+l.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(o){var l=this.getSource();return l[3]=o,this.setSource(l),this},toGrayscale:function(){var o=this.getSource(),l=parseInt((o[0]*.3+o[1]*.59+o[2]*.11).toFixed(0),10),a=o[3];return this.setSource([l,l,l,a]),this},toBlackWhite:function(o){var l=this.getSource(),a=(l[0]*.3+l[1]*.59+l[2]*.11).toFixed(0),c=l[3];return o=o||127,a=Number(a)<Number(o)?0:255,this.setSource([a,a,a,c]),this},overlayWith:function(o){o instanceof h||(o=new h(o));var l=[],a=this.getAlpha(),c=.5,g=this.getSource(),u=o.getSource(),m;for(m=0;m<3;m++)l.push(Math.round(g[m]*(1-c)+u[m]*c));return l[3]=a,this.setSource(l),this}},r.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,r.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,r.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,r.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function p(o,l,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?o+(l-o)*6*a:a<1/2?l:a<2/3?o+(l-o)*(2/3-a)*6:o}r.Color.fromRgb=function(o){return h.fromSource(h.sourceFromRgb(o))},r.Color.sourceFromRgb=function(o){var l=o.match(h.reRGBa);if(l){var a=parseInt(l[1],10)/(/%$/.test(l[1])?100:1)*(/%$/.test(l[1])?255:1),c=parseInt(l[2],10)/(/%$/.test(l[2])?100:1)*(/%$/.test(l[2])?255:1),g=parseInt(l[3],10)/(/%$/.test(l[3])?100:1)*(/%$/.test(l[3])?255:1);return[parseInt(a,10),parseInt(c,10),parseInt(g,10),l[4]?parseFloat(l[4]):1]}},r.Color.fromRgba=h.fromRgb,r.Color.fromHsl=function(o){return h.fromSource(h.sourceFromHsl(o))},r.Color.sourceFromHsl=function(o){var l=o.match(h.reHSLa);if(l){var a=(parseFloat(l[1])%360+360)%360/360,c=parseFloat(l[2])/(/%$/.test(l[2])?100:1),g=parseFloat(l[3])/(/%$/.test(l[3])?100:1),u,m,v;if(c===0)u=m=v=g;else{var _=g<=.5?g*(c+1):g+c-g*c,w=g*2-_;u=p(w,_,a+1/3),m=p(w,_,a),v=p(w,_,a-1/3)}return[Math.round(u*255),Math.round(m*255),Math.round(v*255),l[4]?parseFloat(l[4]):1]}},r.Color.fromHsla=h.fromHsl,r.Color.fromHex=function(o){return h.fromSource(h.sourceFromHex(o))},r.Color.sourceFromHex=function(o){if(o.match(h.reHex)){var l=o.slice(o.indexOf("#")+1),a=l.length===3||l.length===4,c=l.length===8||l.length===4,g=a?l.charAt(0)+l.charAt(0):l.substring(0,2),u=a?l.charAt(1)+l.charAt(1):l.substring(2,4),m=a?l.charAt(2)+l.charAt(2):l.substring(4,6),v=c?a?l.charAt(3)+l.charAt(3):l.substring(6,8):"FF";return[parseInt(g,16),parseInt(u,16),parseInt(m,16),parseFloat((parseInt(v,16)/255).toFixed(2))]}},r.Color.fromSource=function(o){var l=new h;return l.setSource(o),l}}(t),function(d){var r=d.fabric||(d.fabric={}),h=["e","se","s","sw","w","nw","n","ne","e"],p=["ns","nesw","ew","nwse"],o={},l="left",a="top",c="right",g="bottom",u="center",m={top:g,bottom:a,left:c,right:l,center:u},v=r.util.radiansToDegrees,_=Math.sign||function(B){return(B>0)-(B<0)||+B};function w(B,R){var H=B.angle+v(Math.atan2(R.y,R.x))+360;return Math.round(H%360/45)}function C(B,R){var H=R.transform.target,$=H.canvas,j=r.util.object.clone(R);j.target=H,$&&$.fire("object:"+B,j),H.fire(B,R)}function S(B,R){var H=R.canvas,$=H.uniScaleKey,j=B[$];return H.uniformScaling&&!j||!H.uniformScaling&&j}function x(B){return B.originX===u&&B.originY===u}function O(B,R,H){var $=B.lockScalingX,j=B.lockScalingY;return!!($&&j||!R&&($||j)&&H||$&&R==="x"||j&&R==="y")}function L(B,R,H){var $="not-allowed",j=S(B,H),X="";if(R.x!==0&&R.y===0?X="x":R.x===0&&R.y!==0&&(X="y"),O(H,X,j))return $;var ee=w(H,R);return h[ee]+"-resize"}function F(B,R,H){var $="not-allowed";if(R.x!==0&&H.lockSkewingY||R.y!==0&&H.lockSkewingX)return $;var j=w(H,R)%4;return p[j]+"-resize"}function Y(B,R,H){return B[H.canvas.altActionKey]?o.skewCursorStyleHandler(B,R,H):o.scaleCursorStyleHandler(B,R,H)}function Q(B,R,H){var $=B[H.canvas.altActionKey];if(R.x===0)return $?"skewX":"scaleY";if(R.y===0)return $?"skewY":"scaleX"}function te(B,R,H){return H.lockRotation?"not-allowed":R.cursorStyle}function q(B,R,H,$){return{e:B,transform:R,pointer:{x:H,y:$}}}function J(B){return function(R,H,$,j){var X=H.target,ee=X.getCenterPoint(),ue=X.translateToOriginPoint(ee,H.originX,H.originY),oe=B(R,H,$,j);return X.setPositionByOrigin(ue,H.originX,H.originY),oe}}function ie(B,R){return function(H,$,j,X){var ee=R(H,$,j,X);return ee&&C(B,q(H,$,j,X)),ee}}function se(B,R,H,$,j){var X=B.target,ee=X.controls[B.corner],ue=X.canvas.getZoom(),oe=X.padding/ue,V=X.toLocalPoint(new r.Point($,j),R,H);return V.x>=oe&&(V.x-=oe),V.x<=-oe&&(V.x+=oe),V.y>=oe&&(V.y-=oe),V.y<=oe&&(V.y+=oe),V.x-=ee.offsetX,V.y-=ee.offsetY,V}function U(B){return B.flipX!==B.flipY}function T(B,R,H,$,j){if(B[R]!==0){var X=B._getTransformedDimensions()[$],ee=j/X*B[H];B.set(H,ee)}}function k(B,R,H,$){var j=R.target,X=j._getTransformedDimensions(0,j.skewY),ee=se(R,R.originX,R.originY,H,$),ue=Math.abs(ee.x*2)-X.x,oe=j.skewX,V;ue<2?V=0:(V=v(Math.atan2(ue/j.scaleX,X.y/j.scaleY)),R.originX===l&&R.originY===g&&(V=-V),R.originX===c&&R.originY===a&&(V=-V),U(j)&&(V=-V));var ae=oe!==V;if(ae){var ce=j._getTransformedDimensions().y;j.set("skewX",V),T(j,"skewY","scaleY","y",ce)}return ae}function A(B,R,H,$){var j=R.target,X=j._getTransformedDimensions(j.skewX,0),ee=se(R,R.originX,R.originY,H,$),ue=Math.abs(ee.y*2)-X.y,oe=j.skewY,V;ue<2?V=0:(V=v(Math.atan2(ue/j.scaleY,X.x/j.scaleX)),R.originX===l&&R.originY===g&&(V=-V),R.originX===c&&R.originY===a&&(V=-V),U(j)&&(V=-V));var ae=oe!==V;if(ae){var ce=j._getTransformedDimensions().x;j.set("skewY",V),T(j,"skewX","scaleX","x",ce)}return ae}function P(B,R,H,$){var j=R.target,X=j.skewX,ee,ue=R.originY;if(j.lockSkewingX)return!1;if(X===0){var oe=se(R,u,u,H,$);oe.x>0?ee=l:ee=c}else X>0&&(ee=ue===a?l:c),X<0&&(ee=ue===a?c:l),U(j)&&(ee=ee===l?c:l);R.originX=ee;var V=ie("skewing",J(k));return V(B,R,H,$)}function M(B,R,H,$){var j=R.target,X=j.skewY,ee,ue=R.originX;if(j.lockSkewingY)return!1;if(X===0){var oe=se(R,u,u,H,$);oe.y>0?ee=a:ee=g}else X>0&&(ee=ue===l?a:g),X<0&&(ee=ue===l?g:a),U(j)&&(ee=ee===a?g:a);R.originY=ee;var V=ie("skewing",J(A));return V(B,R,H,$)}function b(B,R,H,$){var j=R,X=j.target,ee=X.translateToOriginPoint(X.getCenterPoint(),j.originX,j.originY);if(X.lockRotation)return!1;var ue=Math.atan2(j.ey-ee.y,j.ex-ee.x),oe=Math.atan2($-ee.y,H-ee.x),V=v(oe-ue+j.theta),ae=!0;if(X.snapAngle>0){var ce=X.snapAngle,de=X.snapThreshold||ce,Ee=Math.ceil(V/ce)*ce,me=Math.floor(V/ce)*ce;Math.abs(V-me)<de?V=me:Math.abs(V-Ee)<de&&(V=Ee)}return V<0&&(V=360+V),V%=360,ae=X.angle!==V,X.angle=V,ae}function E(B,R,H,$,j){j=j||{};var X=R.target,ee=X.lockScalingX,ue=X.lockScalingY,oe=j.by,V,ae,ce,de,Ee=S(B,X),me=O(X,oe,Ee),tt,Me,Kn=R.gestureScale;if(me)return!1;if(Kn)ae=R.scaleX*Kn,ce=R.scaleY*Kn;else{if(V=se(R,R.originX,R.originY,H,$),tt=oe!=="y"?_(V.x):1,Me=oe!=="x"?_(V.y):1,R.signX||(R.signX=tt),R.signY||(R.signY=Me),X.lockScalingFlip&&(R.signX!==tt||R.signY!==Me))return!1;if(de=X._getTransformedDimensions(),Ee&&!oe){var ur=Math.abs(V.x)+Math.abs(V.y),qt=R.original,a0=Math.abs(de.x*qt.scaleX/X.scaleX)+Math.abs(de.y*qt.scaleY/X.scaleY),Kh=ur/a0;ae=qt.scaleX*Kh,ce=qt.scaleY*Kh}else ae=Math.abs(V.x*X.scaleX/de.x),ce=Math.abs(V.y*X.scaleY/de.y);x(R)&&(ae*=2,ce*=2),R.signX!==tt&&oe!=="y"&&(R.originX=m[R.originX],ae*=-1,R.signX=tt),R.signY!==Me&&oe!=="x"&&(R.originY=m[R.originY],ce*=-1,R.signY=Me)}var l0=X.scaleX,u0=X.scaleY;return oe?(oe==="x"&&X.set("scaleX",ae),oe==="y"&&X.set("scaleY",ce)):(!ee&&X.set("scaleX",ae),!ue&&X.set("scaleY",ce)),l0!==X.scaleX||u0!==X.scaleY}function I(B,R,H,$){return E(B,R,H,$)}function D(B,R,H,$){return E(B,R,H,$,{by:"x"})}function z(B,R,H,$){return E(B,R,H,$,{by:"y"})}function N(B,R,H,$){return B[R.target.canvas.altActionKey]?o.skewHandlerX(B,R,H,$):o.scalingY(B,R,H,$)}function W(B,R,H,$){return B[R.target.canvas.altActionKey]?o.skewHandlerY(B,R,H,$):o.scalingX(B,R,H,$)}function G(B,R,H,$){var j=R.target,X=se(R,R.originX,R.originY,H,$),ee=j.strokeWidth/(j.strokeUniform?j.scaleX:1),ue=x(R)?2:1,oe=j.width,V=Math.abs(X.x*ue/j.scaleX)-ee;return j.set("width",Math.max(V,0)),oe!==V}function Z(B,R,H,$){var j=R.target,X=H-R.offsetX,ee=$-R.offsetY,ue=!j.get("lockMovementX")&&j.left!==X,oe=!j.get("lockMovementY")&&j.top!==ee;return ue&&j.set("left",X),oe&&j.set("top",ee),(ue||oe)&&C("moving",q(B,R,H,$)),ue||oe}o.scaleCursorStyleHandler=L,o.skewCursorStyleHandler=F,o.scaleSkewCursorStyleHandler=Y,o.rotationWithSnapping=ie("rotating",J(b)),o.scalingEqually=ie("scaling",J(I)),o.scalingX=ie("scaling",J(D)),o.scalingY=ie("scaling",J(z)),o.scalingYOrSkewingX=N,o.scalingXOrSkewingY=W,o.changeWidth=ie("resizing",J(G)),o.skewHandlerX=P,o.skewHandlerY=M,o.dragHandler=Z,o.scaleOrSkewActionName=Q,o.rotationStyleHandler=te,o.fireEvent=C,o.wrapWithFixedAnchor=J,o.wrapWithFireEvent=ie,o.getLocalPoint=se,r.controlsUtils=o}(t),function(d){var r=d.fabric||(d.fabric={}),h=r.util.degreesToRadians,p=r.controlsUtils;function o(a,c,g,u,m){u=u||{};var v=this.sizeX||u.cornerSize||m.cornerSize,_=this.sizeY||u.cornerSize||m.cornerSize,w=typeof u.transparentCorners<"u"?u.transparentCorners:m.transparentCorners,C=w?"stroke":"fill",S=!w&&(u.cornerStrokeColor||m.cornerStrokeColor),x=c,O=g,L;a.save(),a.fillStyle=u.cornerColor||m.cornerColor,a.strokeStyle=u.cornerStrokeColor||m.cornerStrokeColor,v>_?(L=v,a.scale(1,_/v),O=g*v/_):_>v?(L=_,a.scale(v/_,1),x=c*_/v):L=v,a.lineWidth=1,a.beginPath(),a.arc(x,O,L/2,0,2*Math.PI,!1),a[C](),S&&a.stroke(),a.restore()}function l(a,c,g,u,m){u=u||{};var v=this.sizeX||u.cornerSize||m.cornerSize,_=this.sizeY||u.cornerSize||m.cornerSize,w=typeof u.transparentCorners<"u"?u.transparentCorners:m.transparentCorners,C=w?"stroke":"fill",S=!w&&(u.cornerStrokeColor||m.cornerStrokeColor),x=v/2,O=_/2;a.save(),a.fillStyle=u.cornerColor||m.cornerColor,a.strokeStyle=u.cornerStrokeColor||m.cornerStrokeColor,a.lineWidth=1,a.translate(c,g),a.rotate(h(m.angle)),a[C+"Rect"](-x,-O,v,_),S&&a.strokeRect(-x,-O,v,_),a.restore()}p.renderCircleControl=o,p.renderSquareControl=l}(t),function(d){var r=d.fabric||(d.fabric={});function h(p){for(var o in p)this[o]=p[o]}r.Control=h,r.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(p,o){return o.cursorStyle},getActionName:function(p,o){return o.actionName},getVisibility:function(p,o){var l=p._controlsVisibility;return l&&typeof l[o]<"u"?l[o]:this.visible},setVisibility:function(p){this.visible=p},positionHandler:function(p,o){var l=r.util.transformPoint({x:this.x*p.x+this.offsetX,y:this.y*p.y+this.offsetY},o);return l},calcCornerCoords:function(p,o,l,a,c){var g,u,m,v,_=c?this.touchSizeX:this.sizeX,w=c?this.touchSizeY:this.sizeY;if(_&&w&&_!==w){var C=Math.atan2(w,_),S=Math.sqrt(_*_+w*w)/2,x=C-r.util.degreesToRadians(p),O=Math.PI/2-C-r.util.degreesToRadians(p);g=S*r.util.cos(x),u=S*r.util.sin(x),m=S*r.util.cos(O),v=S*r.util.sin(O)}else{var L=_&&w?_:o;S=L*.7071067812;var x=r.util.degreesToRadians(45-p);g=m=S*r.util.cos(x),u=v=S*r.util.sin(x)}return{tl:{x:l-v,y:a-m},tr:{x:l+g,y:a-u},bl:{x:l-g,y:a+u},br:{x:l+v,y:a+m}}},render:function(p,o,l,a,c){switch(a=a||{},a.cornerStyle||c.cornerStyle){case"circle":r.controlsUtils.renderCircleControl.call(this,p,o,l,a,c);break;default:r.controlsUtils.renderSquareControl.call(this,p,o,l,a,c)}}}}(t),function(){function d(l,a){var c=l.getAttribute("style"),g=l.getAttribute("offset")||0,u,m,v,_;if(g=parseFloat(g)/(/%$/.test(g)?100:1),g=g<0?0:g>1?1:g,c){var w=c.split(/\s*;\s*/);for(w[w.length-1]===""&&w.pop(),_=w.length;_--;){var C=w[_].split(/\s*:\s*/),S=C[0].trim(),x=C[1].trim();S==="stop-color"?u=x:S==="stop-opacity"&&(v=x)}}return u||(u=l.getAttribute("stop-color")||"rgb(0,0,0)"),v||(v=l.getAttribute("stop-opacity")),u=new e.Color(u),m=u.getAlpha(),v=isNaN(parseFloat(v))?1:parseFloat(v),v*=m*a,{offset:g,color:u.toRgb(),opacity:v}}function r(l){return{x1:l.getAttribute("x1")||0,y1:l.getAttribute("y1")||0,x2:l.getAttribute("x2")||"100%",y2:l.getAttribute("y2")||0}}function h(l){return{x1:l.getAttribute("fx")||l.getAttribute("cx")||"50%",y1:l.getAttribute("fy")||l.getAttribute("cy")||"50%",r1:0,x2:l.getAttribute("cx")||"50%",y2:l.getAttribute("cy")||"50%",r2:l.getAttribute("r")||"50%"}}var p=e.util.object.clone;e.Gradient=e.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(l){l||(l={}),l.coords||(l.coords={});var a,c=this;Object.keys(l).forEach(function(g){c[g]=l[g]}),this.id?this.id+="_"+e.Object.__uid++:this.id=e.Object.__uid++,a={x1:l.coords.x1||0,y1:l.coords.y1||0,x2:l.coords.x2||0,y2:l.coords.y2||0},this.type==="radial"&&(a.r1=l.coords.r1||0,a.r2=l.coords.r2||0),this.coords=a,this.colorStops=l.colorStops.slice()},addColorStop:function(l){for(var a in l){var c=new e.Color(l[a]);this.colorStops.push({offset:parseFloat(a),color:c.toRgb(),opacity:c.getAlpha()})}return this},toObject:function(l){var a={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return e.util.populateWithProperties(this,a,l),a},toSVG:function(l,m){var c=p(this.coords,!0),g,u,m=m||{},v,_,w=p(this.colorStops,!0),C=c.r1>c.r2,S=this.gradientTransform?this.gradientTransform.concat():e.iMatrix.concat(),x=-this.offsetX,O=-this.offsetY,L=!!m.additionalTransform,F=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox";if(w.sort(function(J,ie){return J.offset-ie.offset}),F==="objectBoundingBox"?(x/=l.width,O/=l.height):(x+=l.width/2,O+=l.height/2),l.type==="path"&&this.gradientUnits!=="percentage"&&(x-=l.pathOffset.x,O-=l.pathOffset.y),S[4]-=x,S[5]-=O,_='id="SVGID_'+this.id+'" gradientUnits="'+F+'"',_+=' gradientTransform="'+(L?m.additionalTransform+" ":"")+e.util.matrixToSVG(S)+'" ',this.type==="linear"?v=["<linearGradient ",_,' x1="',c.x1,'" y1="',c.y1,'" x2="',c.x2,'" y2="',c.y2,`">
`]:this.type==="radial"&&(v=["<radialGradient ",_,' cx="',C?c.x1:c.x2,'" cy="',C?c.y1:c.y2,'" r="',C?c.r1:c.r2,'" fx="',C?c.x2:c.x1,'" fy="',C?c.y2:c.y1,`">
`]),this.type==="radial"){if(C)for(w=w.concat(),w.reverse(),g=0,u=w.length;g<u;g++)w[g].offset=1-w[g].offset;var Y=Math.min(c.r1,c.r2);if(Y>0){var Q=Math.max(c.r1,c.r2),te=Y/Q;for(g=0,u=w.length;g<u;g++)w[g].offset+=te*(1-w[g].offset)}}for(g=0,u=w.length;g<u;g++){var q=w[g];v.push("<stop ",'offset="',q.offset*100+"%",'" style="stop-color:',q.color,typeof q.opacity<"u"?";stop-opacity: "+q.opacity:";",`"/>
`)}return v.push(this.type==="linear"?`</linearGradient>
`:`</radialGradient>
`),v.join("")},toLive:function(l){var a,c=e.util.object.clone(this.coords),g,u;if(this.type){for(this.type==="linear"?a=l.createLinearGradient(c.x1,c.y1,c.x2,c.y2):this.type==="radial"&&(a=l.createRadialGradient(c.x1,c.y1,c.r1,c.x2,c.y2,c.r2)),g=0,u=this.colorStops.length;g<u;g++){var m=this.colorStops[g].color,v=this.colorStops[g].opacity,_=this.colorStops[g].offset;typeof v<"u"&&(m=new e.Color(m).setAlpha(v).toRgba()),a.addColorStop(_,m)}return a}}}),e.util.object.extend(e.Gradient,{fromElement:function(l,a,c,g){var u=parseFloat(c)/(/%$/.test(c)?100:1);u=u<0?0:u>1?1:u,isNaN(u)&&(u=1);var m=l.getElementsByTagName("stop"),v,_=l.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage",w=l.getAttribute("gradientTransform")||"",C=[],S,x,O=0,L=0,F;for(l.nodeName==="linearGradient"||l.nodeName==="LINEARGRADIENT"?(v="linear",S=r(l)):(v="radial",S=h(l)),x=m.length;x--;)C.push(d(m[x],u));F=e.parseTransformAttribute(w),o(a,S,g,_),_==="pixels"&&(O=-a.left,L=-a.top);var Y=new e.Gradient({id:l.getAttribute("id"),type:v,coords:S,colorStops:C,gradientUnits:_,gradientTransform:F,offsetX:O,offsetY:L});return Y}});function o(l,a,c,g){var u,m;Object.keys(a).forEach(function(v){u=a[v],u==="Infinity"?m=1:u==="-Infinity"?m=0:(m=parseFloat(a[v],10),typeof u=="string"&&/^(\d+\.\d+)%|(\d+)%$/.test(u)&&(m*=.01,g==="pixels"&&((v==="x1"||v==="x2"||v==="r2")&&(m*=c.viewBoxWidth||c.width),(v==="y1"||v==="y2")&&(m*=c.viewBoxHeight||c.height)))),a[v]=m})}}(),function(){var d=e.util.toFixed;e.Pattern=e.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(r,h){if(r||(r={}),this.id=e.Object.__uid++,this.setOptions(r),!r.source||r.source&&typeof r.source!="string"){h&&h(this);return}else{var p=this;this.source=e.util.createImage(),e.util.loadImage(r.source,function(o,l){p.source=o,h&&h(p,l)},null,this.crossOrigin)}},toObject:function(r){var h=e.Object.NUM_FRACTION_DIGITS,p,o;return typeof this.source.src=="string"?p=this.source.src:typeof this.source=="object"&&this.source.toDataURL&&(p=this.source.toDataURL()),o={type:"pattern",source:p,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:d(this.offsetX,h),offsetY:d(this.offsetY,h),patternTransform:this.patternTransform?this.patternTransform.concat():null},e.util.populateWithProperties(this,o,r),o},toSVG:function(r){var h=typeof this.source=="function"?this.source():this.source,p=h.width/r.width,o=h.height/r.height,l=this.offsetX/r.width,a=this.offsetY/r.height,c="";return(this.repeat==="repeat-x"||this.repeat==="no-repeat")&&(o=1,a&&(o+=Math.abs(a))),(this.repeat==="repeat-y"||this.repeat==="no-repeat")&&(p=1,l&&(p+=Math.abs(l))),h.src?c=h.src:h.toDataURL&&(c=h.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+l+'" y="'+a+'" width="'+p+'" height="'+o+`">
<image x="0" y="0" width="`+h.width+'" height="'+h.height+'" xlink:href="'+c+`"></image>
</pattern>
`},setOptions:function(r){for(var h in r)this[h]=r[h]},toLive:function(r){var h=this.source;return!h||typeof h.src<"u"&&(!h.complete||h.naturalWidth===0||h.naturalHeight===0)?"":r.createPattern(h,this.repeat)}})}(),function(d){var r=d.fabric||(d.fabric={}),h=r.util.toFixed;if(r.Shadow){r.warn("fabric.Shadow is already defined.");return}r.Shadow=r.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(p){typeof p=="string"&&(p=this._parseShadow(p));for(var o in p)this[o]=p[o];this.id=r.Object.__uid++},_parseShadow:function(p){var o=p.trim(),l=r.Shadow.reOffsetsAndBlur.exec(o)||[],a=o.replace(r.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:a.trim(),offsetX:parseFloat(l[1],10)||0,offsetY:parseFloat(l[2],10)||0,blur:parseFloat(l[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(p){var o=40,l=40,a=r.Object.NUM_FRACTION_DIGITS,c=r.util.rotateVector({x:this.offsetX,y:this.offsetY},r.util.degreesToRadians(-p.angle)),g=20,u=new r.Color(this.color);return p.width&&p.height&&(o=h((Math.abs(c.x)+this.blur)/p.width,a)*100+g,l=h((Math.abs(c.y)+this.blur)/p.height,a)*100+g),p.flipX&&(c.x*=-1),p.flipY&&(c.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+l+'%" height="'+(100+2*l)+'%" x="-'+o+'%" width="'+(100+2*o)+`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`+h(this.blur?this.blur/2:0,a)+`"></feGaussianBlur>
	<feOffset dx="`+h(c.x,a)+'" dy="'+h(c.y,a)+`" result="oBlur" ></feOffset>
	<feFlood flood-color="`+u.toRgb()+'" flood-opacity="'+u.getAlpha()+`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var p={},o=r.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(l){this[l]!==o[l]&&(p[l]=this[l])},this),p}}),r.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/}(t),function(){if(e.StaticCanvas){e.warn("fabric.StaticCanvas is already defined.");return}var d=e.util.object.extend,r=e.util.getElementOffset,h=e.util.removeFromArray,p=e.util.toFixed,o=e.util.transformPoint,l=e.util.invertTransform,a=e.util.getNodeCanvas,c=e.util.createCanvasElement,g=new Error("Could not initialize `canvas` element");e.StaticCanvas=e.util.createClass(e.CommonMethods,{initialize:function(u,m){m||(m={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(u,m)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:e.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(u,m){var v=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(u),this._initOptions(m),this.interactive||this._initRetinaScaling(),m.overlayImage&&this.setOverlayImage(m.overlayImage,v),m.backgroundImage&&this.setBackgroundImage(m.backgroundImage,v),m.backgroundColor&&this.setBackgroundColor(m.backgroundColor,v),m.overlayColor&&this.setOverlayColor(m.overlayColor,v),this.calcOffset()},_isRetinaScaling:function(){return e.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,e.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var u=e.devicePixelRatio;this.__initRetinaScaling(u,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(u,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(u,m,v){m.setAttribute("width",this.width*u),m.setAttribute("height",this.height*u),v.scale(u,u)},calcOffset:function(){return this._offset=r(this.lowerCanvasEl),this},setOverlayImage:function(u,m,v){return this.__setBgOverlayImage("overlayImage",u,m,v)},setBackgroundImage:function(u,m,v){return this.__setBgOverlayImage("backgroundImage",u,m,v)},setOverlayColor:function(u,m){return this.__setBgOverlayColor("overlayColor",u,m)},setBackgroundColor:function(u,m){return this.__setBgOverlayColor("backgroundColor",u,m)},__setBgOverlayImage:function(u,m,v,_){return typeof m=="string"?e.util.loadImage(m,function(w,C){if(w){var S=new e.Image(w,_);this[u]=S,S.canvas=this}v&&v(w,C)},this,_&&_.crossOrigin):(_&&m.setOptions(_),this[u]=m,m&&(m.canvas=this),v&&v(m,!1)),this},__setBgOverlayColor:function(u,m,v){return this[u]=m,this._initGradient(m,u),this._initPattern(m,u,v),this},_createCanvasElement:function(){var u=c();if(!u||(u.style||(u.style={}),typeof u.getContext>"u"))throw g;return u},_initOptions:function(u){var m=this.lowerCanvasEl;this._setOptions(u),this.width=this.width||parseInt(m.width,10)||0,this.height=this.height||parseInt(m.height,10)||0,this.lowerCanvasEl.style&&(m.width=this.width,m.height=this.height,m.style.width=this.width+"px",m.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(u){u&&u.getContext?this.lowerCanvasEl=u:this.lowerCanvasEl=e.util.getById(u)||this._createCanvasElement(),e.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(u,m){return this.setDimensions({width:u},m)},setHeight:function(u,m){return this.setDimensions({height:u},m)},setDimensions:function(u,m){var v;m=m||{};for(var _ in u)v=u[_],m.cssOnly||(this._setBackstoreDimension(_,u[_]),v+="px",this.hasLostContext=!0),m.backstoreOnly||this._setCssDimension(_,v);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),m.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(u,m){return this.lowerCanvasEl[u]=m,this.upperCanvasEl&&(this.upperCanvasEl[u]=m),this.cacheCanvasEl&&(this.cacheCanvasEl[u]=m),this[u]=m,this},_setCssDimension:function(u,m){return this.lowerCanvasEl.style[u]=m,this.upperCanvasEl&&(this.upperCanvasEl.style[u]=m),this.wrapperEl&&(this.wrapperEl.style[u]=m),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(u){var m=this._activeObject,v=this.backgroundImage,_=this.overlayImage,w,C,S;for(this.viewportTransform=u,C=0,S=this._objects.length;C<S;C++)w=this._objects[C],w.group||w.setCoords(!0);return m&&m.setCoords(),v&&v.setCoords(!0),_&&_.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(u,m){var v=u,_=this.viewportTransform.slice(0);u=o(u,l(this.viewportTransform)),_[0]=m,_[3]=m;var w=o(u,_);return _[4]+=v.x-w.x,_[5]+=v.y-w.y,this.setViewportTransform(_)},setZoom:function(u){return this.zoomToPoint(new e.Point(0,0),u),this},absolutePan:function(u){var m=this.viewportTransform.slice(0);return m[4]=-u.x,m[5]=-u.y,this.setViewportTransform(m)},relativePan:function(u){return this.absolutePan(new e.Point(-u.x-this.viewportTransform[4],-u.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(u){this.stateful&&u.setupState(),u._set("canvas",this),u.setCoords(),this.fire("object:added",{target:u}),u.fire("added")},_onObjectRemoved:function(u){this.fire("object:removed",{target:u}),u.fire("removed"),delete u.canvas},clearContext:function(u){return u.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var u=this.contextContainer;return this.renderCanvas(u,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=e.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var u={},m=this.width,v=this.height,_=l(this.viewportTransform);return u.tl=o({x:0,y:0},_),u.br=o({x:m,y:v},_),u.tr=new e.Point(u.br.x,u.tl.y),u.bl=new e.Point(u.tl.x,u.br.y),this.vptCoords=u,u},cancelRequestedRender:function(){this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(u,m){var v=this.viewportTransform,_=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(u),e.util.setImageSmoothing(u,this.imageSmoothingEnabled),this.fire("before:render",{ctx:u}),this._renderBackground(u),u.save(),u.transform(v[0],v[1],v[2],v[3],v[4],v[5]),this._renderObjects(u,m),u.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(u),_&&(_.canvas=this,_.shouldCache(),_._transformDone=!0,_.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(u)),this._renderOverlay(u),this.controlsAboveOverlay&&this.interactive&&this.drawControls(u),this.fire("after:render",{ctx:u})},drawClipPathOnCanvas:function(u){var m=this.viewportTransform,v=this.clipPath;u.save(),u.transform(m[0],m[1],m[2],m[3],m[4],m[5]),u.globalCompositeOperation="destination-in",v.transform(u),u.scale(1/v.zoomX,1/v.zoomY),u.drawImage(v._cacheCanvas,-v.cacheTranslationX,-v.cacheTranslationY),u.restore()},_renderObjects:function(u,m){var v,_;for(v=0,_=m.length;v<_;++v)m[v]&&m[v].render(u)},_renderBackgroundOrOverlay:function(u,m){var v=this[m+"Color"],_=this[m+"Image"],w=this.viewportTransform,C=this[m+"Vpt"];if(!(!v&&!_)){if(v){u.save(),u.beginPath(),u.moveTo(0,0),u.lineTo(this.width,0),u.lineTo(this.width,this.height),u.lineTo(0,this.height),u.closePath(),u.fillStyle=v.toLive?v.toLive(u,this):v,C&&u.transform(w[0],w[1],w[2],w[3],w[4],w[5]),u.transform(1,0,0,1,v.offsetX||0,v.offsetY||0);var S=v.gradientTransform||v.patternTransform;S&&u.transform(S[0],S[1],S[2],S[3],S[4],S[5]),u.fill(),u.restore()}_&&(u.save(),C&&u.transform(w[0],w[1],w[2],w[3],w[4],w[5]),_.render(u),u.restore())}},_renderBackground:function(u){this._renderBackgroundOrOverlay(u,"background")},_renderOverlay:function(u){this._renderBackgroundOrOverlay(u,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new e.Point(this.width/2,this.height/2)},centerObjectH:function(u){return this._centerObject(u,new e.Point(this.getCenterPoint().x,u.getCenterPoint().y))},centerObjectV:function(u){return this._centerObject(u,new e.Point(u.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(u){var m=this.getCenterPoint();return this._centerObject(u,m)},viewportCenterObject:function(u){var m=this.getVpCenter();return this._centerObject(u,m)},viewportCenterObjectH:function(u){var m=this.getVpCenter();return this._centerObject(u,new e.Point(m.x,u.getCenterPoint().y)),this},viewportCenterObjectV:function(u){var m=this.getVpCenter();return this._centerObject(u,new e.Point(u.getCenterPoint().x,m.y))},getVpCenter:function(){var u=this.getCenterPoint(),m=l(this.viewportTransform);return o(u,m)},_centerObject:function(u,m){return u.setPositionByOrigin(m,"center","center"),u.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(u){return this.toDatalessObject(u)},toObject:function(u){return this._toObjectMethod("toObject",u)},toDatalessObject:function(u){return this._toObjectMethod("toDatalessObject",u)},_toObjectMethod:function(u,m){var v=this.clipPath,_={version:e.version,objects:this._toObjects(u,m)};return v&&!v.excludeFromExport&&(_.clipPath=this._toObject(this.clipPath,u,m)),d(_,this.__serializeBgOverlay(u,m)),e.util.populateWithProperties(this,_,m),_},_toObjects:function(u,m){return this._objects.filter(function(v){return!v.excludeFromExport}).map(function(v){return this._toObject(v,u,m)},this)},_toObject:function(u,m,v){var _;this.includeDefaultValues||(_=u.includeDefaultValues,u.includeDefaultValues=!1);var w=u[m](v);return this.includeDefaultValues||(u.includeDefaultValues=_),w},__serializeBgOverlay:function(u,m){var v={},_=this.backgroundImage,w=this.overlayImage,C=this.backgroundColor,S=this.overlayColor;return C&&C.toObject?C.excludeFromExport||(v.background=C.toObject(m)):C&&(v.background=C),S&&S.toObject?S.excludeFromExport||(v.overlay=S.toObject(m)):S&&(v.overlay=S),_&&!_.excludeFromExport&&(v.backgroundImage=this._toObject(_,u,m)),w&&!w.excludeFromExport&&(v.overlayImage=this._toObject(w,u,m)),v},svgViewportTransformation:!0,toSVG:function(u,m){u||(u={}),u.reviver=m;var v=[];return this._setSVGPreamble(v,u),this._setSVGHeader(v,u),this.clipPath&&v.push('<g clip-path="url(#'+this.clipPath.clipPathId+`)" >
`),this._setSVGBgOverlayColor(v,"background"),this._setSVGBgOverlayImage(v,"backgroundImage",m),this._setSVGObjects(v,m),this.clipPath&&v.push(`</g>
`),this._setSVGBgOverlayColor(v,"overlay"),this._setSVGBgOverlayImage(v,"overlayImage",m),v.push("</svg>"),v.join("")},_setSVGPreamble:function(u,m){m.suppressPreamble||u.push('<?xml version="1.0" encoding="',m.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)},_setSVGHeader:function(u,m){var v=m.width||this.width,_=m.height||this.height,w,C='viewBox="0 0 '+this.width+" "+this.height+'" ',S=e.Object.NUM_FRACTION_DIGITS;m.viewBox?C='viewBox="'+m.viewBox.x+" "+m.viewBox.y+" "+m.viewBox.width+" "+m.viewBox.height+'" ':this.svgViewportTransformation&&(w=this.viewportTransform,C='viewBox="'+p(-w[4]/w[0],S)+" "+p(-w[5]/w[3],S)+" "+p(this.width/w[0],S)+" "+p(this.height/w[3],S)+'" '),u.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',v,'" ','height="',_,'" ',C,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",e.version,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(m),`</defs>
`)},createSVGClipPathMarkup:function(u){var m=this.clipPath;return m?(m.clipPathId="CLIPPATH_"+e.Object.__uid++,'<clipPath id="'+m.clipPathId+`" >
`+this.clipPath.toClipPathSVG(u.reviver)+`</clipPath>
`):""},createSVGRefElementsMarkup:function(){var u=this,m=["background","overlay"].map(function(v){var _=u[v+"Color"];if(_&&_.toLive){var w=u[v+"Vpt"],C=u.viewportTransform,S={width:u.width/(w?C[0]:1),height:u.height/(w?C[3]:1)};return _.toSVG(S,{additionalTransform:w?e.util.matrixToSVG(C):""})}});return m.join("")},createSVGFontFacesMarkup:function(){var u="",m={},v,_,w,C,S,x,O,L,F,Y=e.fontPaths,Q=[];for(this._objects.forEach(function q(J){Q.push(J),J._objects&&J._objects.forEach(q)}),L=0,F=Q.length;L<F;L++)if(v=Q[L],_=v.fontFamily,!(v.type.indexOf("text")===-1||m[_]||!Y[_])&&(m[_]=!0,!!v.styles)){w=v.styles;for(S in w){C=w[S];for(O in C)x=C[O],_=x.fontFamily,!m[_]&&Y[_]&&(m[_]=!0)}}for(var te in m)u+=[`		@font-face {
`,"			font-family: '",te,`';
`,"			src: url('",Y[te],`');
`,`		}
`].join("");return u&&(u=['	<style type="text/css">',`<![CDATA[
`,u,"]]>",`</style>
`].join("")),u},_setSVGObjects:function(u,m){var v,_,w,C=this._objects;for(_=0,w=C.length;_<w;_++)v=C[_],!v.excludeFromExport&&this._setSVGObject(u,v,m)},_setSVGObject:function(u,m,v){u.push(m.toSVG(v))},_setSVGBgOverlayImage:function(u,m,v){this[m]&&!this[m].excludeFromExport&&this[m].toSVG&&u.push(this[m].toSVG(v))},_setSVGBgOverlayColor:function(u,m){var v=this[m+"Color"],_=this.viewportTransform,w=this.width,C=this.height;if(v)if(v.toLive){var S=v.repeat,x=e.util.invertTransform(_),O=this[m+"Vpt"],L=O?e.util.matrixToSVG(x):"";u.push('<rect transform="'+L+" translate(",w/2,",",C/2,')"',' x="',v.offsetX-w/2,'" y="',v.offsetY-C/2,'" ','width="',S==="repeat-y"||S==="no-repeat"?v.source.width:w,'" height="',S==="repeat-x"||S==="no-repeat"?v.source.height:C,'" fill="url(#SVGID_'+v.id+')"',`></rect>
`)}else u.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',v,'"',`></rect>
`)},sendToBack:function(u){if(!u)return this;var m=this._activeObject,v,_,w;if(u===m&&u.type==="activeSelection")for(w=m._objects,v=w.length;v--;)_=w[v],h(this._objects,_),this._objects.unshift(_);else h(this._objects,u),this._objects.unshift(u);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(u){if(!u)return this;var m=this._activeObject,v,_,w;if(u===m&&u.type==="activeSelection")for(w=m._objects,v=0;v<w.length;v++)_=w[v],h(this._objects,_),this._objects.push(_);else h(this._objects,u),this._objects.push(u);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(u,m){if(!u)return this;var v=this._activeObject,_,w,C,S,x,O=0;if(u===v&&u.type==="activeSelection")for(x=v._objects,_=0;_<x.length;_++)w=x[_],C=this._objects.indexOf(w),C>0+O&&(S=C-1,h(this._objects,w),this._objects.splice(S,0,w)),O++;else C=this._objects.indexOf(u),C!==0&&(S=this._findNewLowerIndex(u,C,m),h(this._objects,u),this._objects.splice(S,0,u));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(u,m,v){var _,w;if(v)for(_=m,w=m-1;w>=0;--w){var C=u.intersectsWithObject(this._objects[w])||u.isContainedWithinObject(this._objects[w])||this._objects[w].isContainedWithinObject(u);if(C){_=w;break}}else _=m-1;return _},bringForward:function(u,m){if(!u)return this;var v=this._activeObject,_,w,C,S,x,O=0;if(u===v&&u.type==="activeSelection")for(x=v._objects,_=x.length;_--;)w=x[_],C=this._objects.indexOf(w),C<this._objects.length-1-O&&(S=C+1,h(this._objects,w),this._objects.splice(S,0,w)),O++;else C=this._objects.indexOf(u),C!==this._objects.length-1&&(S=this._findNewUpperIndex(u,C,m),h(this._objects,u),this._objects.splice(S,0,u));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(u,m,v){var _,w,C;if(v)for(_=m,w=m+1,C=this._objects.length;w<C;++w){var S=u.intersectsWithObject(this._objects[w])||u.isContainedWithinObject(this._objects[w])||this._objects[w].isContainedWithinObject(u);if(S){_=w;break}}else _=m+1;return _},moveTo:function(u,m){return h(this._objects,u),this._objects.splice(m,0,u),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(e.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(u){u.dispose&&u.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),e.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),e.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),d(e.StaticCanvas.prototype,e.Observable),d(e.StaticCanvas.prototype,e.Collection),d(e.StaticCanvas.prototype,e.DataURLExporter),d(e.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(u){var m=c();if(!m||!m.getContext)return null;var v=m.getContext("2d");if(!v)return null;switch(u){case"setLineDash":return typeof v.setLineDash<"u";default:return null}}}),e.StaticCanvas.prototype.toJSON=e.StaticCanvas.prototype.toObject,e.isLikelyNode&&(e.StaticCanvas.prototype.createPNGStream=function(){var u=a(this.lowerCanvasEl);return u&&u.createPNGStream()},e.StaticCanvas.prototype.createJPEGStream=function(u){var m=a(this.lowerCanvasEl);return m&&m.createJPEGStream(u)})}(),e.BaseBrush=e.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(d){d.strokeStyle=this.color,d.lineWidth=this.width,d.lineCap=this.strokeLineCap,d.miterLimit=this.strokeMiterLimit,d.lineJoin=this.strokeLineJoin,d.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(d){var r=this.canvas.viewportTransform;d.save(),d.transform(r[0],r[1],r[2],r[3],r[4],r[5])},_setShadow:function(){if(this.shadow){var d=this.canvas,r=this.shadow,h=d.contextTop,p=d.getZoom();d&&d._isRetinaScaling()&&(p*=e.devicePixelRatio),h.shadowColor=r.color,h.shadowBlur=r.blur*p,h.shadowOffsetX=r.offsetX*p,h.shadowOffsetY=r.offsetY*p}},needsFullRender:function(){var d=new e.Color(this.color);return d.getAlpha()<1||!!this.shadow},_resetShadow:function(){var d=this.canvas.contextTop;d.shadowColor="",d.shadowBlur=d.shadowOffsetX=d.shadowOffsetY=0},_isOutSideCanvas:function(d){return d.x<0||d.x>this.canvas.getWidth()||d.y<0||d.y>this.canvas.getHeight()}}),function(){e.PencilBrush=e.util.createClass(e.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(d){this.canvas=d,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(d,r,h){var p=r.midPointFrom(h);return d.quadraticCurveTo(r.x,r.y,p.x,p.y),p},onMouseDown:function(d,r){this.canvas._isMainEvent(r.e)&&(this.drawStraightLine=r.e[this.straightLineKey],this._prepareForDrawing(d),this._captureDrawingPath(d),this._render())},onMouseMove:function(d,r){if(this.canvas._isMainEvent(r.e)&&(this.drawStraightLine=r.e[this.straightLineKey],!(this.limitedToCanvasSize===!0&&this._isOutSideCanvas(d))&&this._captureDrawingPath(d)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var h=this._points,p=h.length,o=this.canvas.contextTop;this._saveAndTransform(o),this.oldEnd&&(o.beginPath(),o.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(o,h[p-2],h[p-1],!0),o.stroke(),o.restore()}},onMouseUp:function(d){return this.canvas._isMainEvent(d.e)?(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1):!0},_prepareForDrawing:function(d){var r=new e.Point(d.x,d.y);this._reset(),this._addPoint(r),this.canvas.contextTop.moveTo(r.x,r.y)},_addPoint:function(d){return this._points.length>1&&d.eq(this._points[this._points.length-1])?!1:(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(d),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(d){var r=new e.Point(d.x,d.y);return this._addPoint(r)},_render:function(d){var r,h,p=this._points[0],o=this._points[1];if(d=d||this.canvas.contextTop,this._saveAndTransform(d),d.beginPath(),this._points.length===2&&p.x===o.x&&p.y===o.y){var l=this.width/1e3;p=new e.Point(p.x,p.y),o=new e.Point(o.x,o.y),p.x-=l,o.x+=l}for(d.moveTo(p.x,p.y),r=1,h=this._points.length;r<h;r++)this._drawSegment(d,p,o),p=this._points[r],o=this._points[r+1];d.lineTo(p.x,p.y),d.stroke(),d.restore()},convertPointsToSVGPath:function(d){var r=this.width/1e3;return e.util.getSmoothPathFromPoints(d,r)},_isEmptySVGPath:function(d){var r=e.util.joinPath(d);return r==="M 0 0 Q 0 0 0 0 L 0 0"},createPath:function(d){var r=new e.Path(d,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,r.shadow=new e.Shadow(this.shadow)),r},decimatePoints:function(d,r){if(d.length<=2)return d;var h=this.canvas.getZoom(),p=Math.pow(r/h,2),o,l=d.length-1,a=d[0],c=[a],g;for(o=1;o<l-1;o++)g=Math.pow(a.x-d[o].x,2)+Math.pow(a.y-d[o].y,2),g>=p&&(a=d[o],c.push(a));return c.push(d[l]),c},_finalizeAndAddPath:function(){var d=this.canvas.contextTop;d.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var r=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(r)){this.canvas.requestRenderAll();return}var h=this.createPath(r);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:h}),this.canvas.add(h),this.canvas.requestRenderAll(),h.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:h})}})}(),e.CircleBrush=e.util.createClass(e.BaseBrush,{width:10,initialize:function(d){this.canvas=d,this.points=[]},drawDot:function(d){var r=this.addPoint(d),h=this.canvas.contextTop;this._saveAndTransform(h),this.dot(h,r),h.restore()},dot:function(d,r){d.fillStyle=r.fill,d.beginPath(),d.arc(r.x,r.y,r.radius,0,Math.PI*2,!1),d.closePath(),d.fill()},onMouseDown:function(d){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(d)},_render:function(){var d=this.canvas.contextTop,r,h,p=this.points;for(this._saveAndTransform(d),r=0,h=p.length;r<h;r++)this.dot(d,p[r]);d.restore()},onMouseMove:function(d){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(d)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(d),this._render()):this.drawDot(d))},onMouseUp:function(){var d=this.canvas.renderOnAddRemove,r,h;this.canvas.renderOnAddRemove=!1;var p=[];for(r=0,h=this.points.length;r<h;r++){var o=this.points[r],l=new e.Circle({radius:o.radius,left:o.x,top:o.y,originX:"center",originY:"center",fill:o.fill});this.shadow&&(l.shadow=new e.Shadow(this.shadow)),p.push(l)}var a=new e.Group(p);a.canvas=this.canvas,this.canvas.fire("before:path:created",{path:a}),this.canvas.add(a),this.canvas.fire("path:created",{path:a}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=d,this.canvas.requestRenderAll()},addPoint:function(d){var r=new e.Point(d.x,d.y),h=e.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,p=new e.Color(this.color).setAlpha(e.util.getRandomInt(0,100)/100).toRgba();return r.radius=h,r.fill=p,this.points.push(r),r}}),e.SprayBrush=e.util.createClass(e.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(d){this.canvas=d,this.sprayChunks=[]},onMouseDown:function(d){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(d),this.render(this.sprayChunkPoints)},onMouseMove:function(d){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(d)||(this.addSprayChunk(d),this.render(this.sprayChunkPoints))},onMouseUp:function(){var d=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var r=[],h=0,p=this.sprayChunks.length;h<p;h++)for(var o=this.sprayChunks[h],l=0,a=o.length;l<a;l++){var c=new e.Rect({width:o[l].width,height:o[l].width,left:o[l].x+1,top:o[l].y+1,originX:"center",originY:"center",fill:this.color});r.push(c)}this.optimizeOverlapping&&(r=this._getOptimizedRects(r));var g=new e.Group(r);this.shadow&&g.set("shadow",new e.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:g}),this.canvas.add(g),this.canvas.fire("path:created",{path:g}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=d,this.canvas.requestRenderAll()},_getOptimizedRects:function(d){var r={},h,p,o;for(p=0,o=d.length;p<o;p++)h=d[p].left+""+d[p].top,r[h]||(r[h]=d[p]);var l=[];for(h in r)l.push(r[h]);return l},render:function(d){var r=this.canvas.contextTop,h,p;for(r.fillStyle=this.color,this._saveAndTransform(r),h=0,p=d.length;h<p;h++){var o=d[h];typeof o.opacity<"u"&&(r.globalAlpha=o.opacity),r.fillRect(o.x,o.y,o.width,o.width)}r.restore()},_render:function(){var d=this.canvas.contextTop,r,h;for(d.fillStyle=this.color,this._saveAndTransform(d),r=0,h=this.sprayChunks.length;r<h;r++)this.render(this.sprayChunks[r]);d.restore()},addSprayChunk:function(d){this.sprayChunkPoints=[];var r,h,p,o=this.width/2,l;for(l=0;l<this.density;l++){r=e.util.getRandomInt(d.x-o,d.x+o),h=e.util.getRandomInt(d.y-o,d.y+o),this.dotWidthVariance?p=e.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):p=this.dotWidth;var a=new e.Point(r,h);a.width=p,this.randomOpacity&&(a.opacity=e.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(a)}this.sprayChunks.push(this.sprayChunkPoints)}}),e.PatternBrush=e.util.createClass(e.PencilBrush,{getPatternSrc:function(){var d=20,r=5,h=e.util.createCanvasElement(),p=h.getContext("2d");return h.width=h.height=d+r,p.fillStyle=this.color,p.beginPath(),p.arc(d/2,d/2,d/2,0,Math.PI*2,!1),p.closePath(),p.fill(),h},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(d){return d.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(d){this.callSuper("_setBrushStyles",d),d.strokeStyle=this.getPattern(d)},createPath:function(d){var r=this.callSuper("createPath",d),h=r._getLeftTopCoords().scalarAdd(r.strokeWidth/2);return r.stroke=new e.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-h.x,offsetY:-h.y}),r}}),function(){var d=e.util.getPointer,r=e.util.degreesToRadians,h=e.util.isTouchEvent;e.Canvas=e.util.createClass(e.StaticCanvas,{initialize:function(o,l){l||(l={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(o,l),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=e.PencilBrush&&new e.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var o=this.getActiveObjects(),l,a,c;if(o.length>0&&!this.preserveObjectStacking){a=[],c=[];for(var g=0,u=this._objects.length;g<u;g++)l=this._objects[g],o.indexOf(l)===-1?a.push(l):c.push(l);o.length>1&&(this._activeObject._objects=c),a.push.apply(a,c)}else a=this._objects;return a},renderAll:function(){this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var o=this.contextContainer;return this.renderCanvas(o,this._chooseObjectsToRender()),this},renderTopLayer:function(o){o.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(o),this.contextTopDirty=!0),o.restore()},renderTop:function(){var o=this.contextTop;return this.clearContext(o),this.renderTopLayer(o),this.fire("after:render"),this},_normalizePointer:function(o,l){var a=o.calcTransformMatrix(),c=e.util.invertTransform(a),g=this.restorePointerVpt(l);return e.util.transformPoint(g,c)},isTargetTransparent:function(o,l,a){if(o.shouldCache()&&o._cacheCanvas&&o!==this._activeObject){var c=this._normalizePointer(o,{x:l,y:a}),g=Math.max(o.cacheTranslationX+c.x*o.zoomX,0),u=Math.max(o.cacheTranslationY+c.y*o.zoomY,0),w=e.util.isTransparent(o._cacheContext,Math.round(g),Math.round(u),this.targetFindTolerance);return w}var m=this.contextCache,v=o.selectionBackgroundColor,_=this.viewportTransform;o.selectionBackgroundColor="",this.clearContext(m),m.save(),m.transform(_[0],_[1],_[2],_[3],_[4],_[5]),o.render(m),m.restore(),o.selectionBackgroundColor=v;var w=e.util.isTransparent(m,l,a,this.targetFindTolerance);return w},_isSelectionKeyPressed:function(o){var l=!1;return Array.isArray(this.selectionKey)?l=!!this.selectionKey.find(function(a){return o[a]===!0}):l=o[this.selectionKey],l},_shouldClearSelection:function(o,l){var a=this.getActiveObjects(),c=this._activeObject;return!l||l&&c&&a.length>1&&a.indexOf(l)===-1&&c!==l&&!this._isSelectionKeyPressed(o)||l&&!l.evented||l&&!l.selectable&&c&&c!==l},_shouldCenterTransform:function(o,l,a){if(o){var c;return l==="scale"||l==="scaleX"||l==="scaleY"||l==="resizing"?c=this.centeredScaling||o.centeredScaling:l==="rotate"&&(c=this.centeredRotation||o.centeredRotation),c?!a:a}},_getOriginFromCorner:function(o,l){var a={x:o.originX,y:o.originY};return l==="ml"||l==="tl"||l==="bl"?a.x="right":(l==="mr"||l==="tr"||l==="br")&&(a.x="left"),l==="tl"||l==="mt"||l==="tr"?a.y="bottom":(l==="bl"||l==="mb"||l==="br")&&(a.y="top"),a},_getActionFromCorner:function(o,l,a,c){if(!l||!o)return"drag";var g=c.controls[l];return g.getActionName(a,g,c)},_setupCurrentTransform:function(o,l,a){if(l){var c=this.getPointer(o),g=l.__corner,u=l.controls[g],m=a&&g?u.getActionHandler(o,l,u):e.controlsUtils.dragHandler,v=this._getActionFromCorner(a,g,o,l),_=this._getOriginFromCorner(l,g),w=o[this.centeredKey],C={target:l,action:v,actionHandler:m,corner:g,scaleX:l.scaleX,scaleY:l.scaleY,skewX:l.skewX,skewY:l.skewY,offsetX:c.x-l.left,offsetY:c.y-l.top,originX:_.x,originY:_.y,ex:c.x,ey:c.y,lastX:c.x,lastY:c.y,theta:r(l.angle),width:l.width*l.scaleX,shiftKey:o.shiftKey,altKey:w,original:e.util.saveObjectTransform(l)};this._shouldCenterTransform(l,v,w)&&(C.originX="center",C.originY="center"),C.original.originX=_.x,C.original.originY=_.y,this._currentTransform=C,this._beforeTransform(o)}},setCursor:function(o){this.upperCanvasEl.style.cursor=o},_drawSelection:function(o){var l=this._groupSelector,a=new e.Point(l.ex,l.ey),c=e.util.transformPoint(a,this.viewportTransform),g=new e.Point(l.ex+l.left,l.ey+l.top),u=e.util.transformPoint(g,this.viewportTransform),m=Math.min(c.x,u.x),v=Math.min(c.y,u.y),_=Math.max(c.x,u.x),w=Math.max(c.y,u.y),C=this.selectionLineWidth/2;this.selectionColor&&(o.fillStyle=this.selectionColor,o.fillRect(m,v,_-m,w-v)),!(!this.selectionLineWidth||!this.selectionBorderColor)&&(o.lineWidth=this.selectionLineWidth,o.strokeStyle=this.selectionBorderColor,m+=C,v+=C,_-=C,w-=C,e.Object.prototype._setLineDash.call(this,o,this.selectionDashArray),o.strokeRect(m,v,_-m,w-v))},findTarget:function(o,l){if(!this.skipTargetFind){var a=!0,c=this.getPointer(o,a),g=this._activeObject,u=this.getActiveObjects(),m,v,_=h(o),w=u.length>1&&!l||u.length===1;if(this.targets=[],w&&g._findTargetCorner(c,_)||u.length>1&&!l&&g===this._searchPossibleTargets([g],c))return g;if(u.length===1&&g===this._searchPossibleTargets([g],c))if(this.preserveObjectStacking)m=g,v=this.targets,this.targets=[];else return g;var C=this._searchPossibleTargets(this._objects,c);return o[this.altSelectionKey]&&C&&m&&C!==m&&(C=m,this.targets=v),C}},_checkTarget:function(o,l,a){if(l&&l.visible&&l.evented&&l.containsPoint(o))if((this.perPixelTargetFind||l.perPixelTargetFind)&&!l.isEditing){var c=this.isTargetTransparent(l,a.x,a.y);if(!c)return!0}else return!0},_searchPossibleTargets:function(o,l){for(var a,c=o.length,g;c--;){var u=o[c],m=u.group?this._normalizePointer(u.group,l):l;if(this._checkTarget(m,u,l)){a=o[c],a.subTargetCheck&&a instanceof e.Group&&(g=this._searchPossibleTargets(a._objects,l),g&&this.targets.push(g));break}}return a},restorePointerVpt:function(o){return e.util.transformPoint(o,e.util.invertTransform(this.viewportTransform))},getPointer:function(o,l){if(this._absolutePointer&&!l)return this._absolutePointer;if(this._pointer&&l)return this._pointer;var a=d(o),c=this.upperCanvasEl,g=c.getBoundingClientRect(),u=g.width||0,m=g.height||0,v;(!u||!m)&&("top"in g&&"bottom"in g&&(m=Math.abs(g.top-g.bottom)),"right"in g&&"left"in g&&(u=Math.abs(g.right-g.left))),this.calcOffset(),a.x=a.x-this._offset.left,a.y=a.y-this._offset.top,l||(a=this.restorePointerVpt(a));var _=this.getRetinaScaling();return _!==1&&(a.x/=_,a.y/=_),u===0||m===0?v={width:1,height:1}:v={width:c.width/u,height:c.height/m},{x:a.x*v.width,y:a.y*v.height}},_createUpperCanvas:function(){var o=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),l=this.lowerCanvasEl,a=this.upperCanvasEl;a?a.className="":(a=this._createCanvasElement(),this.upperCanvasEl=a),e.util.addClass(a,"upper-canvas "+o),this.wrapperEl.appendChild(a),this._copyCanvasStyle(l,a),this._applyCanvasStyle(a),this.contextTop=a.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=e.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),e.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),e.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(o){var l=this.width||o.width,a=this.height||o.height;e.util.setStyle(o,{position:"absolute",width:l+"px",height:a+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),o.width=l,o.height=a,e.util.makeElementUnselectable(o)},_copyCanvasStyle:function(o,l){l.style.cssText=o.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var o=this._activeObject;return o?o.type==="activeSelection"&&o._objects?o._objects.slice(0):[o]:[]},_onObjectRemoved:function(o){o===this._activeObject&&(this.fire("before:selection:cleared",{target:o}),this._discardActiveObject(),this.fire("selection:cleared",{target:o}),o.fire("deselected")),o===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",o)},_fireSelectionEvents:function(o,l){var a=!1,c=this.getActiveObjects(),g=[],u=[];o.forEach(function(m){c.indexOf(m)===-1&&(a=!0,m.fire("deselected",{e:l,target:m}),u.push(m))}),c.forEach(function(m){o.indexOf(m)===-1&&(a=!0,m.fire("selected",{e:l,target:m}),g.push(m))}),o.length>0&&c.length>0?a&&this.fire("selection:updated",{e:l,selected:g,deselected:u}):c.length>0?this.fire("selection:created",{e:l,selected:g}):o.length>0&&this.fire("selection:cleared",{e:l,deselected:u})},setActiveObject:function(o,l){var a=this.getActiveObjects();return this._setActiveObject(o,l),this._fireSelectionEvents(a,l),this},_setActiveObject:function(o,l){return this._activeObject===o||!this._discardActiveObject(l,o)||o.onSelect({e:l})?!1:(this._activeObject=o,!0)},_discardActiveObject:function(o,l){var a=this._activeObject;if(a){if(a.onDeselect({e:o,object:l}))return!1;this._activeObject=null}return!0},discardActiveObject:function(o){var l=this.getActiveObjects(),a=this.getActiveObject();return l.length&&this.fire("before:selection:cleared",{target:a,e:o}),this._discardActiveObject(o),this._fireSelectionEvents(l,o),this},dispose:function(){var o=this.wrapperEl;return this.removeListeners(),o.removeChild(this.upperCanvasEl),o.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(l){e.util.cleanUpJsdomNode(this[l]),this[l]=void 0}).bind(this)),o.parentNode&&o.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,e.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(o){var l=this._activeObject;l&&l._renderControls(o)},_toObject:function(o,l,a){var c=this._realizeGroupTransformOnObject(o),g=this.callSuper("_toObject",o,l,a);return this._unwindGroupTransformOnObject(o,c),g},_realizeGroupTransformOnObject:function(o){if(o.group&&o.group.type==="activeSelection"&&this._activeObject===o.group){var l=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],a={};return l.forEach(function(c){a[c]=o[c]}),e.util.addTransformToObject(o,this._activeObject.calcOwnMatrix()),a}else return null},_unwindGroupTransformOnObject:function(o,l){l&&o.set(l)},_setSVGObject:function(o,l,a){var c=this._realizeGroupTransformOnObject(l);this.callSuper("_setSVGObject",o,l,a),this._unwindGroupTransformOnObject(l,c)},setViewportTransform:function(o){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),e.StaticCanvas.prototype.setViewportTransform.call(this,o)}});for(var p in e.StaticCanvas)p!=="prototype"&&(e.Canvas[p]=e.StaticCanvas[p])}(),function(){var d=e.util.addListener,r=e.util.removeListener,h=3,p=2,o=1,l={passive:!1};function a(c,g){return c.button&&c.button===g-1}e.util.object.extend(e.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(d,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(c,g){var u=this.upperCanvasEl,m=this._getEventPrefix();c(e.window,"resize",this._onResize),c(u,m+"down",this._onMouseDown),c(u,m+"move",this._onMouseMove,l),c(u,m+"out",this._onMouseOut),c(u,m+"enter",this._onMouseEnter),c(u,"wheel",this._onMouseWheel),c(u,"contextmenu",this._onContextMenu),c(u,"dblclick",this._onDoubleClick),c(u,"dragover",this._onDragOver),c(u,"dragenter",this._onDragEnter),c(u,"dragleave",this._onDragLeave),c(u,"drop",this._onDrop),this.enablePointerEvents||c(u,"touchstart",this._onTouchStart,l),typeof eventjs<"u"&&g in eventjs&&(eventjs[g](u,"gesture",this._onGesture),eventjs[g](u,"drag",this._onDrag),eventjs[g](u,"orientation",this._onOrientationChange),eventjs[g](u,"shake",this._onShake),eventjs[g](u,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(r,"remove");var c=this._getEventPrefix();r(e.document,c+"up",this._onMouseUp),r(e.document,"touchend",this._onTouchEnd,l),r(e.document,c+"move",this._onMouseMove,l),r(e.document,"touchmove",this._onMouseMove,l)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(c,g){this.__onTransformGesture&&this.__onTransformGesture(c,g)},_onDrag:function(c,g){this.__onDrag&&this.__onDrag(c,g)},_onMouseWheel:function(c){this.__onMouseWheel(c)},_onMouseOut:function(c){var g=this._hoveredTarget;this.fire("mouse:out",{target:g,e:c}),this._hoveredTarget=null,g&&g.fire("mouseout",{e:c});var u=this;this._hoveredTargets.forEach(function(m){u.fire("mouse:out",{target:g,e:c}),m&&g.fire("mouseout",{e:c})}),this._hoveredTargets=[]},_onMouseEnter:function(c){!this._currentTransform&&!this.findTarget(c)&&(this.fire("mouse:over",{target:null,e:c}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(c,g){this.__onOrientationChange&&this.__onOrientationChange(c,g)},_onShake:function(c,g){this.__onShake&&this.__onShake(c,g)},_onLongPress:function(c,g){this.__onLongPress&&this.__onLongPress(c,g)},_onDragOver:function(c){c.preventDefault();var g=this._simpleEventHandler("dragover",c);this._fireEnterLeaveEvents(g,c)},_onDrop:function(c){return this._simpleEventHandler("drop:before",c),this._simpleEventHandler("drop",c)},_onContextMenu:function(c){return this.stopContextMenu&&(c.stopPropagation(),c.preventDefault()),!1},_onDoubleClick:function(c){this._cacheTransformEventData(c),this._handleEvent(c,"dblclick"),this._resetTransformEventData(c)},getPointerId:function(c){var g=c.changedTouches;return g?g[0]&&g[0].identifier:this.enablePointerEvents?c.pointerId:-1},_isMainEvent:function(c){return c.isPrimary===!0?!0:c.isPrimary===!1?!1:c.type==="touchend"&&c.touches.length===0?!0:c.changedTouches?c.changedTouches[0].identifier===this.mainTouchId:!0},_onTouchStart:function(c){c.preventDefault(),this.mainTouchId===null&&(this.mainTouchId=this.getPointerId(c)),this.__onMouseDown(c),this._resetTransformEventData();var g=this.upperCanvasEl,u=this._getEventPrefix();d(e.document,"touchend",this._onTouchEnd,l),d(e.document,"touchmove",this._onMouseMove,l),r(g,u+"down",this._onMouseDown)},_onMouseDown:function(c){this.__onMouseDown(c),this._resetTransformEventData();var g=this.upperCanvasEl,u=this._getEventPrefix();r(g,u+"move",this._onMouseMove,l),d(e.document,u+"up",this._onMouseUp),d(e.document,u+"move",this._onMouseMove,l)},_onTouchEnd:function(c){if(!(c.touches.length>0)){this.__onMouseUp(c),this._resetTransformEventData(),this.mainTouchId=null;var g=this._getEventPrefix();r(e.document,"touchend",this._onTouchEnd,l),r(e.document,"touchmove",this._onMouseMove,l);var u=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){d(u.upperCanvasEl,g+"down",u._onMouseDown),u._willAddMouseDown=0},400)}},_onMouseUp:function(c){this.__onMouseUp(c),this._resetTransformEventData();var g=this.upperCanvasEl,u=this._getEventPrefix();this._isMainEvent(c)&&(r(e.document,u+"up",this._onMouseUp),r(e.document,u+"move",this._onMouseMove,l),d(g,u+"move",this._onMouseMove,l))},_onMouseMove:function(c){!this.allowTouchScrolling&&c.preventDefault&&c.preventDefault(),this.__onMouseMove(c)},_onResize:function(){this.calcOffset()},_shouldRender:function(c){var g=this._activeObject;return!!g!=!!c||g&&c&&g!==c?!0:(g&&g.isEditing,!1)},__onMouseUp:function(c){var g,u=this._currentTransform,m=this._groupSelector,v=!1,_=!m||m.left===0&&m.top===0;if(this._cacheTransformEventData(c),g=this._target,this._handleEvent(c,"up:before"),a(c,h)){this.fireRightClick&&this._handleEvent(c,"up",h,_);return}if(a(c,p)){this.fireMiddleClick&&this._handleEvent(c,"up",p,_),this._resetTransformEventData();return}if(this.isDrawingMode&&this._isCurrentlyDrawing){this._onMouseUpInDrawingMode(c);return}if(this._isMainEvent(c)){if(u&&(this._finalizeCurrentTransform(c),v=u.actionPerformed),!_){var w=g===this._activeObject;this._maybeGroupObjects(c),v||(v=this._shouldRender(g)||!w&&g===this._activeObject)}var C,S;if(g){if(C=g._findTargetCorner(this.getPointer(c,!0),e.util.isTouchEvent(c)),g.selectable&&g!==this._activeObject&&g.activeOn==="up")this.setActiveObject(g,c),v=!0;else{var x=g.controls[C],O=x&&x.getMouseUpHandler(c,g,x);O&&(S=this.getPointer(c),O(c,u,S.x,S.y))}g.isMoving=!1}if(u&&(u.target!==g||u.corner!==C)){var L=u.target&&u.target.controls[u.corner],F=L&&L.getMouseUpHandler(c,g,x);S=S||this.getPointer(c),F&&F(c,u,S.x,S.y)}this._setCursorFromEvent(c,g),this._handleEvent(c,"up",o,_),this._groupSelector=null,this._currentTransform=null,g&&(g.__corner=0),v?this.requestRenderAll():_||this.renderTop()}},_simpleEventHandler:function(c,g){var u=this.findTarget(g),m=this.targets,v={e:g,target:u,subTargets:m};if(this.fire(c,v),u&&u.fire(c,v),!m)return u;for(var _=0;_<m.length;_++)m[_].fire(c,v);return u},_handleEvent:function(c,g,u,m){var v=this._target,_=this.targets||[],w={e:c,target:v,subTargets:_,button:u||o,isClick:m||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};g==="up"&&(w.currentTarget=this.findTarget(c),w.currentSubTargets=this.targets),this.fire("mouse:"+g,w),v&&v.fire("mouse"+g,w);for(var C=0;C<_.length;C++)_[C].fire("mouse"+g,w)},_finalizeCurrentTransform:function(c){var g=this._currentTransform,u=g.target,m={e:c,target:u,transform:g,action:g.action};u._scaling&&(u._scaling=!1),u.setCoords(),(g.actionPerformed||this.stateful&&u.hasStateChanged())&&this._fire("modified",m)},_onMouseDownInDrawingMode:function(c){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(c).requestRenderAll();var g=this.getPointer(c);this.freeDrawingBrush.onMouseDown(g,{e:c,pointer:g}),this._handleEvent(c,"down")},_onMouseMoveInDrawingMode:function(c){if(this._isCurrentlyDrawing){var g=this.getPointer(c);this.freeDrawingBrush.onMouseMove(g,{e:c,pointer:g})}this.setCursor(this.freeDrawingCursor),this._handleEvent(c,"move")},_onMouseUpInDrawingMode:function(c){var g=this.getPointer(c);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:c,pointer:g}),this._handleEvent(c,"up")},__onMouseDown:function(c){this._cacheTransformEventData(c),this._handleEvent(c,"down:before");var g=this._target;if(a(c,h)){this.fireRightClick&&this._handleEvent(c,"down",h);return}if(a(c,p)){this.fireMiddleClick&&this._handleEvent(c,"down",p);return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(c);return}if(this._isMainEvent(c)&&!this._currentTransform){var u=this._pointer;this._previousPointer=u;var m=this._shouldRender(g),v=this._shouldGroup(c,g);if(this._shouldClearSelection(c,g)?this.discardActiveObject(c):v&&(this._handleGrouping(c,g),g=this._activeObject),this.selection&&(!g||!g.selectable&&!g.isEditing&&g!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),g){var _=g===this._activeObject;g.selectable&&g.activeOn==="down"&&this.setActiveObject(g,c);var w=g._findTargetCorner(this.getPointer(c,!0),e.util.isTouchEvent(c));if(g.__corner=w,g===this._activeObject&&(w||!v)){this._setupCurrentTransform(c,g,_);var C=g.controls[w],u=this.getPointer(c),S=C&&C.getMouseDownHandler(c,g,C);S&&S(c,this._currentTransform,u.x,u.y)}}this._handleEvent(c,"down"),(m||v)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(c){this._resetTransformEventData(),this._pointer=this.getPointer(c,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(c)||null},_beforeTransform:function(c){var g=this._currentTransform;this.stateful&&g.target.saveState(),this.fire("before:transform",{e:c,transform:g})},__onMouseMove:function(c){this._handleEvent(c,"move:before"),this._cacheTransformEventData(c);var g,u;if(this.isDrawingMode){this._onMouseMoveInDrawingMode(c);return}if(this._isMainEvent(c)){var m=this._groupSelector;m?(u=this._absolutePointer,m.left=u.x-m.ex,m.top=u.y-m.ey,this.renderTop()):this._currentTransform?this._transformObject(c):(g=this.findTarget(c)||null,this._setCursorFromEvent(c,g),this._fireOverOutEvents(g,c)),this._handleEvent(c,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(c,g){var u=this._hoveredTarget,m=this._hoveredTargets,v=this.targets,_=Math.max(m.length,v.length);this.fireSyntheticInOutEvents(c,g,{oldTarget:u,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var w=0;w<_;w++)this.fireSyntheticInOutEvents(v[w],g,{oldTarget:m[w],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=c,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(c,g){var u=this._draggedoverTarget,m=this._hoveredTargets,v=this.targets,_=Math.max(m.length,v.length);this.fireSyntheticInOutEvents(c,g,{oldTarget:u,evtOut:"dragleave",evtIn:"dragenter"});for(var w=0;w<_;w++)this.fireSyntheticInOutEvents(v[w],g,{oldTarget:m[w],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=c},fireSyntheticInOutEvents:function(c,g,u){var m,v,_=u.oldTarget,w,C,S=_!==c,x=u.canvasEvtIn,O=u.canvasEvtOut;S&&(m={e:g,target:c,previousTarget:_},v={e:g,target:_,nextTarget:c}),C=c&&S,w=_&&S,w&&(O&&this.fire(O,v),_.fire(u.evtOut,v)),C&&(x&&this.fire(x,m),c.fire(u.evtIn,m))},__onMouseWheel:function(c){this._cacheTransformEventData(c),this._handleEvent(c,"wheel"),this._resetTransformEventData()},_transformObject:function(c){var g=this.getPointer(c),u=this._currentTransform;u.reset=!1,u.shiftKey=c.shiftKey,u.altKey=c[this.centeredKey],this._performTransformAction(c,u,g),u.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(c,g,u){var m=u.x,v=u.y,_=g.action,w=!1,C=g.actionHandler;C&&(w=C(c,g,m,v)),_==="drag"&&w&&(g.target.isMoving=!0,this.setCursor(g.target.moveCursor||this.moveCursor)),g.actionPerformed=g.actionPerformed||w},_fire:e.controlsUtils.fireEvent,_setCursorFromEvent:function(c,g){if(!g)return this.setCursor(this.defaultCursor),!1;var u=g.hoverCursor||this.hoverCursor,m=this._activeObject&&this._activeObject.type==="activeSelection"?this._activeObject:null,v=(!m||!m.contains(g))&&g._findTargetCorner(this.getPointer(c,!0));v?this.setCursor(this.getCornerCursor(v,g,c)):(g.subTargetCheck&&this.targets.concat().reverse().map(function(_){u=_.hoverCursor||u}),this.setCursor(u))},getCornerCursor:function(c,g,u){var m=g.controls[c];return m.cursorStyleHandler(u,m,g)}})}(),function(){var d=Math.min,r=Math.max;e.util.object.extend(e.Canvas.prototype,{_shouldGroup:function(h,p){var o=this._activeObject;return o&&this._isSelectionKeyPressed(h)&&p&&p.selectable&&this.selection&&(o!==p||o.type==="activeSelection")&&!p.onSelect({e:h})},_handleGrouping:function(h,p){var o=this._activeObject;o.__corner||p===o&&(p=this.findTarget(h,!0),!p||!p.selectable)||(o&&o.type==="activeSelection"?this._updateActiveSelection(p,h):this._createActiveSelection(p,h))},_updateActiveSelection:function(h,p){var o=this._activeObject,l=o._objects.slice(0);o.contains(h)?(o.removeWithUpdate(h),this._hoveredTarget=h,this._hoveredTargets=this.targets.concat(),o.size()===1&&this._setActiveObject(o.item(0),p)):(o.addWithUpdate(h),this._hoveredTarget=o,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(l,p)},_createActiveSelection:function(h,p){var o=this.getActiveObjects(),l=this._createGroup(h);this._hoveredTarget=l,this._setActiveObject(l,p),this._fireSelectionEvents(o,p)},_createGroup:function(h){var p=this._objects,o=p.indexOf(this._activeObject)<p.indexOf(h),l=o?[this._activeObject,h]:[h,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new e.ActiveSelection(l,{canvas:this})},_groupSelectedObjects:function(h){var p=this._collectObjects(h),o;p.length===1?this.setActiveObject(p[0],h):p.length>1&&(o=new e.ActiveSelection(p.reverse(),{canvas:this}),this.setActiveObject(o,h))},_collectObjects:function(h){for(var p=[],o,l=this._groupSelector.ex,a=this._groupSelector.ey,c=l+this._groupSelector.left,g=a+this._groupSelector.top,u=new e.Point(d(l,c),d(a,g)),m=new e.Point(r(l,c),r(a,g)),v=!this.selectionFullyContained,_=l===c&&a===g,w=this._objects.length;w--&&(o=this._objects[w],!(!(!o||!o.selectable||!o.visible)&&(v&&o.intersectsWithRect(u,m,!0)||o.isContainedWithinRect(u,m,!0)||v&&o.containsPoint(u,null,!0)||v&&o.containsPoint(m,null,!0))&&(p.push(o),_))););return p.length>1&&(p=p.filter(function(C){return!C.onSelect({e:h})})),p},_maybeGroupObjects:function(h){this.selection&&this._groupSelector&&this._groupSelectedObjects(h),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){e.util.object.extend(e.StaticCanvas.prototype,{toDataURL:function(d){d||(d={});var r=d.format||"png",h=d.quality||1,p=(d.multiplier||1)*(d.enableRetinaScaling?this.getRetinaScaling():1),o=this.toCanvasElement(p,d);return e.util.toDataURL(o,r,h)},toCanvasElement:function(d,r){d=d||1,r=r||{};var h=(r.width||this.width)*d,p=(r.height||this.height)*d,o=this.getZoom(),l=this.width,a=this.height,c=o*d,g=this.viewportTransform,u=(g[4]-(r.left||0))*d,m=(g[5]-(r.top||0))*d,v=this.interactive,_=[c,0,0,c,u,m],w=this.enableRetinaScaling,C=e.util.createCanvasElement(),S=this.contextTop;return C.width=h,C.height=p,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=_,this.width=h,this.height=p,this.calcViewportBoundaries(),this.renderCanvas(C.getContext("2d"),this._objects),this.viewportTransform=g,this.width=l,this.height=a,this.calcViewportBoundaries(),this.interactive=v,this.enableRetinaScaling=w,this.contextTop=S,C}})}(),e.util.object.extend(e.StaticCanvas.prototype,{loadFromJSON:function(d,r,h){if(d){var p=typeof d=="string"?JSON.parse(d):e.util.object.clone(d),o=this,l=p.clipPath,a=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete p.clipPath,this._enlivenObjects(p.objects,function(c){o.clear(),o._setBgOverlay(p,function(){l?o._enlivenObjects([l],function(g){o.clipPath=g[0],o.__setupCanvas.call(o,p,c,a,r)}):o.__setupCanvas.call(o,p,c,a,r)})},h),this}},__setupCanvas:function(d,r,h,p){var o=this;r.forEach(function(l,a){o.insertAt(l,a)}),this.renderOnAddRemove=h,delete d.objects,delete d.backgroundImage,delete d.overlayImage,delete d.background,delete d.overlay,this._setOptions(d),this.renderAll(),p&&p()},_setBgOverlay:function(d,r){var h={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!d.backgroundImage&&!d.overlayImage&&!d.background&&!d.overlay){r&&r();return}var p=function(){h.backgroundImage&&h.overlayImage&&h.backgroundColor&&h.overlayColor&&r&&r()};this.__setBgOverlay("backgroundImage",d.backgroundImage,h,p),this.__setBgOverlay("overlayImage",d.overlayImage,h,p),this.__setBgOverlay("backgroundColor",d.background,h,p),this.__setBgOverlay("overlayColor",d.overlay,h,p)},__setBgOverlay:function(d,r,h,p){var o=this;if(!r){h[d]=!0,p&&p();return}d==="backgroundImage"||d==="overlayImage"?e.util.enlivenObjects([r],function(l){o[d]=l[0],h[d]=!0,p&&p()}):this["set"+e.util.string.capitalize(d,!0)](r,function(){h[d]=!0,p&&p()})},_enlivenObjects:function(d,r,h){if(!d||d.length===0){r&&r([]);return}e.util.enlivenObjects(d,function(p){r&&r(p)},null,h)},_toDataURL:function(d,r){this.clone(function(h){r(h.toDataURL(d))})},_toDataURLWithMultiplier:function(d,r,h){this.clone(function(p){h(p.toDataURLWithMultiplier(d,r))})},clone:function(d,r){var h=JSON.stringify(this.toJSON(r));this.cloneWithoutData(function(p){p.loadFromJSON(h,function(){d&&d(p)})})},cloneWithoutData:function(d){var r=e.util.createCanvasElement();r.width=this.width,r.height=this.height;var h=new e.Canvas(r);this.backgroundImage?(h.setBackgroundImage(this.backgroundImage.src,function(){h.renderAll(),d&&d(h)}),h.backgroundImageOpacity=this.backgroundImageOpacity,h.backgroundImageStretch=this.backgroundImageStretch):d&&d(h)}}),function(d){var r=d.fabric||(d.fabric={}),h=r.util.object.extend,p=r.util.object.clone,o=r.util.toFixed,l=r.util.string.capitalize,a=r.util.degreesToRadians,c=!r.isLikelyNode,g=2;r.Object||(r.Object=r.util.createClass(r.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:c,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(u){u&&this.setOptions(u)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=r.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(u){var m=r.perfLimitSizeTotal,v=u.width,_=u.height,w=r.maxCacheSideLimit,C=r.minCacheSideLimit;if(v<=w&&_<=w&&v*_<=m)return v<C&&(u.width=C),_<C&&(u.height=C),u;var S=v/_,x=r.util.limitDimsByArea(S,m),O=r.util.capValue,L=O(C,x.x,w),F=O(C,x.y,w);return v>L&&(u.zoomX/=v/L,u.width=L,u.capped=!0),_>F&&(u.zoomY/=_/F,u.height=F,u.capped=!0),u},_getCacheCanvasDimensions:function(){var u=this.getTotalObjectScaling(),m=this._getTransformedDimensions(0,0),v=m.x*u.scaleX/this.scaleX,_=m.y*u.scaleY/this.scaleY;return{width:v+g,height:_+g,zoomX:u.scaleX,zoomY:u.scaleY,x:v,y:_}},_updateCacheCanvas:function(){var u=this.canvas;if(this.noScaleCache&&u&&u._currentTransform){var m=u._currentTransform.target,v=u._currentTransform.action;if(this===m&&v.slice&&v.slice(0,5)==="scale")return!1}var _=this._cacheCanvas,w=this._limitCacheSize(this._getCacheCanvasDimensions()),C=r.minCacheSideLimit,S=w.width,x=w.height,O,L,F=w.zoomX,Y=w.zoomY,Q=S!==this.cacheWidth||x!==this.cacheHeight,te=this.zoomX!==F||this.zoomY!==Y,q=Q||te,J=0,ie=0,se=!1;if(Q){var U=this._cacheCanvas.width,T=this._cacheCanvas.height,k=S>U||x>T,A=(S<U*.9||x<T*.9)&&U>C&&T>C;se=k||A,k&&!w.capped&&(S>C||x>C)&&(J=S*.1,ie=x*.1)}return this instanceof r.Text&&this.path&&(q=!0,se=!0,J+=this.getHeightOfLine(0)*this.zoomX,ie+=this.getHeightOfLine(0)*this.zoomY),q?(se?(_.width=Math.ceil(S+J),_.height=Math.ceil(x+ie)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,_.width,_.height)),O=w.x/2,L=w.y/2,this.cacheTranslationX=Math.round(_.width/2-O)+O,this.cacheTranslationY=Math.round(_.height/2-L)+L,this.cacheWidth=S,this.cacheHeight=x,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(F,Y),this.zoomX=F,this.zoomY=Y,!0):!1},setOptions:function(u){this._setOptions(u),this._initGradient(u.fill,"fill"),this._initGradient(u.stroke,"stroke"),this._initPattern(u.fill,"fill"),this._initPattern(u.stroke,"stroke")},transform:function(u){var m=this.group&&!this.group._transformDone||this.group&&this.canvas&&u===this.canvas.contextTop,v=this.calcTransformMatrix(!m);u.transform(v[0],v[1],v[2],v[3],v[4],v[5])},toObject:function(u){var m=r.Object.NUM_FRACTION_DIGITS,v={type:this.type,version:r.version,originX:this.originX,originY:this.originY,left:o(this.left,m),top:o(this.top,m),width:o(this.width,m),height:o(this.height,m),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:o(this.strokeWidth,m),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:o(this.strokeMiterLimit,m),scaleX:o(this.scaleX,m),scaleY:o(this.scaleY,m),angle:o(this.angle,m),flipX:this.flipX,flipY:this.flipY,opacity:o(this.opacity,m),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:o(this.skewX,m),skewY:o(this.skewY,m)};return this.clipPath&&!this.clipPath.excludeFromExport&&(v.clipPath=this.clipPath.toObject(u),v.clipPath.inverted=this.clipPath.inverted,v.clipPath.absolutePositioned=this.clipPath.absolutePositioned),r.util.populateWithProperties(this,v,u),this.includeDefaultValues||(v=this._removeDefaultValues(v)),v},toDatalessObject:function(u){return this.toObject(u)},_removeDefaultValues:function(u){var m=r.util.getKlass(u.type).prototype,v=m.stateProperties;return v.forEach(function(_){_==="left"||_==="top"||(u[_]===m[_]&&delete u[_],Array.isArray(u[_])&&Array.isArray(m[_])&&u[_].length===0&&m[_].length===0&&delete u[_])}),u},toString:function(){return"#<fabric."+l(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var u=r.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(u.scaleX),scaleY:Math.abs(u.scaleY)}},getTotalObjectScaling:function(){var u=this.getObjectScaling(),m=u.scaleX,v=u.scaleY;if(this.canvas){var _=this.canvas.getZoom(),w=this.canvas.getRetinaScaling();m*=_*w,v*=_*w}return{scaleX:m,scaleY:v}},getObjectOpacity:function(){var u=this.opacity;return this.group&&(u*=this.group.getObjectOpacity()),u},_set:function(u,m){var v=u==="scaleX"||u==="scaleY",_=this[u]!==m,w=!1;return v&&(m=this._constrainScale(m)),u==="scaleX"&&m<0?(this.flipX=!this.flipX,m*=-1):u==="scaleY"&&m<0?(this.flipY=!this.flipY,m*=-1):u==="shadow"&&m&&!(m instanceof r.Shadow)?m=new r.Shadow(m):u==="dirty"&&this.group&&this.group.set("dirty",m),this[u]=m,_&&(w=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(u)>-1?(this.dirty=!0,w&&this.group.set("dirty",!0)):w&&this.stateProperties.indexOf(u)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:r.iMatrix.concat()},isNotVisible:function(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible},render:function(u){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(u.save(),this._setupCompositeOperation(u),this.drawSelectionBackground(u),this.transform(u),this._setOpacity(u),this._setShadow(u,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(u)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(u),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),u.restore())},renderCache:function(u){u=u||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,u.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0},hasFill:function(){return this.fill&&this.fill!=="transparent"},needsItsOwnCache:function(){return!!(this.paintFirst==="stroke"&&this.hasFill()&&this.hasStroke()&&typeof this.shadow=="object"||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)},drawClipPathOnCache:function(u,m){if(u.save(),m.inverted?u.globalCompositeOperation="destination-out":u.globalCompositeOperation="destination-in",m.absolutePositioned){var v=r.util.invertTransform(this.calcTransformMatrix());u.transform(v[0],v[1],v[2],v[3],v[4],v[5])}m.transform(u),u.scale(1/m.zoomX,1/m.zoomY),u.drawImage(m._cacheCanvas,-m.cacheTranslationX,-m.cacheTranslationY),u.restore()},drawObject:function(u,m){var v=this.fill,_=this.stroke;m?(this.fill="black",this.stroke="",this._setClippingProperties(u)):this._renderBackground(u),this._render(u),this._drawClipPath(u,this.clipPath),this.fill=v,this.stroke=_},_drawClipPath:function(u,m){m&&(m.canvas=this.canvas,m.shouldCache(),m._transformDone=!0,m.renderCache({forClipping:!0}),this.drawClipPathOnCache(u,m))},drawCacheOnCanvas:function(u){u.scale(1/this.zoomX,1/this.zoomY),u.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(u){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!u&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!u){var m=this.cacheWidth/this.zoomX,v=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-m/2,-v/2,m,v)}return!0}return!1},_renderBackground:function(u){if(this.backgroundColor){var m=this._getNonTransformedDimensions();u.fillStyle=this.backgroundColor,u.fillRect(-m.x/2,-m.y/2,m.x,m.y),this._removeShadow(u)}},_setOpacity:function(u){this.group&&!this.group._transformDone?u.globalAlpha=this.getObjectOpacity():u.globalAlpha*=this.opacity},_setStrokeStyles:function(u,m){var v=m.stroke;v&&(u.lineWidth=m.strokeWidth,u.lineCap=m.strokeLineCap,u.lineDashOffset=m.strokeDashOffset,u.lineJoin=m.strokeLineJoin,u.miterLimit=m.strokeMiterLimit,v.toLive?v.gradientUnits==="percentage"||v.gradientTransform||v.patternTransform?this._applyPatternForTransformedGradient(u,v):(u.strokeStyle=v.toLive(u,this),this._applyPatternGradientTransform(u,v)):u.strokeStyle=m.stroke)},_setFillStyles:function(u,m){var v=m.fill;v&&(v.toLive?(u.fillStyle=v.toLive(u,this),this._applyPatternGradientTransform(u,m.fill)):u.fillStyle=v)},_setClippingProperties:function(u){u.globalAlpha=1,u.strokeStyle="transparent",u.fillStyle="#000000"},_setLineDash:function(u,m){!m||m.length===0||(1&m.length&&m.push.apply(m,m),u.setLineDash(m))},_renderControls:function(u,m){var v=this.getViewportTransform(),_=this.calcTransformMatrix(),w,C,S;m=m||{},C=typeof m.hasBorders<"u"?m.hasBorders:this.hasBorders,S=typeof m.hasControls<"u"?m.hasControls:this.hasControls,_=r.util.multiplyTransformMatrices(v,_),w=r.util.qrDecompose(_),u.save(),u.translate(w.translateX,w.translateY),u.lineWidth=1*this.borderScaleFactor,this.group||(u.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(w.angle-=180),u.rotate(a(this.group?w.angle:this.angle)),m.forActiveSelection||this.group?C&&this.drawBordersInGroup(u,w,m):C&&this.drawBorders(u,m),S&&this.drawControls(u,m),u.restore()},_setShadow:function(u){if(this.shadow){var m=this.shadow,v=this.canvas,_,w=v&&v.viewportTransform[0]||1,C=v&&v.viewportTransform[3]||1;m.nonScaling?_={scaleX:1,scaleY:1}:_=this.getObjectScaling(),v&&v._isRetinaScaling()&&(w*=r.devicePixelRatio,C*=r.devicePixelRatio),u.shadowColor=m.color,u.shadowBlur=m.blur*r.browserShadowBlurConstant*(w+C)*(_.scaleX+_.scaleY)/4,u.shadowOffsetX=m.offsetX*w*_.scaleX,u.shadowOffsetY=m.offsetY*C*_.scaleY}},_removeShadow:function(u){this.shadow&&(u.shadowColor="",u.shadowBlur=u.shadowOffsetX=u.shadowOffsetY=0)},_applyPatternGradientTransform:function(u,m){if(!m||!m.toLive)return{offsetX:0,offsetY:0};var v=m.gradientTransform||m.patternTransform,_=-this.width/2+m.offsetX||0,w=-this.height/2+m.offsetY||0;return m.gradientUnits==="percentage"?u.transform(this.width,0,0,this.height,_,w):u.transform(1,0,0,1,_,w),v&&u.transform(v[0],v[1],v[2],v[3],v[4],v[5]),{offsetX:_,offsetY:w}},_renderPaintInOrder:function(u){this.paintFirst==="stroke"?(this._renderStroke(u),this._renderFill(u)):(this._renderFill(u),this._renderStroke(u))},_render:function(){},_renderFill:function(u){this.fill&&(u.save(),this._setFillStyles(u,this),this.fillRule==="evenodd"?u.fill("evenodd"):u.fill(),u.restore())},_renderStroke:function(u){if(!(!this.stroke||this.strokeWidth===0)){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(u),u.save(),this.strokeUniform&&this.group){var m=this.getObjectScaling();u.scale(1/m.scaleX,1/m.scaleY)}else this.strokeUniform&&u.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(u,this.strokeDashArray),this._setStrokeStyles(u,this),u.stroke(),u.restore()}},_applyPatternForTransformedGradient:function(u,m){var v=this._limitCacheSize(this._getCacheCanvasDimensions()),_=r.util.createCanvasElement(),w,C=this.canvas.getRetinaScaling(),S=v.x/this.scaleX/C,x=v.y/this.scaleY/C;_.width=S,_.height=x,w=_.getContext("2d"),w.beginPath(),w.moveTo(0,0),w.lineTo(S,0),w.lineTo(S,x),w.lineTo(0,x),w.closePath(),w.translate(S/2,x/2),w.scale(v.zoomX/this.scaleX/C,v.zoomY/this.scaleY/C),this._applyPatternGradientTransform(w,m),w.fillStyle=m.toLive(u),w.fill(),u.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),u.scale(C*this.scaleX/v.zoomX,C*this.scaleY/v.zoomY),u.strokeStyle=w.createPattern(_,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var u=r.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",u.scaleX),this.set("scaleY",u.scaleY),this.angle=u.angle,this.skewX=u.skewX,this.skewY=0}},_removeTransformMatrix:function(u){var m=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),m=r.util.transformPoint(m,this.transformMatrix)),this.transformMatrix=null,u&&(this.scaleX*=u.scaleX,this.scaleY*=u.scaleY,this.cropX=u.cropX,this.cropY=u.cropY,m.x+=u.offsetLeft,m.y+=u.offsetTop,this.width=u.width,this.height=u.height),this.setPositionByOrigin(m,"center","center")},clone:function(u,m){var v=this.toObject(m);this.constructor.fromObject?this.constructor.fromObject(v,u):r.Object._fromObject("Object",v,u)},cloneAsImage:function(u,m){var v=this.toCanvasElement(m);return u&&u(new r.Image(v)),this},toCanvasElement:function(u){u||(u={});var m=r.util,v=m.saveObjectTransform(this),_=this.group,w=this.shadow,C=Math.abs,S=(u.multiplier||1)*(u.enableRetinaScaling?r.devicePixelRatio:1);delete this.group,u.withoutTransform&&m.resetObjectTransform(this),u.withoutShadow&&(this.shadow=null);var x=r.util.createCanvasElement(),O=this.getBoundingRect(!0,!0),L=this.shadow,F,Y={x:0,y:0},Q,te,q;L&&(Q=L.blur,L.nonScaling?F={scaleX:1,scaleY:1}:F=this.getObjectScaling(),Y.x=2*Math.round(C(L.offsetX)+Q)*C(F.scaleX),Y.y=2*Math.round(C(L.offsetY)+Q)*C(F.scaleY)),te=O.width+Y.x,q=O.height+Y.y,x.width=Math.ceil(te),x.height=Math.ceil(q);var J=new r.StaticCanvas(x,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});u.format==="jpeg"&&(J.backgroundColor="#fff"),this.setPositionByOrigin(new r.Point(J.width/2,J.height/2),"center","center");var ie=this.canvas;J.add(this);var se=J.toCanvasElement(S||1,u);return this.shadow=w,this.set("canvas",ie),_&&(this.group=_),this.set(v).setCoords(),J._objects=[],J.dispose(),J=null,se},toDataURL:function(u){return u||(u={}),r.util.toDataURL(this.toCanvasElement(u),u.format||"png",u.quality||1)},isType:function(u){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===u},complexity:function(){return 1},toJSON:function(u){return this.toObject(u)},rotate:function(u){var m=(this.originX!=="center"||this.originY!=="center")&&this.centeredRotation;return m&&this._setOriginToCenter(),this.set("angle",u),m&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(u,m){m=m||this.canvas.getPointer(u);var v=new r.Point(m.x,m.y),_=this._getLeftTopCoords();return this.angle&&(v=r.util.rotatePoint(v,_,a(-this.angle))),{x:v.x-_.x,y:v.y-_.y}},_setupCompositeOperation:function(u){this.globalCompositeOperation&&(u.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){r.runningAnimations&&r.runningAnimations.cancelByTarget(this)}}),r.util.createAccessors&&r.util.createAccessors(r.Object),h(r.Object.prototype,r.Observable),r.Object.NUM_FRACTION_DIGITS=2,r.Object.ENLIVEN_PROPS=["clipPath"],r.Object._fromObject=function(u,m,v,_){var w=r[u];m=p(m,!0),r.util.enlivenPatterns([m.fill,m.stroke],function(C){typeof C[0]<"u"&&(m.fill=C[0]),typeof C[1]<"u"&&(m.stroke=C[1]),r.util.enlivenObjectEnlivables(m,m,function(){var S=_?new w(m[_],m):new w(m);v&&v(S)})})},r.Object.__uid=0)}(t),function(){var d=e.util.degreesToRadians,r={left:-.5,center:0,right:.5},h={top:-.5,center:0,bottom:.5};e.util.object.extend(e.Object.prototype,{translateToGivenOrigin:function(p,o,l,a,c){var g=p.x,u=p.y,m,v,_;return typeof o=="string"?o=r[o]:o-=.5,typeof a=="string"?a=r[a]:a-=.5,m=a-o,typeof l=="string"?l=h[l]:l-=.5,typeof c=="string"?c=h[c]:c-=.5,v=c-l,(m||v)&&(_=this._getTransformedDimensions(),g=p.x+m*_.x,u=p.y+v*_.y),new e.Point(g,u)},translateToCenterPoint:function(p,o,l){var a=this.translateToGivenOrigin(p,o,l,"center","center");return this.angle?e.util.rotatePoint(a,p,d(this.angle)):a},translateToOriginPoint:function(p,o,l){var a=this.translateToGivenOrigin(p,"center","center",o,l);return this.angle?e.util.rotatePoint(a,p,d(this.angle)):a},getCenterPoint:function(){var p=new e.Point(this.left,this.top);return this.translateToCenterPoint(p,this.originX,this.originY)},getPointByOrigin:function(p,o){var l=this.getCenterPoint();return this.translateToOriginPoint(l,p,o)},toLocalPoint:function(p,o,l){var a=this.getCenterPoint(),c,g;return typeof o<"u"&&typeof l<"u"?c=this.translateToGivenOrigin(a,"center","center",o,l):c=new e.Point(this.left,this.top),g=new e.Point(p.x,p.y),this.angle&&(g=e.util.rotatePoint(g,a,-d(this.angle))),g.subtractEquals(c)},setPositionByOrigin:function(p,o,l){var a=this.translateToCenterPoint(p,o,l),c=this.translateToOriginPoint(a,this.originX,this.originY);this.set("left",c.x),this.set("top",c.y)},adjustPosition:function(p){var o=d(this.angle),l=this.getScaledWidth(),a=e.util.cos(o)*l,c=e.util.sin(o)*l,g,u;typeof this.originX=="string"?g=r[this.originX]:g=this.originX-.5,typeof p=="string"?u=r[p]:u=p-.5,this.left+=a*(u-g),this.top+=c*(u-g),this.setCoords(),this.originX=p},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var p=this.getCenterPoint();this.originX="center",this.originY="center",this.left=p.x,this.top=p.y},_resetOrigin:function(){var p=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=p.x,this.top=p.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function d(l){return[new e.Point(l.tl.x,l.tl.y),new e.Point(l.tr.x,l.tr.y),new e.Point(l.br.x,l.br.y),new e.Point(l.bl.x,l.bl.y)]}var r=e.util,h=r.degreesToRadians,p=r.multiplyTransformMatrices,o=r.transformPoint;r.object.extend(e.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(l,a){return a?l?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),l?this.aCoords:this.lineCoords)},getCoords:function(l,a){return d(this._getCoords(l,a))},intersectsWithRect:function(l,a,c,g){var u=this.getCoords(c,g),m=e.Intersection.intersectPolygonRectangle(u,l,a);return m.status==="Intersection"},intersectsWithObject:function(l,a,c){var g=e.Intersection.intersectPolygonPolygon(this.getCoords(a,c),l.getCoords(a,c));return g.status==="Intersection"||l.isContainedWithinObject(this,a,c)||this.isContainedWithinObject(l,a,c)},isContainedWithinObject:function(l,a,c){for(var g=this.getCoords(a,c),u=a?l.aCoords:l.lineCoords,m=0,v=l._getImageLines(u);m<4;m++)if(!l.containsPoint(g[m],v))return!1;return!0},isContainedWithinRect:function(l,a,c,g){var u=this.getBoundingRect(c,g);return u.left>=l.x&&u.left+u.width<=a.x&&u.top>=l.y&&u.top+u.height<=a.y},containsPoint:function(l,m,c,g){var u=this._getCoords(c,g),m=m||this._getImageLines(u),v=this._findCrossPoints(l,m);return v!==0&&v%2===1},isOnScreen:function(l){if(!this.canvas)return!1;var a=this.canvas.vptCoords.tl,c=this.canvas.vptCoords.br,g=this.getCoords(!0,l);return g.some(function(u){return u.x<=c.x&&u.x>=a.x&&u.y<=c.y&&u.y>=a.y})||this.intersectsWithRect(a,c,!0,l)?!0:this._containsCenterOfCanvas(a,c,l)},_containsCenterOfCanvas:function(l,a,c){var g={x:(l.x+a.x)/2,y:(l.y+a.y)/2};return!!this.containsPoint(g,null,!0,c)},isPartiallyOnScreen:function(l){if(!this.canvas)return!1;var a=this.canvas.vptCoords.tl,c=this.canvas.vptCoords.br;if(this.intersectsWithRect(a,c,!0,l))return!0;var g=this.getCoords(!0,l).every(function(u){return(u.x>=c.x||u.x<=a.x)&&(u.y>=c.y||u.y<=a.y)});return g&&this._containsCenterOfCanvas(a,c,l)},_getImageLines:function(l){var a={topline:{o:l.tl,d:l.tr},rightline:{o:l.tr,d:l.br},bottomline:{o:l.br,d:l.bl},leftline:{o:l.bl,d:l.tl}};return a},_findCrossPoints:function(l,a){var c,g,u,m,v,_=0,w;for(var C in a)if(w=a[C],!(w.o.y<l.y&&w.d.y<l.y)&&!(w.o.y>=l.y&&w.d.y>=l.y)&&(w.o.x===w.d.x&&w.o.x>=l.x?v=w.o.x:(c=0,g=(w.d.y-w.o.y)/(w.d.x-w.o.x),u=l.y-c*l.x,m=w.o.y-g*w.o.x,v=-(u-m)/(c-g)),v>=l.x&&(_+=1),_===2))break;return _},getBoundingRect:function(l,a){var c=this.getCoords(l,a);return r.makeBoundingBoxFromPoints(c)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(l){return Math.abs(l)<this.minScaleLimit?l<0?-this.minScaleLimit:this.minScaleLimit:l===0?1e-4:l},scale:function(l){return this._set("scaleX",l),this._set("scaleY",l),this.setCoords()},scaleToWidth:function(l,a){var c=this.getBoundingRect(a).width/this.getScaledWidth();return this.scale(l/this.width/c)},scaleToHeight:function(l,a){var c=this.getBoundingRect(a).height/this.getScaledHeight();return this.scale(l/this.height/c)},calcLineCoords:function(){var l=this.getViewportTransform(),a=this.padding,c=h(this.angle),g=r.cos(c),u=r.sin(c),m=g*a,v=u*a,_=m+v,w=m-v,C=this.calcACoords(),S={tl:o(C.tl,l),tr:o(C.tr,l),bl:o(C.bl,l),br:o(C.br,l)};return a&&(S.tl.x-=w,S.tl.y-=_,S.tr.x+=_,S.tr.y-=w,S.bl.x-=_,S.bl.y+=w,S.br.x+=w,S.br.y+=_),S},calcOCoords:function(){var l=this._calcRotateMatrix(),a=this._calcTranslateMatrix(),c=this.getViewportTransform(),g=p(c,a),u=p(g,l),u=p(u,[1/c[0],0,0,1/c[3],0,0]),m=this._calculateCurrentDimensions(),v={};return this.forEachControl(function(_,w,C){v[w]=_.positionHandler(m,u,C)}),v},calcACoords:function(){var l=this._calcRotateMatrix(),a=this._calcTranslateMatrix(),c=p(a,l),g=this._getTransformedDimensions(),u=g.x/2,m=g.y/2;return{tl:o({x:-u,y:-m},c),tr:o({x:u,y:-m},c),bl:o({x:-u,y:m},c),br:o({x:u,y:m},c)}},setCoords:function(l){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),l?this:(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords(),this)},_calcRotateMatrix:function(){return r.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var l=this.getCenterPoint();return[1,0,0,1,l.x,l.y]},transformMatrixKey:function(l){var a="_",c="";return!l&&this.group&&(c=this.group.transformMatrixKey(l)+a),c+this.top+a+this.left+a+this.scaleX+a+this.scaleY+a+this.skewX+a+this.skewY+a+this.angle+a+this.originX+a+this.originY+a+this.width+a+this.height+a+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(l){var a=this.calcOwnMatrix();if(l||!this.group)return a;var c=this.transformMatrixKey(l),g=this.matrixCache||(this.matrixCache={});return g.key===c?g.value:(this.group&&(a=p(this.group.calcTransformMatrix(!1),a)),g.key=c,g.value=a,a)},calcOwnMatrix:function(){var l=this.transformMatrixKey(!0),a=this.ownMatrixCache||(this.ownMatrixCache={});if(a.key===l)return a.value;var c=this._calcTranslateMatrix(),g={angle:this.angle,translateX:c[4],translateY:c[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return a.key=l,a.value=r.composeMatrix(g),a.value},_getNonTransformedDimensions:function(){var l=this.strokeWidth,a=this.width+l,c=this.height+l;return{x:a,y:c}},_getTransformedDimensions:function(l,a){typeof l>"u"&&(l=this.skewX),typeof a>"u"&&(a=this.skewY);var c,g,u,m=l===0&&a===0;if(this.strokeUniform?(g=this.width,u=this.height):(c=this._getNonTransformedDimensions(),g=c.x,u=c.y),m)return this._finalizeDimensions(g*this.scaleX,u*this.scaleY);var v=r.sizeAfterTransform(g,u,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:l,skewY:a});return this._finalizeDimensions(v.x,v.y)},_finalizeDimensions:function(l,a){return this.strokeUniform?{x:l+this.strokeWidth,y:a+this.strokeWidth}:{x:l,y:a}},_calculateCurrentDimensions:function(){var l=this.getViewportTransform(),a=this._getTransformedDimensions(),c=o(a,l,!0);return c.scalarAdd(2*this.padding)}})}(),e.util.object.extend(e.Object.prototype,{sendToBack:function(){return this.group?e.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?e.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(d){return this.group?e.StaticCanvas.prototype.sendBackwards.call(this.group,this,d):this.canvas&&this.canvas.sendBackwards(this,d),this},bringForward:function(d){return this.group?e.StaticCanvas.prototype.bringForward.call(this.group,this,d):this.canvas&&this.canvas.bringForward(this,d),this},moveTo:function(d){return this.group&&this.group.type!=="activeSelection"?e.StaticCanvas.prototype.moveTo.call(this.group,this,d):this.canvas&&this.canvas.moveTo(this,d),this}}),function(){function d(h,p){if(p){if(p.toLive)return h+": url(#SVGID_"+p.id+"); ";var o=new e.Color(p),l=h+": "+o.toRgb()+"; ",a=o.getAlpha();return a!==1&&(l+=h+"-opacity: "+a.toString()+"; "),l}else return h+": none; "}var r=e.util.toFixed;e.util.object.extend(e.Object.prototype,{getSvgStyles:function(h){var p=this.fillRule?this.fillRule:"nonzero",o=this.strokeWidth?this.strokeWidth:"0",l=this.strokeDashArray?this.strokeDashArray.join(" "):"none",a=this.strokeDashOffset?this.strokeDashOffset:"0",c=this.strokeLineCap?this.strokeLineCap:"butt",g=this.strokeLineJoin?this.strokeLineJoin:"miter",u=this.strokeMiterLimit?this.strokeMiterLimit:"4",m=typeof this.opacity<"u"?this.opacity:"1",v=this.visible?"":" visibility: hidden;",_=h?"":this.getSvgFilter(),w=d("fill",this.fill),C=d("stroke",this.stroke);return[C,"stroke-width: ",o,"; ","stroke-dasharray: ",l,"; ","stroke-linecap: ",c,"; ","stroke-dashoffset: ",a,"; ","stroke-linejoin: ",g,"; ","stroke-miterlimit: ",u,"; ",w,"fill-rule: ",p,"; ","opacity: ",m,";",_,v].join("")},getSvgSpanStyles:function(h,p){var o="; ",a=h.fontFamily?"font-family: "+(h.fontFamily.indexOf("'")===-1&&h.fontFamily.indexOf('"')===-1?"'"+h.fontFamily+"'":h.fontFamily)+o:"",l=h.strokeWidth?"stroke-width: "+h.strokeWidth+o:"",a=a,c=h.fontSize?"font-size: "+h.fontSize+"px"+o:"",g=h.fontStyle?"font-style: "+h.fontStyle+o:"",u=h.fontWeight?"font-weight: "+h.fontWeight+o:"",m=h.fill?d("fill",h.fill):"",v=h.stroke?d("stroke",h.stroke):"",_=this.getSvgTextDecoration(h),w=h.deltaY?"baseline-shift: "+-h.deltaY+"; ":"";return _&&(_="text-decoration: "+_+o),[v,l,a,c,g,u,_,m,w,p?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(h){return["overline","underline","line-through"].filter(function(p){return h[p.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(h,p){var o=h?this.calcTransformMatrix():this.calcOwnMatrix(),l='transform="'+e.util.matrixToSVG(o);return l+(p||"")+'" '},_setSVGBg:function(h){if(this.backgroundColor){var p=e.Object.NUM_FRACTION_DIGITS;h.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',r(-this.width/2,p),'" y="',r(-this.height/2,p),'" width="',r(this.width,p),'" height="',r(this.height,p),`"></rect>
`)}},toSVG:function(h){return this._createBaseSVGMarkup(this._toSVG(h),{reviver:h})},toClipPathSVG:function(h){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(h),{reviver:h})},_createBaseClipPathSVGMarkup:function(h,p){p=p||{};var o=p.reviver,l=p.additionalTransform||"",a=[this.getSvgTransform(!0,l),this.getSvgCommons()].join(""),c=h.indexOf("COMMON_PARTS");return h[c]=a,o?o(h.join("")):h.join("")},_createBaseSVGMarkup:function(h,p){p=p||{};var o=p.noStyle,l=p.reviver,a=o?"":'style="'+this.getSvgStyles()+'" ',c=p.withShadow?'style="'+this.getSvgFilter()+'" ':"",g=this.clipPath,u=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",m=g&&g.absolutePositioned,v=this.stroke,_=this.fill,w=this.shadow,C,S=[],x,O=h.indexOf("COMMON_PARTS"),L=p.additionalTransform;return g&&(g.clipPathId="CLIPPATH_"+e.Object.__uid++,x='<clipPath id="'+g.clipPathId+`" >
`+g.toClipPathSVG(l)+`</clipPath>
`),m&&S.push("<g ",c,this.getSvgCommons(),` >
`),S.push("<g ",this.getSvgTransform(!1),m?"":c+this.getSvgCommons(),` >
`),C=[a,u,o?"":this.addPaintOrder()," ",L?'transform="'+L+'" ':""].join(""),h[O]=C,_&&_.toLive&&S.push(_.toSVG(this)),v&&v.toLive&&S.push(v.toSVG(this)),w&&S.push(w.toSVG(this)),g&&S.push(x),S.push(h.join("")),S.push(`</g>
`),m&&S.push(`</g>
`),l?l(S.join("")):S.join("")},addPaintOrder:function(){return this.paintFirst!=="fill"?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var d=e.util.object.extend,r="stateProperties";function h(o,l,a){var c={},g=!0;a.forEach(function(u){c[u]=o[u]}),d(o[l],c,g)}function p(o,l,a){if(o===l)return!0;if(Array.isArray(o)){if(!Array.isArray(l)||o.length!==l.length)return!1;for(var c=0,g=o.length;c<g;c++)if(!p(o[c],l[c]))return!1;return!0}else if(o&&typeof o=="object"){var u=Object.keys(o),m;if(!l||typeof l!="object"||!a&&u.length!==Object.keys(l).length)return!1;for(var c=0,g=u.length;c<g;c++)if(m=u[c],!(m==="canvas"||m==="group")&&!p(o[m],l[m]))return!1;return!0}}e.util.object.extend(e.Object.prototype,{hasStateChanged:function(o){o=o||r;var l="_"+o;return Object.keys(this[l]).length<this[o].length?!0:!p(this[l],this,!0)},saveState:function(o){var l=o&&o.propertySet||r,a="_"+l;return this[a]?(h(this,a,this[l]),o&&o.stateProperties&&h(this,a,o.stateProperties),this):this.setupState(o)},setupState:function(o){o=o||{};var l=o.propertySet||r;return o.propertySet=l,this["_"+l]={},this.saveState(o),this}})}(),function(){var d=e.util.degreesToRadians;e.util.object.extend(e.Object.prototype,{_findTargetCorner:function(r,h){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var p=r.x,o=r.y,l,a,c=Object.keys(this.oCoords),g=c.length-1,u;for(this.__corner=0;g>=0;g--)if(u=c[g],!!this.isControlVisible(u)&&(a=this._getImageLines(h?this.oCoords[u].touchCorner:this.oCoords[u].corner),l=this._findCrossPoints({x:p,y:o},a),l!==0&&l%2===1))return this.__corner=u,u;return!1},forEachControl:function(r){for(var h in this.controls)r(this.controls[h],h,this)},_setCornerCoords:function(){var r=this.oCoords;for(var h in r){var p=this.controls[h];r[h].corner=p.calcCornerCoords(this.angle,this.cornerSize,r[h].x,r[h].y,!1),r[h].touchCorner=p.calcCornerCoords(this.angle,this.touchCornerSize,r[h].x,r[h].y,!0)}},drawSelectionBackground:function(r){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;r.save();var h=this.getCenterPoint(),p=this._calculateCurrentDimensions(),o=this.canvas.viewportTransform;return r.translate(h.x,h.y),r.scale(1/o[0],1/o[3]),r.rotate(d(this.angle)),r.fillStyle=this.selectionBackgroundColor,r.fillRect(-p.x/2,-p.y/2,p.x,p.y),r.restore(),this},drawBorders:function(r,h){h=h||{};var p=this._calculateCurrentDimensions(),o=this.borderScaleFactor,l=p.x+o,a=p.y+o,c=typeof h.hasControls<"u"?h.hasControls:this.hasControls,g=!1;return r.save(),r.strokeStyle=h.borderColor||this.borderColor,this._setLineDash(r,h.borderDashArray||this.borderDashArray),r.strokeRect(-l/2,-a/2,l,a),c&&(r.beginPath(),this.forEachControl(function(u,m,v){u.withConnection&&u.getVisibility(v,m)&&(g=!0,r.moveTo(u.x*l,u.y*a),r.lineTo(u.x*l+u.offsetX,u.y*a+u.offsetY))}),g&&r.stroke()),r.restore(),this},drawBordersInGroup:function(r,h,p){p=p||{};var o=e.util.sizeAfterTransform(this.width,this.height,h),l=this.strokeWidth,a=this.strokeUniform,c=this.borderScaleFactor,g=o.x+l*(a?this.canvas.getZoom():h.scaleX)+c,u=o.y+l*(a?this.canvas.getZoom():h.scaleY)+c;return r.save(),this._setLineDash(r,p.borderDashArray||this.borderDashArray),r.strokeStyle=p.borderColor||this.borderColor,r.strokeRect(-g/2,-u/2,g,u),r.restore(),this},drawControls:function(r,h){h=h||{},r.save();var p=this.canvas.getRetinaScaling(),o,l;return r.setTransform(p,0,0,p,0,0),r.strokeStyle=r.fillStyle=h.cornerColor||this.cornerColor,this.transparentCorners||(r.strokeStyle=h.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(r,h.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(o=this.group.calcTransformMatrix()),this.forEachControl(function(a,c,g){l=g.oCoords[c],a.getVisibility(g,c)&&(o&&(l=e.util.transformPoint(l,o)),a.render(r,l.x,l.y,h,g))}),r.restore(),this},isControlVisible:function(r){return this.controls[r]&&this.controls[r].getVisibility(this,r)},setControlVisible:function(r,h){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[r]=h,this},setControlsVisibility:function(r){r||(r={});for(var h in r)this.setControlVisible(h,r[h]);return this},onDeselect:function(){},onSelect:function(){}})}(),e.util.object.extend(e.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(d,r){r=r||{};var h=function(){},p=r.onComplete||h,o=r.onChange||h,l=this;return e.util.animate({target:this,startValue:d.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(a){d.set("left",a),l.requestRenderAll(),o()},onComplete:function(){d.setCoords(),p()}})},fxCenterObjectV:function(d,r){r=r||{};var h=function(){},p=r.onComplete||h,o=r.onChange||h,l=this;return e.util.animate({target:this,startValue:d.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(a){d.set("top",a),l.requestRenderAll(),o()},onComplete:function(){d.setCoords(),p()}})},fxRemove:function(d,r){r=r||{};var h=function(){},p=r.onComplete||h,o=r.onChange||h,l=this;return e.util.animate({target:this,startValue:d.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(a){d.set("opacity",a),l.requestRenderAll(),o()},onComplete:function(){l.remove(d),p()}})}}),e.util.object.extend(e.Object.prototype,{animate:function(){if(arguments[0]&&typeof arguments[0]=="object"){var d=[],r,h,p=[];for(r in arguments[0])d.push(r);for(var o=0,l=d.length;o<l;o++)r=d[o],h=o!==l-1,p.push(this._animate(r,arguments[0][r],arguments[1],h));return p}else return this._animate.apply(this,arguments)},_animate:function(d,r,h,p){var o=this,l;r=r.toString(),h?h=e.util.object.clone(h):h={},~d.indexOf(".")&&(l=d.split("."));var a=o.colorProperties.indexOf(d)>-1||l&&o.colorProperties.indexOf(l[1])>-1,c=l?this.get(l[0])[l[1]]:this.get(d);"from"in h||(h.from=c),a||(~r.indexOf("=")?r=c+parseFloat(r.replace("=","")):r=parseFloat(r));var g={target:this,startValue:h.from,endValue:r,byValue:h.by,easing:h.easing,duration:h.duration,abort:h.abort&&function(u,m,v){return h.abort.call(o,u,m,v)},onChange:function(u,m,v){l?o[l[0]][l[1]]=u:o.set(d,u),!p&&h.onChange&&h.onChange(u,m,v)},onComplete:function(u,m,v){p||(o.setCoords(),h.onComplete&&h.onComplete(u,m,v))}};return a?e.util.animateColor(g.startValue,g.endValue,g.duration,g):e.util.animate(g)}}),function(d){var r=d.fabric||(d.fabric={}),h=r.util.object.extend,p=r.util.object.clone,o={x1:1,x2:1,y1:1,y2:1};if(r.Line){r.warn("fabric.Line is already defined");return}r.Line=r.util.createClass(r.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:r.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(a,c){a||(a=[0,0,0,0]),this.callSuper("initialize",c),this.set("x1",a[0]),this.set("y1",a[1]),this.set("x2",a[2]),this.set("y2",a[3]),this._setWidthHeight(c)},_setWidthHeight:function(a){a||(a={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in a?a.left:this._getLeftToOriginX(),this.top="top"in a?a.top:this._getTopToOriginY()},_set:function(a,c){return this.callSuper("_set",a,c),typeof o[a]<"u"&&this._setWidthHeight(),this},_getLeftToOriginX:l({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:l({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(a){a.beginPath();var c=this.calcLinePoints();a.moveTo(c.x1,c.y1),a.lineTo(c.x2,c.y2),a.lineWidth=this.strokeWidth;var g=a.strokeStyle;a.strokeStyle=this.stroke||a.fillStyle,this.stroke&&this._renderStroke(a),a.strokeStyle=g},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(a){return h(this.callSuper("toObject",a),this.calcLinePoints())},_getNonTransformedDimensions:function(){var a=this.callSuper("_getNonTransformedDimensions");return this.strokeLineCap==="butt"&&(this.width===0&&(a.y-=this.strokeWidth),this.height===0&&(a.x-=this.strokeWidth)),a},calcLinePoints:function(){var a=this.x1<=this.x2?-1:1,c=this.y1<=this.y2?-1:1,g=a*this.width*.5,u=c*this.height*.5,m=a*this.width*-.5,v=c*this.height*-.5;return{x1:g,x2:m,y1:u,y2:v}},_toSVG:function(){var a=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',a.x1,'" y1="',a.y1,'" x2="',a.x2,'" y2="',a.y2,`" />
`]}}),r.Line.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),r.Line.fromElement=function(a,c,g){g=g||{};var u=r.parseAttributes(a,r.Line.ATTRIBUTE_NAMES),m=[u.x1||0,u.y1||0,u.x2||0,u.y2||0];c(new r.Line(m,h(u,g)))},r.Line.fromObject=function(a,c){function g(m){delete m.points,c&&c(m)}var u=p(a,!0);u.points=[a.x1,a.y1,a.x2,a.y2],r.Object._fromObject("Line",u,g,"points")};function l(a,c){var g=a.origin,u=a.axis1,m=a.axis2,v=a.dimension,_=c.nearest,w=c.center,C=c.farthest;return function(){switch(this.get(g)){case _:return Math.min(this.get(u),this.get(m));case w:return Math.min(this.get(u),this.get(m))+.5*this.get(v);case C:return Math.max(this.get(u),this.get(m))}}}}(t),function(d){var r=d.fabric||(d.fabric={}),h=r.util.degreesToRadians;if(r.Circle){r.warn("fabric.Circle is already defined.");return}r.Circle=r.util.createClass(r.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:r.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(o,l){return this.callSuper("_set",o,l),o==="radius"&&this.setRadius(l),this},toObject:function(o){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(o))},_toSVG:function(){var o,l=0,a=0,c=(this.endAngle-this.startAngle)%360;if(c===0)o=["<circle ","COMMON_PARTS",'cx="'+l+'" cy="'+a+'" ','r="',this.radius,`" />
`];else{var g=h(this.startAngle),u=h(this.endAngle),m=this.radius,v=r.util.cos(g)*m,_=r.util.sin(g)*m,w=r.util.cos(u)*m,C=r.util.sin(u)*m,S=c>180?"1":"0";o=['<path d="M '+v+" "+_," A "+m+" "+m," 0 ",+S+" 1"," "+w+" "+C,'" ',"COMMON_PARTS",` />
`]}return o},_render:function(o){o.beginPath(),o.arc(0,0,this.radius,h(this.startAngle),h(this.endAngle),!1),this._renderPaintInOrder(o)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(o){return this.radius=o,this.set("width",o*2).set("height",o*2)}}),r.Circle.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),r.Circle.fromElement=function(o,l){var a=r.parseAttributes(o,r.Circle.ATTRIBUTE_NAMES);if(!p(a))throw new Error("value of `r` attribute is required and can not be negative");a.left=(a.left||0)-a.radius,a.top=(a.top||0)-a.radius,l(new r.Circle(a))};function p(o){return"radius"in o&&o.radius>=0}r.Circle.fromObject=function(o,l){r.Object._fromObject("Circle",o,l)}}(t),function(d){var r=d.fabric||(d.fabric={});if(r.Triangle){r.warn("fabric.Triangle is already defined");return}r.Triangle=r.util.createClass(r.Object,{type:"triangle",width:100,height:100,_render:function(h){var p=this.width/2,o=this.height/2;h.beginPath(),h.moveTo(-p,o),h.lineTo(0,-o),h.lineTo(p,o),h.closePath(),this._renderPaintInOrder(h)},_toSVG:function(){var h=this.width/2,p=this.height/2,o=[-h+" "+p,"0 "+-p,h+" "+p].join(",");return["<polygon ","COMMON_PARTS",'points="',o,'" />']}}),r.Triangle.fromObject=function(h,p){return r.Object._fromObject("Triangle",h,p)}}(t),function(d){var r=d.fabric||(d.fabric={}),h=Math.PI*2;if(r.Ellipse){r.warn("fabric.Ellipse is already defined.");return}r.Ellipse=r.util.createClass(r.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:r.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(p){this.callSuper("initialize",p),this.set("rx",p&&p.rx||0),this.set("ry",p&&p.ry||0)},_set:function(p,o){switch(this.callSuper("_set",p,o),p){case"rx":this.rx=o,this.set("width",o*2);break;case"ry":this.ry=o,this.set("height",o*2);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(p){return this.callSuper("toObject",["rx","ry"].concat(p))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,`" />
`]},_render:function(p){p.beginPath(),p.save(),p.transform(1,0,0,this.ry/this.rx,0,0),p.arc(0,0,this.rx,0,h,!1),p.restore(),this._renderPaintInOrder(p)}}),r.Ellipse.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),r.Ellipse.fromElement=function(p,o){var l=r.parseAttributes(p,r.Ellipse.ATTRIBUTE_NAMES);l.left=(l.left||0)-l.rx,l.top=(l.top||0)-l.ry,o(new r.Ellipse(l))},r.Ellipse.fromObject=function(p,o){r.Object._fromObject("Ellipse",p,o)}}(t),function(d){var r=d.fabric||(d.fabric={}),h=r.util.object.extend;if(r.Rect){r.warn("fabric.Rect is already defined");return}r.Rect=r.util.createClass(r.Object,{stateProperties:r.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:r.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(p){this.callSuper("initialize",p),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(p){var o=this.rx?Math.min(this.rx,this.width/2):0,l=this.ry?Math.min(this.ry,this.height/2):0,a=this.width,c=this.height,g=-this.width/2,u=-this.height/2,m=o!==0||l!==0,v=1-.5522847498;p.beginPath(),p.moveTo(g+o,u),p.lineTo(g+a-o,u),m&&p.bezierCurveTo(g+a-v*o,u,g+a,u+v*l,g+a,u+l),p.lineTo(g+a,u+c-l),m&&p.bezierCurveTo(g+a,u+c-v*l,g+a-v*o,u+c,g+a-o,u+c),p.lineTo(g+o,u+c),m&&p.bezierCurveTo(g+v*o,u+c,g,u+c-v*l,g,u+c-l),p.lineTo(g,u+l),m&&p.bezierCurveTo(g,u+v*l,g+v*o,u,g+o,u),p.closePath(),this._renderPaintInOrder(p)},toObject:function(p){return this.callSuper("toObject",["rx","ry"].concat(p))},_toSVG:function(){var p=-this.width/2,o=-this.height/2;return["<rect ","COMMON_PARTS",'x="',p,'" y="',o,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,`" />
`]}}),r.Rect.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),r.Rect.fromElement=function(p,o,l){if(!p)return o(null);l=l||{};var a=r.parseAttributes(p,r.Rect.ATTRIBUTE_NAMES);a.left=a.left||0,a.top=a.top||0,a.height=a.height||0,a.width=a.width||0;var c=new r.Rect(h(l?r.util.object.clone(l):{},a));c.visible=c.visible&&c.width>0&&c.height>0,o(c)},r.Rect.fromObject=function(p,o){return r.Object._fromObject("Rect",p,o)}}(t),function(d){var r=d.fabric||(d.fabric={}),h=r.util.object.extend,p=r.util.array.min,o=r.util.array.max,l=r.util.toFixed,a=r.util.projectStrokeOnPoints;if(r.Polyline){r.warn("fabric.Polyline is already defined");return}r.Polyline=r.util.createClass(r.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:r.Object.prototype.cacheProperties.concat("points"),initialize:function(c,g){g=g||{},this.points=c||[],this.callSuper("initialize",g),this._setPositionDimensions(g)},_projectStrokeOnPoints:function(){return a(this.points,this,!0)},_setPositionDimensions:function(c){var g=this._calcDimensions(c),u,m=this.exactBoundingBox?this.strokeWidth:0;this.width=g.width-m,this.height=g.height-m,c.fromSVG||(u=this.translateToGivenOrigin({x:g.left-this.strokeWidth/2+m/2,y:g.top-this.strokeWidth/2+m/2},"left","top",this.originX,this.originY)),typeof c.left>"u"&&(this.left=c.fromSVG?g.left:u.x),typeof c.top>"u"&&(this.top=c.fromSVG?g.top:u.y),this.pathOffset={x:g.left+this.width/2+m/2,y:g.top+this.height/2+m/2}},_calcDimensions:function(){var c=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,g=p(c,"x")||0,u=p(c,"y")||0,m=o(c,"x")||0,v=o(c,"y")||0,_=m-g,w=v-u;return{left:g,top:u,width:_,height:w}},toObject:function(c){return h(this.callSuper("toObject",c),{points:this.points.concat()})},_toSVG:function(){for(var c=[],g=this.pathOffset.x,u=this.pathOffset.y,m=r.Object.NUM_FRACTION_DIGITS,v=0,_=this.points.length;v<_;v++)c.push(l(this.points[v].x-g,m),",",l(this.points[v].y-u,m)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',c.join(""),`" />
`]},commonRender:function(c){var g,u=this.points.length,m=this.pathOffset.x,v=this.pathOffset.y;if(!u||isNaN(this.points[u-1].y))return!1;c.beginPath(),c.moveTo(this.points[0].x-m,this.points[0].y-v);for(var _=0;_<u;_++)g=this.points[_],c.lineTo(g.x-m,g.y-v);return!0},_render:function(c){this.commonRender(c)&&this._renderPaintInOrder(c)},complexity:function(){return this.get("points").length}}),r.Polyline.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(),r.Polyline.fromElementGenerator=function(c){return function(g,u,m){if(!g)return u(null);m||(m={});var v=r.parsePointsAttribute(g.getAttribute("points")),_=r.parseAttributes(g,r[c].ATTRIBUTE_NAMES);_.fromSVG=!0,u(new r[c](v,h(_,m)))}},r.Polyline.fromElement=r.Polyline.fromElementGenerator("Polyline"),r.Polyline.fromObject=function(c,g){return r.Object._fromObject("Polyline",c,g,"points")}}(t),function(d){var r=d.fabric||(d.fabric={}),h=r.util.projectStrokeOnPoints;if(r.Polygon){r.warn("fabric.Polygon is already defined");return}r.Polygon=r.util.createClass(r.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return h(this.points,this)},_render:function(p){this.commonRender(p)&&(p.closePath(),this._renderPaintInOrder(p))}}),r.Polygon.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(),r.Polygon.fromElement=r.Polyline.fromElementGenerator("Polygon"),r.Polygon.fromObject=function(p,o){r.Object._fromObject("Polygon",p,o,"points")}}(t),function(d){var r=d.fabric||(d.fabric={}),h=r.util.array.min,p=r.util.array.max,o=r.util.object.extend,l=r.util.object.clone,a=r.util.toFixed;if(r.Path){r.warn("fabric.Path is already defined");return}r.Path=r.util.createClass(r.Object,{type:"path",path:null,cacheProperties:r.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:r.Object.prototype.stateProperties.concat("path"),initialize:function(c,g){g=l(g||{}),delete g.path,this.callSuper("initialize",g),this._setPath(c||[],g)},_setPath:function(c,g){this.path=r.util.makePathSimpler(Array.isArray(c)?c:r.util.parsePath(c)),r.Polyline.prototype._setPositionDimensions.call(this,g||{})},_renderPathCommands:function(c){var g,u=0,m=0,v=0,_=0,w=0,C=0,S=-this.pathOffset.x,x=-this.pathOffset.y;c.beginPath();for(var O=0,L=this.path.length;O<L;++O)switch(g=this.path[O],g[0]){case"L":v=g[1],_=g[2],c.lineTo(v+S,_+x);break;case"M":v=g[1],_=g[2],u=v,m=_,c.moveTo(v+S,_+x);break;case"C":v=g[5],_=g[6],w=g[3],C=g[4],c.bezierCurveTo(g[1]+S,g[2]+x,w+S,C+x,v+S,_+x);break;case"Q":c.quadraticCurveTo(g[1]+S,g[2]+x,g[3]+S,g[4]+x),v=g[3],_=g[4],w=g[1],C=g[2];break;case"z":case"Z":v=u,_=m,c.closePath();break}},_render:function(c){this._renderPathCommands(c),this._renderPaintInOrder(c)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(c){return o(this.callSuper("toObject",c),{path:this.path.map(function(g){return g.slice()})})},toDatalessObject:function(c){var g=this.toObject(["sourcePath"].concat(c));return g.sourcePath&&delete g.path,g},_toSVG:function(){var c=r.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',c,'" stroke-linecap="round" ',`/>
`]},_getOffsetTransform:function(){var c=r.Object.NUM_FRACTION_DIGITS;return" translate("+a(-this.pathOffset.x,c)+", "+a(-this.pathOffset.y,c)+")"},toClipPathSVG:function(c){var g=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:c,additionalTransform:g})},toSVG:function(c){var g=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:c,additionalTransform:g})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var c=[],g=[],u,m=0,v=0,_=0,w=0,C,S=0,x=this.path.length;S<x;++S){switch(u=this.path[S],u[0]){case"L":_=u[1],w=u[2],C=[];break;case"M":_=u[1],w=u[2],m=_,v=w,C=[];break;case"C":C=r.util.getBoundsOfCurve(_,w,u[1],u[2],u[3],u[4],u[5],u[6]),_=u[5],w=u[6];break;case"Q":C=r.util.getBoundsOfCurve(_,w,u[1],u[2],u[1],u[2],u[3],u[4]),_=u[3],w=u[4];break;case"z":case"Z":_=m,w=v;break}C.forEach(function(q){c.push(q.x),g.push(q.y)}),c.push(_),g.push(w)}var O=h(c)||0,L=h(g)||0,F=p(c)||0,Y=p(g)||0,Q=F-O,te=Y-L;return{left:O,top:L,width:Q,height:te}}}),r.Path.fromObject=function(c,g){if(typeof c.sourcePath=="string"){var u=c.sourcePath;r.loadSVGFromURL(u,function(m){var v=m[0];v.setOptions(c),c.clipPath?r.util.enlivenObjects([c.clipPath],function(_){v.clipPath=_[0],g&&g(v)}):g&&g(v)})}else r.Object._fromObject("Path",c,g,"path")},r.Path.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat(["d"]),r.Path.fromElement=function(c,g,u){var m=r.parseAttributes(c,r.Path.ATTRIBUTE_NAMES);m.fromSVG=!0,g(new r.Path(m.d,o(m,u)))}}(t),function(d){var r=d.fabric||(d.fabric={}),h=r.util.array.min,p=r.util.array.max;r.Group||(r.Group=r.util.createClass(r.Object,r.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(o,l,a){l=l||{},this._objects=[],a&&this.callSuper("initialize",l),this._objects=o||[];for(var c=this._objects.length;c--;)this._objects[c].group=this;if(a)this._updateObjectsACoords();else{var g=l&&l.centerPoint;l.originX!==void 0&&(this.originX=l.originX),l.originY!==void 0&&(this.originY=l.originY),g||this._calcBounds(),this._updateObjectsCoords(g),delete l.centerPoint,this.callSuper("initialize",l)}this.setCoords()},_updateObjectsACoords:function(){for(var o=!0,l=this._objects.length;l--;)this._objects[l].setCoords(o)},_updateObjectsCoords:function(l){for(var l=l||this.getCenterPoint(),a=this._objects.length;a--;)this._updateObjectCoords(this._objects[a],l)},_updateObjectCoords:function(o,l){var a=o.left,c=o.top,g=!0;o.set({left:a-l.x,top:c-l.y}),o.group=this,o.setCoords(g)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(o){var l=!!this.group;return this._restoreObjectsState(),r.util.resetObjectTransform(this),o&&(l&&r.util.removeTransformFromObject(o,this.group.calcTransformMatrix()),this._objects.push(o),o.group=this,o._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,l?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(o){return this._restoreObjectsState(),r.util.resetObjectTransform(this),this.remove(o),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(o){this.dirty=!0,o.group=this,o._set("canvas",this.canvas)},_onObjectRemoved:function(o){this.dirty=!0,delete o.group},_set:function(o,l){var a=this._objects.length;if(this.useSetOnGroup)for(;a--;)this._objects[a].setOnGroup(o,l);if(o==="canvas")for(;a--;)this._objects[a]._set(o,l);r.Object.prototype._set.call(this,o,l)},toObject:function(o){var l=this.includeDefaultValues,a=this._objects.filter(function(g){return!g.excludeFromExport}).map(function(g){var u=g.includeDefaultValues;g.includeDefaultValues=l;var m=g.toObject(o);return g.includeDefaultValues=u,m}),c=r.Object.prototype.toObject.call(this,o);return c.objects=a,c},toDatalessObject:function(o){var l,a=this.sourcePath;if(a)l=a;else{var c=this.includeDefaultValues;l=this._objects.map(function(u){var m=u.includeDefaultValues;u.includeDefaultValues=c;var v=u.toDatalessObject(o);return u.includeDefaultValues=m,v})}var g=r.Object.prototype.toDatalessObject.call(this,o);return g.objects=l,g},render:function(o){this._transformDone=!0,this.callSuper("render",o),this._transformDone=!1},shouldCache:function(){var o=r.Object.prototype.shouldCache.call(this);if(o){for(var l=0,a=this._objects.length;l<a;l++)if(this._objects[l].willDrawShadow())return this.ownCaching=!1,!1}return o},willDrawShadow:function(){if(r.Object.prototype.willDrawShadow.call(this))return!0;for(var o=0,l=this._objects.length;o<l;o++)if(this._objects[o].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(o){for(var l=0,a=this._objects.length;l<a;l++)this._objects[l].render(o);this._drawClipPath(o,this.clipPath)},isCacheDirty:function(o){if(this.callSuper("isCacheDirty",o))return!0;if(!this.statefullCache)return!1;for(var l=0,a=this._objects.length;l<a;l++)if(this._objects[l].isCacheDirty(!0)){if(this._cacheCanvas){var c=this.cacheWidth/this.zoomX,g=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-c/2,-g/2,c,g)}return!0}return!1},_restoreObjectsState:function(){var o=this.calcOwnMatrix();return this._objects.forEach(function(l){r.util.addTransformToObject(l,o),delete l.group,l.setCoords()}),this},destroy:function(){return this._objects.forEach(function(o){o.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(o){o.dispose&&o.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var o=this._objects,l=this.canvas;this._objects=[];var a=this.toObject();delete a.objects;var c=new r.ActiveSelection([]);return c.set(a),c.type="activeSelection",l.remove(this),o.forEach(function(g){g.group=c,g.dirty=!0,l.add(g)}),c.canvas=l,c._objects=o,l._activeObject=c,c.setCoords(),c}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var o=!0;return this.forEachObject(function(l){l.setCoords(o)}),this},_calcBounds:function(o){for(var l=[],a=[],c,g,u,m=["tr","br","bl","tl"],v=0,_=this._objects.length,w,C=m.length;v<_;++v){for(c=this._objects[v],u=c.calcACoords(),w=0;w<C;w++)g=m[w],l.push(u[g].x),a.push(u[g].y);c.aCoords=u}this._getBounds(l,a,o)},_getBounds:function(o,l,a){var c=new r.Point(h(o),h(l)),g=new r.Point(p(o),p(l)),u=c.y||0,m=c.x||0,v=g.x-c.x||0,_=g.y-c.y||0;this.width=v,this.height=_,a||this.setPositionByOrigin({x:m,y:u},"left","top")},_toSVG:function(o){for(var l=["<g ","COMMON_PARTS",` >
`],a=0,c=this._objects.length;a<c;a++)l.push("		",this._objects[a].toSVG(o));return l.push(`</g>
`),l},getSvgStyles:function(){var o=typeof this.opacity<"u"&&this.opacity!==1?"opacity: "+this.opacity+";":"",l=this.visible?"":" visibility: hidden;";return[o,this.getSvgFilter(),l].join("")},toClipPathSVG:function(o){for(var l=[],a=0,c=this._objects.length;a<c;a++)l.push("	",this._objects[a].toClipPathSVG(o));return this._createBaseClipPathSVGMarkup(l,{reviver:o})}}),r.Group.fromObject=function(o,l){var a=o.objects,c=r.util.object.clone(o,!0);if(delete c.objects,typeof a=="string"){r.loadSVGFromURL(a,function(g){var u=r.util.groupSVGElements(g,o,a),m=c.clipPath;delete c.clipPath,u.set(c),m?r.util.enlivenObjects([m],function(v){u.clipPath=v[0],l&&l(u)}):l&&l(u)});return}r.util.enlivenObjects(a,function(g){r.util.enlivenObjectEnlivables(o,c,function(){l&&l(new r.Group(g,c,!0))})})})}(t),function(d){var r=d.fabric||(d.fabric={});r.ActiveSelection||(r.ActiveSelection=r.util.createClass(r.Group,{type:"activeSelection",initialize:function(h,p){p=p||{},this._objects=h||[];for(var o=this._objects.length;o--;)this._objects[o].group=this;p.originX&&(this.originX=p.originX),p.originY&&(this.originY=p.originY),this._calcBounds(),this._updateObjectsCoords(),r.Object.prototype.initialize.call(this,p),this.setCoords()},toGroup:function(){var h=this._objects.concat();this._objects=[];var p=r.Object.prototype.toObject.call(this),o=new r.Group([]);if(delete p.type,o.set(p),h.forEach(function(a){a.canvas.remove(a),a.group=o}),o._objects=h,!this.canvas)return o;var l=this.canvas;return l.add(o),l._activeObject=o,o.setCoords(),o},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(h,p,o){h.save(),h.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",h,p),o=o||{},typeof o.hasControls>"u"&&(o.hasControls=!1),o.forActiveSelection=!0;for(var l=0,a=this._objects.length;l<a;l++)this._objects[l]._renderControls(h,o);h.restore()}}),r.ActiveSelection.fromObject=function(h,p){r.util.enlivenObjects(h.objects,function(o){delete h.objects,p&&p(new r.ActiveSelection(o,h,!0))})})}(t),function(d){var r=e.util.object.extend;if(d.fabric||(d.fabric={}),d.fabric.Image){e.warn("fabric.Image is already defined.");return}e.Image=e.util.createClass(e.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:e.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:e.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(h,p){p||(p={}),this.filters=[],this.cacheKey="texture"+e.Object.__uid++,this.callSuper("initialize",p),this._initElement(h,p)},getElement:function(){return this._element||{}},setElement:function(h,p){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=h,this._originalElement=h,this._initConfig(p),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(h){var p=e.filterBackend;p&&p.evictCachesForKey&&p.evictCachesForKey(h)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(h){e.util.cleanUpJsdomNode(this[h]),this[h]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var h=this.getElement();return{width:h.naturalWidth||h.width,height:h.naturalHeight||h.height}},_stroke:function(h){if(!(!this.stroke||this.strokeWidth===0)){var p=this.width/2,o=this.height/2;h.beginPath(),h.moveTo(-p,-o),h.lineTo(p,-o),h.lineTo(p,o),h.lineTo(-p,o),h.lineTo(-p,-o),h.closePath()}},toObject:function(h){var p=[];this.filters.forEach(function(l){l&&p.push(l.toObject())});var o=r(this.callSuper("toObject",["cropX","cropY"].concat(h)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:p});return this.resizeFilter&&(o.resizeFilter=this.resizeFilter.toObject()),o},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var h=[],p=[],o,l=this._element,a=-this.width/2,c=-this.height/2,g="",u="";if(!l)return[];if(this.hasCrop()){var m=e.Object.__uid++;h.push('<clipPath id="imageCrop_'+m+`">
`,'	<rect x="'+a+'" y="'+c+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),g=' clip-path="url(#imageCrop_'+m+')" '}if(this.imageSmoothing||(u='" image-rendering="optimizeSpeed'),p.push("	<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',a-this.cropX,'" y="',c-this.cropY,'" width="',l.width||l.naturalWidth,'" height="',l.height||l.height,u,'"',g,`></image>
`),this.stroke||this.strokeDashArray){var v=this.fill;this.fill=null,o=["	<rect ",'x="',a,'" y="',c,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),`"/>
`],this.fill=v}return this.paintFirst!=="fill"?h=h.concat(o,p):h=h.concat(p,o),h},getSrc:function(h){var p=h?this._element:this._originalElement;return p?p.toDataURL?p.toDataURL():this.srcFromAttribute?p.getAttribute("src"):p.src:this.src||""},setSrc:function(h,p,o){return e.util.loadImage(h,function(l,a){this.setElement(l,o),this._setWidthHeight(),p&&p(this,a)},this,o&&o.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var h=this.resizeFilter,p=this.minimumScaleTrigger,o=this.getTotalObjectScaling(),l=o.scaleX,a=o.scaleY,c=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!h||l>p&&a>p){this._element=c,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=l,this._lastScaleY=a;return}e.filterBackend||(e.filterBackend=e.initFilterBackend());var g=e.util.createCanvasElement(),u=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,m=c.width,v=c.height;g.width=m,g.height=v,this._element=g,this._lastScaleX=h.scaleX=l,this._lastScaleY=h.scaleY=a,e.filterBackend.applyFilters([h],c,m,v,this._element,u),this._filterScalingX=g.width/this._originalElement.width,this._filterScalingY=g.height/this._originalElement.height},applyFilters:function(h){if(h=h||this.filters||[],h=h.filter(function(c){return c&&!c.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),h.length===0)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var p=this._originalElement,o=p.naturalWidth||p.width,l=p.naturalHeight||p.height;if(this._element===this._originalElement){var a=e.util.createCanvasElement();a.width=o,a.height=l,this._element=a,this._filteredEl=a}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,o,l),this._lastScaleX=1,this._lastScaleY=1;return e.filterBackend||(e.filterBackend=e.initFilterBackend()),e.filterBackend.applyFilters(h,this._originalElement,o,l,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(h){e.util.setImageSmoothing(h,this.imageSmoothing),this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(h),this._renderPaintInOrder(h)},drawCacheOnCanvas:function(h){e.util.setImageSmoothing(h,this.imageSmoothing),e.Object.prototype.drawCacheOnCanvas.call(this,h)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(h){var p=this._element;if(p){var o=this._filterScalingX,l=this._filterScalingY,a=this.width,c=this.height,g=Math.min,u=Math.max,m=u(this.cropX,0),v=u(this.cropY,0),_=p.naturalWidth||p.width,w=p.naturalHeight||p.height,C=m*o,S=v*l,x=g(a*o,_-C),O=g(c*l,w-S),L=-a/2,F=-c/2,Y=g(a,_/o-m),Q=g(c,w/l-v);p&&h.drawImage(p,C,S,x,O,L,F,Y,Q)}},_needsResize:function(){var h=this.getTotalObjectScaling();return h.scaleX!==this._lastScaleX||h.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(h,p){this.setElement(e.util.getById(h),p),e.util.addClass(this.getElement(),e.Image.CSS_CANVAS)},_initConfig:function(h){h||(h={}),this.setOptions(h),this._setWidthHeight(h)},_initFilters:function(h,p){h&&h.length?e.util.enlivenObjects(h,function(o){p&&p(o)},"fabric.Image.filters"):p&&p()},_setWidthHeight:function(h){h||(h={});var p=this.getElement();this.width=h.width||p.naturalWidth||p.width||0,this.height=h.height||p.naturalHeight||p.height||0},parsePreserveAspectRatioAttribute:function(){var h=e.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),p=this._element.width,o=this._element.height,l=1,a=1,c=0,g=0,u=0,m=0,v,_=this.width,w=this.height,C={width:_,height:w};return h&&(h.alignX!=="none"||h.alignY!=="none")?(h.meetOrSlice==="meet"&&(l=a=e.util.findScaleToFit(this._element,C),v=(_-p*l)/2,h.alignX==="Min"&&(c=-v),h.alignX==="Max"&&(c=v),v=(w-o*a)/2,h.alignY==="Min"&&(g=-v),h.alignY==="Max"&&(g=v)),h.meetOrSlice==="slice"&&(l=a=e.util.findScaleToCover(this._element,C),v=p-_/l,h.alignX==="Mid"&&(u=v/2),h.alignX==="Max"&&(u=v),v=o-w/a,h.alignY==="Mid"&&(m=v/2),h.alignY==="Max"&&(m=v),p=_/l,o=w/a)):(l=_/p,a=w/o),{width:p,height:o,scaleX:l,scaleY:a,offsetLeft:c,offsetTop:g,cropX:u,cropY:m}}}),e.Image.CSS_CANVAS="canvas-img",e.Image.prototype.getSvgSrc=e.Image.prototype.getSrc,e.Image.fromObject=function(h,p){var o=e.util.object.clone(h);e.util.loadImage(o.src,function(l,a){if(a){p&&p(null,!0);return}e.Image.prototype._initFilters.call(o,o.filters,function(c){o.filters=c||[],e.Image.prototype._initFilters.call(o,[o.resizeFilter],function(g){o.resizeFilter=g[0],e.util.enlivenObjectEnlivables(o,o,function(){var u=new e.Image(l,o);p(u,!1)})})})},null,o.crossOrigin)},e.Image.fromURL=function(h,p,o){e.util.loadImage(h,function(l,a){p&&p(new e.Image(l,o),a)},null,o&&o.crossOrigin)},e.Image.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),e.Image.fromElement=function(h,p,o){var l=e.parseAttributes(h,e.Image.ATTRIBUTE_NAMES);e.Image.fromURL(l["xlink:href"],p,r(o?e.util.object.clone(o):{},l))}}(t),e.util.object.extend(e.Object.prototype,{_getAngleValueForStraighten:function(){var d=this.angle%360;return d>0?Math.round((d-1)/90)*90:Math.round(d/90)*90},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(d){d=d||{};var r=function(){},h=d.onComplete||r,p=d.onChange||r,o=this;return e.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(l){o.rotate(l),p()},onComplete:function(){o.setCoords(),h()}})}}),e.util.object.extend(e.StaticCanvas.prototype,{straightenObject:function(d){return d.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(d){return d.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){function d(h,p){var o="precision "+p+` float;
void main(){}`,l=h.createShader(h.FRAGMENT_SHADER);return h.shaderSource(l,o),h.compileShader(l),!!h.getShaderParameter(l,h.COMPILE_STATUS)}e.isWebglSupported=function(h){if(e.isLikelyNode)return!1;h=h||e.WebglFilterBackend.prototype.tileSize;var p=document.createElement("canvas"),o=p.getContext("webgl")||p.getContext("experimental-webgl"),l=!1;if(o){e.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE),l=e.maxTextureSize>=h;for(var a=["highp","mediump","lowp"],c=0;c<3;c++)if(d(o,a[c])){e.webGlPrecision=a[c];break}}return this.isSupported=l,l},e.WebglFilterBackend=r;function r(h){h&&h.tileSize&&(this.tileSize=h.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}r.prototype={tileSize:2048,resources:{},setupGLContext:function(h,p){this.dispose(),this.createWebGLCanvas(h,p),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(h,p)},chooseFastestCopyGLTo2DMethod:function(h,p){var o=typeof window.performance<"u",l;try{new ImageData(1,1),l=!0}catch{l=!1}var a=typeof ArrayBuffer<"u",c=typeof Uint8ClampedArray<"u";if(o&&l&&a&&c){var g=e.util.createCanvasElement(),u=new ArrayBuffer(h*p*4);if(e.forceGLPutImageData){this.imageBuffer=u,this.copyGLTo2D=y;return}var m={imageBuffer:u,destinationWidth:h,destinationHeight:p,targetCanvas:g},v,_,w;g.width=h,g.height=p,v=window.performance.now(),f.call(m,this.gl,m),_=window.performance.now()-v,v=window.performance.now(),y.call(m,this.gl,m),w=window.performance.now()-v,_>w?(this.imageBuffer=u,this.copyGLTo2D=y):this.copyGLTo2D=f}},createWebGLCanvas:function(h,p){var o=e.util.createCanvasElement();o.width=h,o.height=p;var l={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},a=o.getContext("webgl",l);a||(a=o.getContext("experimental-webgl",l)),a&&(a.clearColor(0,0,0,0),this.canvas=o,this.gl=a)},applyFilters:function(h,p,o,l,a,c){var g=this.gl,u;c&&(u=this.getCachedTexture(c,p));var m={originalWidth:p.width||p.originalWidth,originalHeight:p.height||p.originalHeight,sourceWidth:o,sourceHeight:l,destinationWidth:o,destinationHeight:l,context:g,sourceTexture:this.createTexture(g,o,l,!u&&p),targetTexture:this.createTexture(g,o,l),originalTexture:u||this.createTexture(g,o,l,!u&&p),passes:h.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:a},v=g.createFramebuffer();return g.bindFramebuffer(g.FRAMEBUFFER,v),h.forEach(function(_){_&&_.applyTo(m)}),s(m),this.copyGLTo2D(g,m),g.bindTexture(g.TEXTURE_2D,null),g.deleteTexture(m.sourceTexture),g.deleteTexture(m.targetTexture),g.deleteFramebuffer(v),a.getContext("2d").setTransform(1,0,0,1,0,0),m},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(h,p,o,l,a){var c=h.createTexture();return h.bindTexture(h.TEXTURE_2D,c),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,a||h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,a||h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),l?h.texImage2D(h.TEXTURE_2D,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,l):h.texImage2D(h.TEXTURE_2D,0,h.RGBA,p,o,0,h.RGBA,h.UNSIGNED_BYTE,null),c},getCachedTexture:function(h,p){if(this.textureCache[h])return this.textureCache[h];var o=this.createTexture(this.gl,p.width,p.height,p);return this.textureCache[h]=o,o},evictCachesForKey:function(h){this.textureCache[h]&&(this.gl.deleteTexture(this.textureCache[h]),delete this.textureCache[h])},copyGLTo2D:f,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var h=this.gl,p={renderer:"",vendor:""};if(!h)return p;var o=h.getExtension("WEBGL_debug_renderer_info");if(o){var l=h.getParameter(o.UNMASKED_RENDERER_WEBGL),a=h.getParameter(o.UNMASKED_VENDOR_WEBGL);l&&(p.renderer=l.toLowerCase()),a&&(p.vendor=a.toLowerCase())}return this.gpuInfo=p,p}}}();function s(d){var r=d.targetCanvas,h=r.width,p=r.height,o=d.destinationWidth,l=d.destinationHeight;(h!==o||p!==l)&&(r.width=o,r.height=l)}function f(d,r){var h=d.canvas,p=r.targetCanvas,o=p.getContext("2d");o.translate(0,p.height),o.scale(1,-1);var l=h.height-p.height;o.drawImage(h,0,l,p.width,p.height,0,0,p.width,p.height)}function y(d,r){var h=r.targetCanvas,p=h.getContext("2d"),o=r.destinationWidth,l=r.destinationHeight,a=o*l*4,c=new Uint8Array(this.imageBuffer,0,a),g=new Uint8ClampedArray(this.imageBuffer,0,a);d.readPixels(0,0,o,l,d.RGBA,d.UNSIGNED_BYTE,c);var u=new ImageData(g,o,l);p.putImageData(u,0,0)}(function(){var d=function(){};e.Canvas2dFilterBackend=r;function r(){}r.prototype={evictCachesForKey:d,dispose:d,clearWebGLCaches:d,resources:{},applyFilters:function(h,p,o,l,a){var c=a.getContext("2d");c.drawImage(p,0,0,o,l);var g=c.getImageData(0,0,o,l),u=c.getImageData(0,0,o,l),m={sourceWidth:o,sourceHeight:l,imageData:g,originalEl:p,originalImageData:u,canvasEl:a,ctx:c,filterBackend:this};return h.forEach(function(v){v.applyTo(m)}),(m.imageData.width!==o||m.imageData.height!==l)&&(a.width=m.imageData.width,a.height=m.imageData.height),c.putImageData(m.imageData,0,0),m}}})(),e.Image=e.Image||{},e.Image.filters=e.Image.filters||{},e.Image.filters.BaseFilter=e.util.createClass({type:"BaseFilter",vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
void main() {
vTexCoord = aPosition;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:`precision highp float;
varying vec2 vTexCoord;
uniform sampler2D uTexture;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
}`,initialize:function(d){d&&this.setOptions(d)},setOptions:function(d){for(var r in d)this[r]=d[r]},createProgram:function(d,r,h){r=r||this.fragmentSource,h=h||this.vertexSource,e.webGlPrecision!=="highp"&&(r=r.replace(/precision highp float/g,"precision "+e.webGlPrecision+" float"));var p=d.createShader(d.VERTEX_SHADER);if(d.shaderSource(p,h),d.compileShader(p),!d.getShaderParameter(p,d.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+d.getShaderInfoLog(p));var o=d.createShader(d.FRAGMENT_SHADER);if(d.shaderSource(o,r),d.compileShader(o),!d.getShaderParameter(o,d.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+d.getShaderInfoLog(o));var l=d.createProgram();if(d.attachShader(l,p),d.attachShader(l,o),d.linkProgram(l),!d.getProgramParameter(l,d.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+d.getProgramInfoLog(l));var a=this.getAttributeLocations(d,l),c=this.getUniformLocations(d,l)||{};return c.uStepW=d.getUniformLocation(l,"uStepW"),c.uStepH=d.getUniformLocation(l,"uStepH"),{program:l,attributeLocations:a,uniformLocations:c}},getAttributeLocations:function(d,r){return{aPosition:d.getAttribLocation(r,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(d,r,h){var p=r.aPosition,o=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,o),d.enableVertexAttribArray(p),d.vertexAttribPointer(p,2,d.FLOAT,!1,0,0),d.bufferData(d.ARRAY_BUFFER,h,d.STATIC_DRAW)},_setupFrameBuffer:function(d){var r=d.context,h,p;d.passes>1?(h=d.destinationWidth,p=d.destinationHeight,(d.sourceWidth!==h||d.sourceHeight!==p)&&(r.deleteTexture(d.targetTexture),d.targetTexture=d.filterBackend.createTexture(r,h,p)),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,d.targetTexture,0)):(r.bindFramebuffer(r.FRAMEBUFFER,null),r.finish())},_swapTextures:function(d){d.passes--,d.pass++;var r=d.targetTexture;d.targetTexture=d.sourceTexture,d.sourceTexture=r},isNeutralState:function(){var d=this.mainParameter,r=e.Image.filters[this.type].prototype;if(d)if(Array.isArray(r[d])){for(var h=r[d].length;h--;)if(this[d][h]!==r[d][h])return!1;return!0}else return r[d]===this[d];else return!1},applyTo:function(d){d.webgl?(this._setupFrameBuffer(d),this.applyToWebGL(d),this._swapTextures(d)):this.applyTo2d(d)},retrieveShader:function(d){return d.programCache.hasOwnProperty(this.type)||(d.programCache[this.type]=this.createProgram(d.context)),d.programCache[this.type]},applyToWebGL:function(d){var r=d.context,h=this.retrieveShader(d);d.pass===0&&d.originalTexture?r.bindTexture(r.TEXTURE_2D,d.originalTexture):r.bindTexture(r.TEXTURE_2D,d.sourceTexture),r.useProgram(h.program),this.sendAttributeData(r,h.attributeLocations,d.aPosition),r.uniform1f(h.uniformLocations.uStepW,1/d.sourceWidth),r.uniform1f(h.uniformLocations.uStepH,1/d.sourceHeight),this.sendUniformData(r,h.uniformLocations),r.viewport(0,0,d.destinationWidth,d.destinationHeight),r.drawArrays(r.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(d,r,h){d.activeTexture(h),d.bindTexture(d.TEXTURE_2D,r),d.activeTexture(d.TEXTURE0)},unbindAdditionalTexture:function(d,r){d.activeTexture(r),d.bindTexture(d.TEXTURE_2D,null),d.activeTexture(d.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(d){this[this.mainParameter]=d},sendUniformData:function(){},createHelpLayer:function(d){if(!d.helpLayer){var r=document.createElement("canvas");r.width=d.sourceWidth,r.height=d.sourceHeight,d.helpLayer=r}},toObject:function(){var d={type:this.type},r=this.mainParameter;return r&&(d[r]=this[r]),d},toJSON:function(){return this.toObject()}}),e.Image.filters.BaseFilter.fromObject=function(d,r){var h=new e.Image.filters[d.type](d);return r&&r(h),h},function(d){var r=d.fabric||(d.fabric={}),h=r.Image.filters,p=r.util.createClass;h.ColorMatrix=p(h.BaseFilter,{type:"ColorMatrix",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
uniform mat4 uColorMatrix;
uniform vec4 uConstants;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color *= uColorMatrix;
color += uConstants;
gl_FragColor = color;
}`,matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(o){this.callSuper("initialize",o),this.matrix=this.matrix.slice(0)},applyTo2d:function(o){var l=o.imageData,a=l.data,c=a.length,g=this.matrix,u,m,v,_,w,C=this.colorsOnly;for(w=0;w<c;w+=4)u=a[w],m=a[w+1],v=a[w+2],C?(a[w]=u*g[0]+m*g[1]+v*g[2]+g[4]*255,a[w+1]=u*g[5]+m*g[6]+v*g[7]+g[9]*255,a[w+2]=u*g[10]+m*g[11]+v*g[12]+g[14]*255):(_=a[w+3],a[w]=u*g[0]+m*g[1]+v*g[2]+_*g[3]+g[4]*255,a[w+1]=u*g[5]+m*g[6]+v*g[7]+_*g[8]+g[9]*255,a[w+2]=u*g[10]+m*g[11]+v*g[12]+_*g[13]+g[14]*255,a[w+3]=u*g[15]+m*g[16]+v*g[17]+_*g[18]+g[19]*255)},getUniformLocations:function(o,l){return{uColorMatrix:o.getUniformLocation(l,"uColorMatrix"),uConstants:o.getUniformLocation(l,"uConstants")}},sendUniformData:function(o,l){var a=this.matrix,c=[a[0],a[1],a[2],a[3],a[5],a[6],a[7],a[8],a[10],a[11],a[12],a[13],a[15],a[16],a[17],a[18]],g=[a[4],a[9],a[14],a[19]];o.uniformMatrix4fv(l.uColorMatrix,!1,c),o.uniform4fv(l.uConstants,g)}}),r.Image.filters.ColorMatrix.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(d){var r=d.fabric||(d.fabric={}),h=r.Image.filters,p=r.util.createClass;h.Brightness=p(h.BaseFilter,{type:"Brightness",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBrightness;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += uBrightness;
gl_FragColor = color;
}`,brightness:0,mainParameter:"brightness",applyTo2d:function(o){if(this.brightness!==0){var l=o.imageData,a=l.data,c,g=a.length,u=Math.round(this.brightness*255);for(c=0;c<g;c+=4)a[c]=a[c]+u,a[c+1]=a[c+1]+u,a[c+2]=a[c+2]+u}},getUniformLocations:function(o,l){return{uBrightness:o.getUniformLocation(l,"uBrightness")}},sendUniformData:function(o,l){o.uniform1f(l.uBrightness,this.brightness)}}),r.Image.filters.Brightness.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(d){var r=d.fabric||(d.fabric={}),h=r.util.object.extend,p=r.Image.filters,o=r.util.createClass;p.Convolute=o(p.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_3_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[9];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 3.0; h+=1.0) {
for (float w = 0.0; w < 3.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_5_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_5_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[25];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 5.0; h+=1.0) {
for (float w = 0.0; w < 5.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_7_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_7_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[49];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 7.0; h+=1.0) {
for (float w = 0.0; w < 7.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`,Convolute_9_1:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 0);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
}
}
gl_FragColor = color;
}`,Convolute_9_0:`precision highp float;
uniform sampler2D uTexture;
uniform float uMatrix[81];
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
vec4 color = vec4(0, 0, 0, 1);
for (float h = 0.0; h < 9.0; h+=1.0) {
for (float w = 0.0; w < 9.0; w+=1.0) {
vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
}
}
float alpha = texture2D(uTexture, vTexCoord).a;
gl_FragColor = color;
gl_FragColor.a = alpha;
}`},retrieveShader:function(l){var a=Math.sqrt(this.matrix.length),c=this.type+"_"+a+"_"+(this.opaque?1:0),g=this.fragmentSource[c];return l.programCache.hasOwnProperty(c)||(l.programCache[c]=this.createProgram(l.context,g)),l.programCache[c]},applyTo2d:function(l){var a=l.imageData,c=a.data,g=this.matrix,u=Math.round(Math.sqrt(g.length)),m=Math.floor(u/2),v=a.width,_=a.height,w=l.ctx.createImageData(v,_),C=w.data,S=this.opaque?1:0,x,O,L,F,Y,Q,te,q,J,ie,se,U,T;for(se=0;se<_;se++)for(ie=0;ie<v;ie++){for(Y=(se*v+ie)*4,x=0,O=0,L=0,F=0,T=0;T<u;T++)for(U=0;U<u;U++)te=se+T-m,Q=ie+U-m,!(te<0||te>=_||Q<0||Q>=v)&&(q=(te*v+Q)*4,J=g[T*u+U],x+=c[q]*J,O+=c[q+1]*J,L+=c[q+2]*J,S||(F+=c[q+3]*J));C[Y]=x,C[Y+1]=O,C[Y+2]=L,S?C[Y+3]=c[Y+3]:C[Y+3]=F}l.imageData=w},getUniformLocations:function(l,a){return{uMatrix:l.getUniformLocation(a,"uMatrix"),uOpaque:l.getUniformLocation(a,"uOpaque"),uHalfSize:l.getUniformLocation(a,"uHalfSize"),uSize:l.getUniformLocation(a,"uSize")}},sendUniformData:function(l,a){l.uniform1fv(a.uMatrix,this.matrix)},toObject:function(){return h(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),r.Image.filters.Convolute.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(d){var r=d.fabric||(d.fabric={}),h=r.Image.filters,p=r.util.createClass;h.Grayscale=p(h.BaseFilter,{type:"Grayscale",fragmentSource:{average:`precision highp float;
uniform sampler2D uTexture;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float average = (color.r + color.b + color.g) / 3.0;
gl_FragColor = vec4(average, average, average, color.a);
}`,lightness:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
gl_FragColor = vec4(average, average, average, col.a);
}`,luminosity:`precision highp float;
uniform sampler2D uTexture;
uniform int uMode;
varying vec2 vTexCoord;
void main() {
vec4 col = texture2D(uTexture, vTexCoord);
float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
gl_FragColor = vec4(average, average, average, col.a);
}`},mode:"average",mainParameter:"mode",applyTo2d:function(o){var l=o.imageData,a=l.data,c,g=a.length,u,m=this.mode;for(c=0;c<g;c+=4)m==="average"?u=(a[c]+a[c+1]+a[c+2])/3:m==="lightness"?u=(Math.min(a[c],a[c+1],a[c+2])+Math.max(a[c],a[c+1],a[c+2]))/2:m==="luminosity"&&(u=.21*a[c]+.72*a[c+1]+.07*a[c+2]),a[c]=u,a[c+1]=u,a[c+2]=u},retrieveShader:function(o){var l=this.type+"_"+this.mode;if(!o.programCache.hasOwnProperty(l)){var a=this.fragmentSource[this.mode];o.programCache[l]=this.createProgram(o.context,a)}return o.programCache[l]},getUniformLocations:function(o,l){return{uMode:o.getUniformLocation(l,"uMode")}},sendUniformData:function(o,l){var a=1;o.uniform1i(l.uMode,a)},isNeutralState:function(){return!1}}),r.Image.filters.Grayscale.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(d){var r=d.fabric||(d.fabric={}),h=r.Image.filters,p=r.util.createClass;h.Invert=p(h.BaseFilter,{type:"Invert",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform int uInvert;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
if (uInvert == 1) {
gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
} else {
gl_FragColor = color;
}
}`,invert:!0,mainParameter:"invert",applyTo2d:function(o){var l=o.imageData,a=l.data,c,g=a.length;for(c=0;c<g;c+=4)a[c]=255-a[c],a[c+1]=255-a[c+1],a[c+2]=255-a[c+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(o,l){return{uInvert:o.getUniformLocation(l,"uInvert")}},sendUniformData:function(o,l){o.uniform1i(l.uInvert,this.invert)}}),r.Image.filters.Invert.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(d){var r=d.fabric||(d.fabric={}),h=r.util.object.extend,p=r.Image.filters,o=r.util.createClass;p.Noise=o(p.BaseFilter,{type:"Noise",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uStepH;
uniform float uNoise;
uniform float uSeed;
varying vec2 vTexCoord;
float rand(vec2 co, float seed, float vScale) {
return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
}
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
gl_FragColor = color;
}`,mainParameter:"noise",noise:0,applyTo2d:function(l){if(this.noise!==0){var a=l.imageData,c=a.data,g,u=c.length,m=this.noise,v;for(g=0,u=c.length;g<u;g+=4)v=(.5-Math.random())*m,c[g]+=v,c[g+1]+=v,c[g+2]+=v}},getUniformLocations:function(l,a){return{uNoise:l.getUniformLocation(a,"uNoise"),uSeed:l.getUniformLocation(a,"uSeed")}},sendUniformData:function(l,a){l.uniform1f(a.uNoise,this.noise/255),l.uniform1f(a.uSeed,Math.random())},toObject:function(){return h(this.callSuper("toObject"),{noise:this.noise})}}),r.Image.filters.Noise.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(d){var r=d.fabric||(d.fabric={}),h=r.Image.filters,p=r.util.createClass;h.Pixelate=p(h.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uBlocksize;
uniform float uStepW;
uniform float uStepH;
varying vec2 vTexCoord;
void main() {
float blockW = uBlocksize * uStepW;
float blockH = uBlocksize * uStepW;
int posX = int(vTexCoord.x / blockW);
int posY = int(vTexCoord.y / blockH);
float fposX = float(posX);
float fposY = float(posY);
vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
vec4 color = texture2D(uTexture, squareCoords);
gl_FragColor = color;
}`,applyTo2d:function(o){var l=o.imageData,a=l.data,c=l.height,g=l.width,u,m,v,_,w,C,S,x,O,L,F;for(m=0;m<c;m+=this.blocksize)for(v=0;v<g;v+=this.blocksize)for(u=m*4*g+v*4,_=a[u],w=a[u+1],C=a[u+2],S=a[u+3],L=Math.min(m+this.blocksize,c),F=Math.min(v+this.blocksize,g),x=m;x<L;x++)for(O=v;O<F;O++)u=x*4*g+O*4,a[u]=_,a[u+1]=w,a[u+2]=C,a[u+3]=S},isNeutralState:function(){return this.blocksize===1},getUniformLocations:function(o,l){return{uBlocksize:o.getUniformLocation(l,"uBlocksize"),uStepW:o.getUniformLocation(l,"uStepW"),uStepH:o.getUniformLocation(l,"uStepH")}},sendUniformData:function(o,l){o.uniform1f(l.uBlocksize,this.blocksize)}}),r.Image.filters.Pixelate.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(d){var r=d.fabric||(d.fabric={}),h=r.util.object.extend,p=r.Image.filters,o=r.util.createClass;p.RemoveColor=o(p.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
gl_FragColor = texture2D(uTexture, vTexCoord);
if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
gl_FragColor.a = 0.0;
}
}`,distance:.02,useAlpha:!1,applyTo2d:function(l){var a=l.imageData,c=a.data,g,u=this.distance*255,m,v,_,w=new r.Color(this.color).getSource(),C=[w[0]-u,w[1]-u,w[2]-u],S=[w[0]+u,w[1]+u,w[2]+u];for(g=0;g<c.length;g+=4)m=c[g],v=c[g+1],_=c[g+2],m>C[0]&&v>C[1]&&_>C[2]&&m<S[0]&&v<S[1]&&_<S[2]&&(c[g+3]=0)},getUniformLocations:function(l,a){return{uLow:l.getUniformLocation(a,"uLow"),uHigh:l.getUniformLocation(a,"uHigh")}},sendUniformData:function(l,a){var c=new r.Color(this.color).getSource(),g=parseFloat(this.distance),u=[0+c[0]/255-g,0+c[1]/255-g,0+c[2]/255-g,1],m=[c[0]/255+g,c[1]/255+g,c[2]/255+g,1];l.uniform4fv(a.uLow,u),l.uniform4fv(a.uHigh,m)},toObject:function(){return h(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),r.Image.filters.RemoveColor.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(d){var r=d.fabric||(d.fabric={}),h=r.Image.filters,p=r.util.createClass,o={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var l in o)h[l]=p(h.ColorMatrix,{type:l,matrix:o[l],mainParameter:!1,colorsOnly:!0}),r.Image.filters[l].fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(d){var r=d.fabric,h=r.Image.filters,p=r.util.createClass;h.BlendColor=p(h.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,diff:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`if (uColor.r < 0.5) {
gl_FragColor.r *= 2.0 * uColor.r;
} else {
gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
}
if (uColor.g < 0.5) {
gl_FragColor.g *= 2.0 * uColor.g;
} else {
gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
}
if (uColor.b < 0.5) {
gl_FragColor.b *= 2.0 * uColor.b;
} else {
gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
}
`,tint:`gl_FragColor.rgb *= (1.0 - uColor.a);
gl_FragColor.rgb += uColor.rgb;
`},buildSource:function(o){return`precision highp float;
uniform sampler2D uTexture;
uniform vec4 uColor;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
gl_FragColor = color;
if (color.a > 0.0) {
`+this.fragmentSource[o]+`}
}`},retrieveShader:function(o){var l=this.type+"_"+this.mode,a;return o.programCache.hasOwnProperty(l)||(a=this.buildSource(this.mode),o.programCache[l]=this.createProgram(o.context,a)),o.programCache[l]},applyTo2d:function(o){var l=o.imageData,a=l.data,c=a.length,g,u,m,v,_,w,C,S=1-this.alpha;C=new r.Color(this.color).getSource(),g=C[0]*this.alpha,u=C[1]*this.alpha,m=C[2]*this.alpha;for(var x=0;x<c;x+=4)switch(v=a[x],_=a[x+1],w=a[x+2],this.mode){case"multiply":a[x]=v*g/255,a[x+1]=_*u/255,a[x+2]=w*m/255;break;case"screen":a[x]=255-(255-v)*(255-g)/255,a[x+1]=255-(255-_)*(255-u)/255,a[x+2]=255-(255-w)*(255-m)/255;break;case"add":a[x]=v+g,a[x+1]=_+u,a[x+2]=w+m;break;case"diff":case"difference":a[x]=Math.abs(v-g),a[x+1]=Math.abs(_-u),a[x+2]=Math.abs(w-m);break;case"subtract":a[x]=v-g,a[x+1]=_-u,a[x+2]=w-m;break;case"darken":a[x]=Math.min(v,g),a[x+1]=Math.min(_,u),a[x+2]=Math.min(w,m);break;case"lighten":a[x]=Math.max(v,g),a[x+1]=Math.max(_,u),a[x+2]=Math.max(w,m);break;case"overlay":a[x]=g<128?2*v*g/255:255-2*(255-v)*(255-g)/255,a[x+1]=u<128?2*_*u/255:255-2*(255-_)*(255-u)/255,a[x+2]=m<128?2*w*m/255:255-2*(255-w)*(255-m)/255;break;case"exclusion":a[x]=g+v-2*g*v/255,a[x+1]=u+_-2*u*_/255,a[x+2]=m+w-2*m*w/255;break;case"tint":a[x]=g+v*S,a[x+1]=u+_*S,a[x+2]=m+w*S}},getUniformLocations:function(o,l){return{uColor:o.getUniformLocation(l,"uColor")}},sendUniformData:function(o,l){var a=new r.Color(this.color).getSource();a[0]=this.alpha*a[0]/255,a[1]=this.alpha*a[1]/255,a[2]=this.alpha*a[2]/255,a[3]=this.alpha,o.uniform4fv(l.uColor,a)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),r.Image.filters.BlendColor.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(d){var r=d.fabric,h=r.Image.filters,p=r.util.createClass;h.BlendImage=p(h.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:`attribute vec2 aPosition;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
uniform mat3 uTransformMatrix;
void main() {
vTexCoord = aPosition;
vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
}`,fragmentSource:{multiply:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.rgba *= color2.rgba;
gl_FragColor = color;
}`,mask:`precision highp float;
uniform sampler2D uTexture;
uniform sampler2D uImage;
uniform vec4 uColor;
varying vec2 vTexCoord;
varying vec2 vTexCoord2;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec4 color2 = texture2D(uImage, vTexCoord2);
color.a = color2.a;
gl_FragColor = color;
}`},retrieveShader:function(o){var l=this.type+"_"+this.mode,a=this.fragmentSource[this.mode];return o.programCache.hasOwnProperty(l)||(o.programCache[l]=this.createProgram(o.context,a)),o.programCache[l]},applyToWebGL:function(o){var l=o.context,a=this.createTexture(o.filterBackend,this.image);this.bindAdditionalTexture(l,a,l.TEXTURE1),this.callSuper("applyToWebGL",o),this.unbindAdditionalTexture(l,l.TEXTURE1)},createTexture:function(o,l){return o.getCachedTexture(l.cacheKey,l._element)},calculateMatrix:function(){var o=this.image,l=o._element.width,a=o._element.height;return[1/o.scaleX,0,0,0,1/o.scaleY,0,-o.left/l,-o.top/a,1]},applyTo2d:function(o){var l=o.imageData,a=o.filterBackend.resources,c=l.data,g=c.length,u=l.width,m=l.height,v,_,w,C,S,x,O,L,F,Y,Q=this.image,te;a.blendImage||(a.blendImage=r.util.createCanvasElement()),F=a.blendImage,Y=F.getContext("2d"),F.width!==u||F.height!==m?(F.width=u,F.height=m):Y.clearRect(0,0,u,m),Y.setTransform(Q.scaleX,0,0,Q.scaleY,Q.left,Q.top),Y.drawImage(Q._element,0,0,u,m),te=Y.getImageData(0,0,u,m).data;for(var q=0;q<g;q+=4)switch(S=c[q],x=c[q+1],O=c[q+2],L=c[q+3],v=te[q],_=te[q+1],w=te[q+2],C=te[q+3],this.mode){case"multiply":c[q]=S*v/255,c[q+1]=x*_/255,c[q+2]=O*w/255,c[q+3]=L*C/255;break;case"mask":c[q+3]=C;break}},getUniformLocations:function(o,l){return{uTransformMatrix:o.getUniformLocation(l,"uTransformMatrix"),uImage:o.getUniformLocation(l,"uImage")}},sendUniformData:function(o,l){var a=this.calculateMatrix();o.uniform1i(l.uImage,1),o.uniformMatrix3fv(l.uTransformMatrix,!1,a)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),r.Image.filters.BlendImage.fromObject=function(o,l){r.Image.fromObject(o.image,function(a){var c=r.util.object.clone(o);c.image=a,l(new r.Image.filters.BlendImage(c))})}}(t),function(d){var r=d.fabric||(d.fabric={}),h=Math.pow,p=Math.floor,o=Math.sqrt,l=Math.abs,a=Math.round,c=Math.sin,g=Math.ceil,u=r.Image.filters,m=r.util.createClass;u.Resize=m(u.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(v,_){return{uDelta:v.getUniformLocation(_,"uDelta"),uTaps:v.getUniformLocation(_,"uTaps")}},sendUniformData:function(v,_){v.uniform2fv(_.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),v.uniform1fv(_.uTaps,this.taps)},retrieveShader:function(v){var _=this.getFilterWindow(),w=this.type+"_"+_;if(!v.programCache.hasOwnProperty(w)){var C=this.generateShader(_);v.programCache[w]=this.createProgram(v.context,C)}return v.programCache[w]},getFilterWindow:function(){var v=this.tempScale;return Math.ceil(this.lanczosLobes/v)},getTaps:function(){for(var v=this.lanczosCreate(this.lanczosLobes),_=this.tempScale,w=this.getFilterWindow(),C=new Array(w),S=1;S<=w;S++)C[S-1]=v(S*_);return C},generateShader:function(C){for(var _=new Array(C),w=this.fragmentSourceTOP,C,S=1;S<=C;S++)_[S-1]=S+".0 * uDelta";return w+="uniform float uTaps["+C+`];
`,w+=`void main() {
`,w+=`  vec4 color = texture2D(uTexture, vTexCoord);
`,w+=`  float sum = 1.0;
`,_.forEach(function(x,O){w+="  color += texture2D(uTexture, vTexCoord + "+x+") * uTaps["+O+`];
`,w+="  color += texture2D(uTexture, vTexCoord - "+x+") * uTaps["+O+`];
`,w+="  sum += 2.0 * uTaps["+O+`];
`}),w+=`  gl_FragColor = color / sum;
`,w+="}",w},fragmentSourceTOP:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
`,applyTo:function(v){v.webgl?(v.passes++,this.width=v.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=v.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),v.destinationWidth=this.dW,this._setupFrameBuffer(v),this.applyToWebGL(v),this._swapTextures(v),v.sourceWidth=v.destinationWidth,this.height=v.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),v.destinationHeight=this.dH,this._setupFrameBuffer(v),this.applyToWebGL(v),this._swapTextures(v),v.sourceHeight=v.destinationHeight):this.applyTo2d(v)},isNeutralState:function(){return this.scaleX===1&&this.scaleY===1},lanczosCreate:function(v){return function(_){if(_>=v||_<=-v)return 0;if(_<11920929e-14&&_>-11920929e-14)return 1;_*=Math.PI;var w=_/v;return c(_)/_*c(w)/w}},applyTo2d:function(v){var _=v.imageData,w=this.scaleX,C=this.scaleY;this.rcpScaleX=1/w,this.rcpScaleY=1/C;var S=_.width,x=_.height,O=a(S*w),L=a(x*C),F;this.resizeType==="sliceHack"?F=this.sliceByTwo(v,S,x,O,L):this.resizeType==="hermite"?F=this.hermiteFastResize(v,S,x,O,L):this.resizeType==="bilinear"?F=this.bilinearFiltering(v,S,x,O,L):this.resizeType==="lanczos"&&(F=this.lanczosResize(v,S,x,O,L)),v.imageData=F},sliceByTwo:function(v,_,w,C,S){var x=v.imageData,O=.5,L=!1,F=!1,Y=_*O,Q=w*O,te=r.filterBackend.resources,q,J,ie=0,se=0,U=_,T=0;for(te.sliceByTwo||(te.sliceByTwo=document.createElement("canvas")),q=te.sliceByTwo,(q.width<_*1.5||q.height<w)&&(q.width=_*1.5,q.height=w),J=q.getContext("2d"),J.clearRect(0,0,_*1.5,w),J.putImageData(x,0,0),C=p(C),S=p(S);!L||!F;)_=Y,w=Q,C<p(Y*O)?Y=p(Y*O):(Y=C,L=!0),S<p(Q*O)?Q=p(Q*O):(Q=S,F=!0),J.drawImage(q,ie,se,_,w,U,T,Y,Q),ie=U,se=T,T+=Q;return J.getImageData(ie,se,C,S)},lanczosResize:function(v,_,w,C,S){function x(A){var P,M,b,E,I,D,z,N,W,G,Z;for(T.x=(A+.5)*Q,k.x=p(T.x),P=0;P<S;P++){for(T.y=(P+.5)*te,k.y=p(T.y),I=0,D=0,z=0,N=0,W=0,M=k.x-ie;M<=k.x+ie;M++)if(!(M<0||M>=_)){G=p(1e3*l(M-T.x)),U[G]||(U[G]={});for(var B=k.y-se;B<=k.y+se;B++)B<0||B>=w||(Z=p(1e3*l(B-T.y)),U[G][Z]||(U[G][Z]=Y(o(h(G*q,2)+h(Z*J,2))/1e3)),b=U[G][Z],b>0&&(E=(B*_+M)*4,I+=b,D+=b*O[E],z+=b*O[E+1],N+=b*O[E+2],W+=b*O[E+3]))}E=(P*C+A)*4,F[E]=D/I,F[E+1]=z/I,F[E+2]=N/I,F[E+3]=W/I}return++A<C?x(A):L}var O=v.imageData.data,L=v.ctx.createImageData(C,S),F=L.data,Y=this.lanczosCreate(this.lanczosLobes),Q=this.rcpScaleX,te=this.rcpScaleY,q=2/this.rcpScaleX,J=2/this.rcpScaleY,ie=g(Q*this.lanczosLobes/2),se=g(te*this.lanczosLobes/2),U={},T={},k={};return x(0)},bilinearFiltering:function(v,_,w,C,S){var x,O,L,F,Y,Q,te,q,J,ie,se,U,T=0,k,A=this.rcpScaleX,P=this.rcpScaleY,M=4*(_-1),b=v.imageData,E=b.data,I=v.ctx.createImageData(C,S),D=I.data;for(te=0;te<S;te++)for(q=0;q<C;q++)for(Y=p(A*q),Q=p(P*te),J=A*q-Y,ie=P*te-Q,k=4*(Q*_+Y),se=0;se<4;se++)x=E[k+se],O=E[k+4+se],L=E[k+M+se],F=E[k+M+4+se],U=x*(1-J)*(1-ie)+O*J*(1-ie)+L*ie*(1-J)+F*J*ie,D[T++]=U;return I},hermiteFastResize:function(v,_,w,C,S){for(var x=this.rcpScaleX,O=this.rcpScaleY,L=g(x/2),F=g(O/2),Y=v.imageData,Q=Y.data,te=v.ctx.createImageData(C,S),q=te.data,J=0;J<S;J++)for(var ie=0;ie<C;ie++){for(var se=(ie+J*C)*4,U=0,T=0,k=0,A=0,P=0,M=0,b=0,E=(J+.5)*O,I=p(J*O);I<(J+1)*O;I++)for(var D=l(E-(I+.5))/F,z=(ie+.5)*x,N=D*D,W=p(ie*x);W<(ie+1)*x;W++){var G=l(z-(W+.5))/L,Z=o(N+G*G);Z>1&&Z<-1||(U=2*Z*Z*Z-3*Z*Z+1,U>0&&(G=4*(W+I*_),b+=U*Q[G+3],k+=U,Q[G+3]<255&&(U=U*Q[G+3]/250),A+=U*Q[G],P+=U*Q[G+1],M+=U*Q[G+2],T+=U))}q[se]=A/T,q[se+1]=P/T,q[se+2]=M/T,q[se+3]=b/k}return te},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),r.Image.filters.Resize.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(d){var r=d.fabric||(d.fabric={}),h=r.Image.filters,p=r.util.createClass;h.Contrast=p(h.BaseFilter,{type:"Contrast",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uContrast;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
gl_FragColor = color;
}`,contrast:0,mainParameter:"contrast",applyTo2d:function(o){if(this.contrast!==0){var l=o.imageData,a,g,c=l.data,g=c.length,u=Math.floor(this.contrast*255),m=259*(u+255)/(255*(259-u));for(a=0;a<g;a+=4)c[a]=m*(c[a]-128)+128,c[a+1]=m*(c[a+1]-128)+128,c[a+2]=m*(c[a+2]-128)+128}},getUniformLocations:function(o,l){return{uContrast:o.getUniformLocation(l,"uContrast")}},sendUniformData:function(o,l){o.uniform1f(l.uContrast,this.contrast)}}),r.Image.filters.Contrast.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(d){var r=d.fabric||(d.fabric={}),h=r.Image.filters,p=r.util.createClass;h.Saturation=p(h.BaseFilter,{type:"Saturation",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uSaturation;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float rgMax = max(color.r, color.g);
float rgbMax = max(rgMax, color.b);
color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
gl_FragColor = color;
}`,saturation:0,mainParameter:"saturation",applyTo2d:function(o){if(this.saturation!==0){var l=o.imageData,a=l.data,c=a.length,g=-this.saturation,u,m;for(u=0;u<c;u+=4)m=Math.max(a[u],a[u+1],a[u+2]),a[u]+=m!==a[u]?(m-a[u])*g:0,a[u+1]+=m!==a[u+1]?(m-a[u+1])*g:0,a[u+2]+=m!==a[u+2]?(m-a[u+2])*g:0}},getUniformLocations:function(o,l){return{uSaturation:o.getUniformLocation(l,"uSaturation")}},sendUniformData:function(o,l){o.uniform1f(l.uSaturation,-this.saturation)}}),r.Image.filters.Saturation.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(d){var r=d.fabric||(d.fabric={}),h=r.Image.filters,p=r.util.createClass;h.Vibrance=p(h.BaseFilter,{type:"Vibrance",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform float uVibrance;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
float max = max(color.r, max(color.g, color.b));
float avg = (color.r + color.g + color.b) / 3.0;
float amt = (abs(max - avg) * 2.0) * uVibrance;
color.r += max != color.r ? (max - color.r) * amt : 0.00;
color.g += max != color.g ? (max - color.g) * amt : 0.00;
color.b += max != color.b ? (max - color.b) * amt : 0.00;
gl_FragColor = color;
}`,vibrance:0,mainParameter:"vibrance",applyTo2d:function(o){if(this.vibrance!==0){var l=o.imageData,a=l.data,c=a.length,g=-this.vibrance,u,m,v,_;for(u=0;u<c;u+=4)m=Math.max(a[u],a[u+1],a[u+2]),v=(a[u]+a[u+1]+a[u+2])/3,_=Math.abs(m-v)*2/255*g,a[u]+=m!==a[u]?(m-a[u])*_:0,a[u+1]+=m!==a[u+1]?(m-a[u+1])*_:0,a[u+2]+=m!==a[u+2]?(m-a[u+2])*_:0}},getUniformLocations:function(o,l){return{uVibrance:o.getUniformLocation(l,"uVibrance")}},sendUniformData:function(o,l){o.uniform1f(l.uVibrance,-this.vibrance)}}),r.Image.filters.Vibrance.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(d){var r=d.fabric||(d.fabric={}),h=r.Image.filters,p=r.util.createClass;h.Blur=p(h.BaseFilter,{type:"Blur",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec2 uDelta;
varying vec2 vTexCoord;
const float nSamples = 15.0;
vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
float random(vec3 scale) {
return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
}
void main() {
vec4 color = vec4(0.0);
float total = 0.0;
float offset = random(v3offset);
for (float t = -nSamples; t <= nSamples; t++) {
float percent = (t + offset - 0.5) / nSamples;
float weight = 1.0 - abs(percent);
color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
total += weight;
}
gl_FragColor = color / total;
}`,blur:0,mainParameter:"blur",applyTo:function(o){o.webgl?(this.aspectRatio=o.sourceWidth/o.sourceHeight,o.passes++,this._setupFrameBuffer(o),this.horizontal=!0,this.applyToWebGL(o),this._swapTextures(o),this._setupFrameBuffer(o),this.horizontal=!1,this.applyToWebGL(o),this._swapTextures(o)):this.applyTo2d(o)},applyTo2d:function(o){o.imageData=this.simpleBlur(o)},simpleBlur:function(o){var l=o.filterBackend.resources,a,c,g=o.imageData.width,u=o.imageData.height;l.blurLayer1||(l.blurLayer1=r.util.createCanvasElement(),l.blurLayer2=r.util.createCanvasElement()),a=l.blurLayer1,c=l.blurLayer2,(a.width!==g||a.height!==u)&&(c.width=a.width=g,c.height=a.height=u);var m=a.getContext("2d"),v=c.getContext("2d"),_=15,w,C,S,x,O=this.blur*.06*.5;for(m.putImageData(o.imageData,0,0),v.clearRect(0,0,g,u),x=-_;x<=_;x++)w=(Math.random()-.5)/4,C=x/_,S=O*C*g+w,v.globalAlpha=1-Math.abs(C),v.drawImage(a,S,w),m.drawImage(c,0,0),v.globalAlpha=1,v.clearRect(0,0,c.width,c.height);for(x=-_;x<=_;x++)w=(Math.random()-.5)/4,C=x/_,S=O*C*u+w,v.globalAlpha=1-Math.abs(C),v.drawImage(a,w,S),m.drawImage(c,0,0),v.globalAlpha=1,v.clearRect(0,0,c.width,c.height);o.ctx.drawImage(a,0,0);var L=o.ctx.getImageData(0,0,a.width,a.height);return m.globalAlpha=1,m.clearRect(0,0,a.width,a.height),L},getUniformLocations:function(o,l){return{delta:o.getUniformLocation(l,"uDelta")}},sendUniformData:function(o,l){var a=this.chooseRightDelta();o.uniform2fv(l.delta,a)},chooseRightDelta:function(){var o=1,l=[0,0],a;return this.horizontal?this.aspectRatio>1&&(o=1/this.aspectRatio):this.aspectRatio<1&&(o=this.aspectRatio),a=o*this.blur*.12,this.horizontal?l[0]=a:l[1]=a,l}}),h.Blur.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(d){var r=d.fabric||(d.fabric={}),h=r.Image.filters,p=r.util.createClass;h.Gamma=p(h.BaseFilter,{type:"Gamma",fragmentSource:`precision highp float;
uniform sampler2D uTexture;
uniform vec3 uGamma;
varying vec2 vTexCoord;
void main() {
vec4 color = texture2D(uTexture, vTexCoord);
vec3 correction = (1.0 / uGamma);
color.r = pow(color.r, correction.r);
color.g = pow(color.g, correction.g);
color.b = pow(color.b, correction.b);
gl_FragColor = color;
gl_FragColor.rgb *= color.a;
}`,gamma:[1,1,1],mainParameter:"gamma",initialize:function(o){this.gamma=[1,1,1],h.BaseFilter.prototype.initialize.call(this,o)},applyTo2d:function(o){var l=o.imageData,a=l.data,c=this.gamma,g=a.length,u=1/c[0],m=1/c[1],v=1/c[2],_;for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),_=0,g=256;_<g;_++)this.rVals[_]=Math.pow(_/255,u)*255,this.gVals[_]=Math.pow(_/255,m)*255,this.bVals[_]=Math.pow(_/255,v)*255;for(_=0,g=a.length;_<g;_+=4)a[_]=this.rVals[a[_]],a[_+1]=this.gVals[a[_+1]],a[_+2]=this.bVals[a[_+2]]},getUniformLocations:function(o,l){return{uGamma:o.getUniformLocation(l,"uGamma")}},sendUniformData:function(o,l){o.uniform3fv(l.uGamma,this.gamma)}}),r.Image.filters.Gamma.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(d){var r=d.fabric||(d.fabric={}),h=r.Image.filters,p=r.util.createClass;h.Composed=p(h.BaseFilter,{type:"Composed",subFilters:[],initialize:function(o){this.callSuper("initialize",o),this.subFilters=this.subFilters.slice(0)},applyTo:function(o){o.passes+=this.subFilters.length-1,this.subFilters.forEach(function(l){l.applyTo(o)})},toObject:function(){return r.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(o){return o.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(o){return!o.isNeutralState()})}}),r.Image.filters.Composed.fromObject=function(o,l){var a=o.subFilters||[],c=a.map(function(u){return new r.Image.filters[u.type](u)}),g=new r.Image.filters.Composed({subFilters:c});return l&&l(g),g}}(t),function(d){var r=d.fabric||(d.fabric={}),h=r.Image.filters,p=r.util.createClass;h.HueRotation=p(h.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var o=this.rotation*Math.PI,l=r.util.cos(o),a=r.util.sin(o),c=1/3,g=Math.sqrt(c)*a,u=1-l;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=l+u/3,this.matrix[1]=c*u-g,this.matrix[2]=c*u+g,this.matrix[5]=c*u+g,this.matrix[6]=l+c*u,this.matrix[7]=c*u-g,this.matrix[10]=c*u-g,this.matrix[11]=c*u+g,this.matrix[12]=l+c*u},isNeutralState:function(o){return this.calculateMatrix(),h.BaseFilter.prototype.isNeutralState.call(this,o)},applyTo:function(o){this.calculateMatrix(),h.BaseFilter.prototype.applyTo.call(this,o)}}),r.Image.filters.HueRotation.fromObject=r.Image.filters.BaseFilter.fromObject}(t),function(d){var r=d.fabric||(d.fabric={}),h=r.util.object.clone;if(r.Text){r.warn("fabric.Text is already defined");return}var p="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");r.Text=r.util.createClass(r.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:r.Object.prototype.stateProperties.concat(p),cacheProperties:r.Object.prototype.cacheProperties.concat(p),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(o,l){this.styles=l?l.styles||{}:{},this.text=o,this.__skipDimension=!0,this.callSuper("initialize",l),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var o=this.path;o&&(o.segmentsInfo=r.util.getPathSegmentsInfo(o.path))},getMeasuringContext:function(){return r._measuringContext||(r._measuringContext=this.canvas&&this.canvas.contextCache||r.util.createCanvasElement().getContext("2d")),r._measuringContext},_splitText:function(){var o=this._splitTextIntoLines(this.text);return this.textLines=o.lines,this._textLines=o.graphemeLines,this._unwrappedTextLines=o._unwrappedLines,this._text=o.graphemeText,o},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var o,l,a,c,g,u,m,v=0,_=this._textLines.length;v<_;v++)if(!(this.textAlign!=="justify"&&(v===_-1||this.isEndOfWrapping(v)))&&(c=0,g=this._textLines[v],l=this.getLineWidth(v),l<this.width&&(m=this.textLines[v].match(this._reSpacesAndTabs)))){a=m.length,o=(this.width-l)/a;for(var w=0,C=g.length;w<=C;w++)u=this.__charBounds[v][w],this._reSpaceAndTab.test(g[w])?(u.width+=o,u.kernedWidth+=o,u.left+=c,c+=o):u.left+=c}},isEndOfWrapping:function(o){return o===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var o=this.callSuper("_getCacheCanvasDimensions"),l=this.fontSize;return o.width+=l*o.zoomX,o.height+=l*o.zoomY,o},_render:function(o){var l=this.path;l&&!l.isNotVisible()&&l._render(o),this._setTextStyles(o),this._renderTextLinesBackground(o),this._renderTextDecoration(o,"underline"),this._renderText(o),this._renderTextDecoration(o,"overline"),this._renderTextDecoration(o,"linethrough")},_renderText:function(o){this.paintFirst==="stroke"?(this._renderTextStroke(o),this._renderTextFill(o)):(this._renderTextFill(o),this._renderTextStroke(o))},_setTextStyles:function(o,l,a){if(o.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":o.textBaseline="middle";break;case"ascender":o.textBaseline="top";break;case"descender":o.textBaseline="bottom";break}o.font=this._getFontDeclaration(l,a)},calcTextWidth:function(){for(var o=this.getLineWidth(0),l=1,a=this._textLines.length;l<a;l++){var c=this.getLineWidth(l);c>o&&(o=c)}return o},_renderTextLine:function(o,l,a,c,g,u){this._renderChars(o,l,a,c,g,u)},_renderTextLinesBackground:function(o){if(!(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))){for(var l,a,c=o.fillStyle,g,u,m=this._getLeftOffset(),v=this._getTopOffset(),_=0,w=0,C,S,x=this.path,O,L=0,F=this._textLines.length;L<F;L++){if(l=this.getHeightOfLine(L),!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",L)){v+=l;continue}g=this._textLines[L],a=this._getLineLeftOffset(L),w=0,_=0,u=this.getValueOfPropertyAt(L,0,"textBackgroundColor");for(var Y=0,Q=g.length;Y<Q;Y++)C=this.__charBounds[L][Y],S=this.getValueOfPropertyAt(L,Y,"textBackgroundColor"),x?(o.save(),o.translate(C.renderLeft,C.renderTop),o.rotate(C.angle),o.fillStyle=S,S&&o.fillRect(-C.width/2,-l/this.lineHeight*(1-this._fontSizeFraction),C.width,l/this.lineHeight),o.restore()):S!==u?(O=m+a+_,this.direction==="rtl"&&(O=this.width-O-w),o.fillStyle=u,u&&o.fillRect(O,v,w,l/this.lineHeight),_=C.left,w=C.width,u=S):w+=C.kernedWidth;S&&!x&&(O=m+a+_,this.direction==="rtl"&&(O=this.width-O-w),o.fillStyle=S,o.fillRect(O,v,w,l/this.lineHeight)),v+=l}o.fillStyle=c,this._removeShadow(o)}},getFontCache:function(o){var l=o.fontFamily.toLowerCase();r.charWidthsCache[l]||(r.charWidthsCache[l]={});var a=r.charWidthsCache[l],c=o.fontStyle.toLowerCase()+"_"+(o.fontWeight+"").toLowerCase();return a[c]||(a[c]={}),a[c]},_measureChar:function(o,l,a,c){var g=this.getFontCache(l),u=this._getFontDeclaration(l),m=this._getFontDeclaration(c),v=a+o,_=u===m,w,C,S,x=l.fontSize/this.CACHE_FONT_SIZE,O;if(a&&g[a]!==void 0&&(S=g[a]),g[o]!==void 0&&(O=w=g[o]),_&&g[v]!==void 0&&(C=g[v],O=C-S),w===void 0||S===void 0||C===void 0){var L=this.getMeasuringContext();this._setTextStyles(L,l,!0)}return w===void 0&&(O=w=L.measureText(o).width,g[o]=w),S===void 0&&_&&a&&(S=L.measureText(a).width,g[a]=S),_&&C===void 0&&(C=L.measureText(v).width,g[v]=C,O=C-S),{width:w*x,kernedWidth:O*x}},getHeightOfChar:function(o,l){return this.getValueOfPropertyAt(o,l,"fontSize")},measureLine:function(o){var l=this._measureLine(o);return this.charSpacing!==0&&(l.width-=this._getWidthOfCharSpacing()),l.width<0&&(l.width=0),l},_measureLine:function(o){var l=0,a,c,g=this._textLines[o],u,m,v=0,_=new Array(g.length),w=0,C,S,x=this.path,O=this.pathSide==="right";for(this.__charBounds[o]=_,a=0;a<g.length;a++)c=g[a],m=this._getGraphemeBox(c,o,a,u),_[a]=m,l+=m.kernedWidth,u=c;if(_[a]={left:m?m.left+m.width:0,width:0,kernedWidth:0,height:this.fontSize},x){switch(S=x.segmentsInfo[x.segmentsInfo.length-1].length,C=r.util.getPointOnPath(x.path,0,x.segmentsInfo),C.x+=x.pathOffset.x,C.y+=x.pathOffset.y,this.textAlign){case"left":w=O?S-l:0;break;case"center":w=(S-l)/2;break;case"right":w=O?0:S-l;break}for(w+=this.pathStartOffset*(O?-1:1),a=O?g.length-1:0;O?a>=0:a<g.length;O?a--:a++)m=_[a],w>S?w%=S:w<0&&(w+=S),this._setGraphemeOnPath(w,m,C),w+=m.kernedWidth}return{width:l,numOfSpaces:v}},_setGraphemeOnPath:function(o,l,a){var c=o+l.kernedWidth/2,g=this.path,u=r.util.getPointOnPath(g.path,c,g.segmentsInfo);l.renderLeft=u.x-a.x,l.renderTop=u.y-a.y,l.angle=u.angle+(this.pathSide==="right"?Math.PI:0)},_getGraphemeBox:function(o,l,a,c,g){var u=this.getCompleteStyleDeclaration(l,a),m=c?this.getCompleteStyleDeclaration(l,a-1):{},v=this._measureChar(o,u,c,m),_=v.kernedWidth,w=v.width,C;this.charSpacing!==0&&(C=this._getWidthOfCharSpacing(),w+=C,_+=C);var S={width:w,left:0,height:u.fontSize,kernedWidth:_,deltaY:u.deltaY};if(a>0&&!g){var x=this.__charBounds[l][a-1];S.left=x.left+x.width+v.kernedWidth-v.width}return S},getHeightOfLine:function(o){if(this.__lineHeights[o])return this.__lineHeights[o];for(var l=this._textLines[o],a=this.getHeightOfChar(o,0),c=1,g=l.length;c<g;c++)a=Math.max(this.getHeightOfChar(o,c),a);return this.__lineHeights[o]=a*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var o,l=0,a=0,c=this._textLines.length;a<c;a++)o=this.getHeightOfLine(a),l+=a===c-1?o/this.lineHeight:o;return l},_getLeftOffset:function(){return this.direction==="ltr"?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(o,l){o.save();for(var a=0,c=this._getLeftOffset(),g=this._getTopOffset(),u=0,m=this._textLines.length;u<m;u++){var v=this.getHeightOfLine(u),_=v/this.lineHeight,w=this._getLineLeftOffset(u);this._renderTextLine(l,o,this._textLines[u],c+w,g+a+_,u),a+=v}o.restore()},_renderTextFill:function(o){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(o,"fillText")},_renderTextStroke:function(o){(!this.stroke||this.strokeWidth===0)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(o),o.save(),this._setLineDash(o,this.strokeDashArray),o.beginPath(),this._renderTextCommon(o,"strokeText"),o.closePath(),o.restore())},_renderChars:function(o,l,a,c,g,u){var m=this.getHeightOfLine(u),v=this.textAlign.indexOf("justify")!==-1,_,w,C="",S,x=0,O,L=this.path,F=!v&&this.charSpacing===0&&this.isEmptyStyles(u)&&!L,Y=this.direction==="ltr",Q=this.direction==="ltr"?1:-1,te,q=l.canvas.getAttribute("dir");if(l.save(),q!==this.direction&&(l.canvas.setAttribute("dir",Y?"ltr":"rtl"),l.direction=Y?"ltr":"rtl",l.textAlign=Y?"left":"right"),g-=m*this._fontSizeFraction/this.lineHeight,F){this._renderChar(o,l,u,0,a.join(""),c,g,m),l.restore();return}for(var J=0,ie=a.length-1;J<=ie;J++)O=J===ie||this.charSpacing||L,C+=a[J],S=this.__charBounds[u][J],x===0?(c+=Q*(S.kernedWidth-S.width),x+=S.width):x+=S.kernedWidth,v&&!O&&this._reSpaceAndTab.test(a[J])&&(O=!0),O||(_=_||this.getCompleteStyleDeclaration(u,J),w=this.getCompleteStyleDeclaration(u,J+1),O=r.util.hasStyleChanged(_,w,!1)),O&&(L?(l.save(),l.translate(S.renderLeft,S.renderTop),l.rotate(S.angle),this._renderChar(o,l,u,J,C,-x/2,0,m),l.restore()):(te=c,this._renderChar(o,l,u,J,C,te,g,m)),C="",_=w,c+=Q*x,x=0);l.restore()},_applyPatternGradientTransformText:function(o){var l=r.util.createCanvasElement(),a,c=this.width+this.strokeWidth,g=this.height+this.strokeWidth;return l.width=c,l.height=g,a=l.getContext("2d"),a.beginPath(),a.moveTo(0,0),a.lineTo(c,0),a.lineTo(c,g),a.lineTo(0,g),a.closePath(),a.translate(c/2,g/2),a.fillStyle=o.toLive(a),this._applyPatternGradientTransform(a,o),a.fill(),a.createPattern(l,"no-repeat")},handleFiller:function(o,l,a){var c,g;return a.toLive?a.gradientUnits==="percentage"||a.gradientTransform||a.patternTransform?(c=-this.width/2,g=-this.height/2,o.translate(c,g),o[l]=this._applyPatternGradientTransformText(a),{offsetX:c,offsetY:g}):(o[l]=a.toLive(o,this),this._applyPatternGradientTransform(o,a)):(o[l]=a,{offsetX:0,offsetY:0})},_setStrokeStyles:function(o,l){return o.lineWidth=l.strokeWidth,o.lineCap=this.strokeLineCap,o.lineDashOffset=this.strokeDashOffset,o.lineJoin=this.strokeLineJoin,o.miterLimit=this.strokeMiterLimit,this.handleFiller(o,"strokeStyle",l.stroke)},_setFillStyles:function(o,l){return this.handleFiller(o,"fillStyle",l.fill)},_renderChar:function(o,l,a,c,g,u,m){var v=this._getStyleDeclaration(a,c),_=this.getCompleteStyleDeclaration(a,c),w=o==="fillText"&&_.fill,C=o==="strokeText"&&_.stroke&&_.strokeWidth,S,x;!C&&!w||(l.save(),w&&(S=this._setFillStyles(l,_)),C&&(x=this._setStrokeStyles(l,_)),l.font=this._getFontDeclaration(_),v&&v.textBackgroundColor&&this._removeShadow(l),v&&v.deltaY&&(m+=v.deltaY),w&&l.fillText(g,u-S.offsetX,m-S.offsetY),C&&l.strokeText(g,u-x.offsetX,m-x.offsetY),l.restore())},setSuperscript:function(o,l){return this._setScript(o,l,this.superscript)},setSubscript:function(o,l){return this._setScript(o,l,this.subscript)},_setScript:function(o,l,a){var c=this.get2DCursorLocation(o,!0),g=this.getValueOfPropertyAt(c.lineIndex,c.charIndex,"fontSize"),u=this.getValueOfPropertyAt(c.lineIndex,c.charIndex,"deltaY"),m={fontSize:g*a.size,deltaY:u+g*a.baseline};return this.setSelectionStyles(m,o,l),this},_getLineLeftOffset:function(o){var l=this.getLineWidth(o),a=this.width-l,c=this.textAlign,g=this.direction,m,u=0,m=this.isEndOfWrapping(o);return c==="justify"||c==="justify-center"&&!m||c==="justify-right"&&!m||c==="justify-left"&&!m?0:(c==="center"&&(u=a/2),c==="right"&&(u=a),c==="justify-center"&&(u=a/2),c==="justify-right"&&(u=a),g==="rtl"&&(u-=a),u)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var o=this._forceClearCache;return o||(o=this.hasStateChanged("_dimensionAffectingProps")),o&&(this.dirty=!0,this._forceClearCache=!1),o},getLineWidth:function(o){if(this.__lineWidths[o]!==void 0)return this.__lineWidths[o];var l=this.measureLine(o),a=l.width;return this.__lineWidths[o]=a,a},_getWidthOfCharSpacing:function(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(o,l,a){var c=this._getStyleDeclaration(o,l);return c&&typeof c[a]<"u"?c[a]:this[a]},_renderTextDecoration:function(o,l){if(!(!this[l]&&!this.styleHas(l))){for(var a,c,g,u,m,v,_,w,C=this._getLeftOffset(),S=this._getTopOffset(),x,O,L,F,Y,Q,te,q,J=this.path,ie=this._getWidthOfCharSpacing(),se=this.offsets[l],U=0,T=this._textLines.length;U<T;U++){if(a=this.getHeightOfLine(U),!this[l]&&!this.styleHas(l,U)){S+=a;continue}_=this._textLines[U],Q=a/this.lineHeight,u=this._getLineLeftOffset(U),O=0,L=0,w=this.getValueOfPropertyAt(U,0,l),q=this.getValueOfPropertyAt(U,0,"fill"),x=S+Q*(1-this._fontSizeFraction),c=this.getHeightOfChar(U,0),m=this.getValueOfPropertyAt(U,0,"deltaY");for(var k=0,A=_.length;k<A;k++)if(F=this.__charBounds[U][k],Y=this.getValueOfPropertyAt(U,k,l),te=this.getValueOfPropertyAt(U,k,"fill"),g=this.getHeightOfChar(U,k),v=this.getValueOfPropertyAt(U,k,"deltaY"),J&&Y&&te)o.save(),o.fillStyle=q,o.translate(F.renderLeft,F.renderTop),o.rotate(F.angle),o.fillRect(-F.kernedWidth/2,se*g+v,F.kernedWidth,this.fontSize/15),o.restore();else if((Y!==w||te!==q||g!==c||v!==m)&&L>0){var P=C+u+O;this.direction==="rtl"&&(P=this.width-P-L),w&&q&&(o.fillStyle=q,o.fillRect(P,x+se*c+m,L,this.fontSize/15)),O=F.left,L=F.width,w=Y,q=te,c=g,m=v}else L+=F.kernedWidth;var P=C+u+O;this.direction==="rtl"&&(P=this.width-P-L),o.fillStyle=te,Y&&te&&o.fillRect(P,x+se*c+m,L-ie,this.fontSize/15),S+=a}this._removeShadow(o)}},_getFontDeclaration:function(o,l){var a=o||this,c=this.fontFamily,g=r.Text.genericFonts.indexOf(c.toLowerCase())>-1,u=c===void 0||c.indexOf("'")>-1||c.indexOf(",")>-1||c.indexOf('"')>-1||g?a.fontFamily:'"'+a.fontFamily+'"';return[r.isLikelyNode?a.fontWeight:a.fontStyle,r.isLikelyNode?a.fontStyle:a.fontWeight,l?this.CACHE_FONT_SIZE+"px":a.fontSize+"px",u].join(" ")},render:function(o){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",o)))},_splitTextIntoLines:function(o){for(var l=o.split(this._reNewline),a=new Array(l.length),c=[`
`],g=[],u=0;u<l.length;u++)a[u]=r.util.string.graphemeSplit(l[u]),g=g.concat(a[u],c);return g.pop(),{_unwrappedLines:a,lines:l,graphemeText:g,graphemeLines:a}},toObject:function(o){var l=p.concat(o),a=this.callSuper("toObject",l);return a.styles=r.util.stylesToArray(this.styles,this.text),a.path&&(a.path=this.path.toObject()),a},set:function(o,l){this.callSuper("set",o,l);var a=!1,c=!1;if(typeof o=="object")for(var g in o)g==="path"&&this.setPathInfo(),a=a||this._dimensionAffectingProps.indexOf(g)!==-1,c=c||g==="path";else a=this._dimensionAffectingProps.indexOf(o)!==-1,c=o==="path";return c&&this.setPathInfo(),a&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),r.Text.ATTRIBUTE_NAMES=r.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),r.Text.DEFAULT_SVG_FONT_SIZE=16,r.Text.fromElement=function(o,l,a){if(!o)return l(null);var c=r.parseAttributes(o,r.Text.ATTRIBUTE_NAMES),g=c.textAnchor||"left";if(a=r.util.object.extend(a?h(a):{},c),a.top=a.top||0,a.left=a.left||0,c.textDecoration){var u=c.textDecoration;u.indexOf("underline")!==-1&&(a.underline=!0),u.indexOf("overline")!==-1&&(a.overline=!0),u.indexOf("line-through")!==-1&&(a.linethrough=!0),delete a.textDecoration}"dx"in c&&(a.left+=c.dx),"dy"in c&&(a.top+=c.dy),"fontSize"in a||(a.fontSize=r.Text.DEFAULT_SVG_FONT_SIZE);var m="";"textContent"in o?m=o.textContent:"firstChild"in o&&o.firstChild!==null&&"data"in o.firstChild&&o.firstChild.data!==null&&(m=o.firstChild.data),m=m.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var v=a.strokeWidth;a.strokeWidth=0;var _=new r.Text(m,a),w=_.getScaledHeight()/_.height,C=(_.height+_.strokeWidth)*_.lineHeight-_.height,S=C*w,x=_.getScaledHeight()+S,O=0;g==="center"&&(O=_.getScaledWidth()/2),g==="right"&&(O=_.getScaledWidth()),_.set({left:_.left-O,top:_.top-(x-_.fontSize*(.07+_._fontSizeFraction))/_.lineHeight,strokeWidth:typeof v<"u"?v:1}),l(_)},r.Text.fromObject=function(o,l){var a=h(o),c=o.path;return delete a.path,r.Object._fromObject("Text",a,function(g){g.styles=r.util.stylesFromArray(o.styles,o.text),c?r.Object._fromObject("Path",c,function(u){g.set("path",u),l(g)},"path"):l(g)},"text")},r.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],r.util.createAccessors&&r.util.createAccessors(r.Text)}(t),function(){e.util.object.extend(e.Text.prototype,{isEmptyStyles:function(d){if(!this.styles||typeof d<"u"&&!this.styles[d])return!0;var r=typeof d>"u"?this.styles:{line:this.styles[d]};for(var h in r)for(var p in r[h])for(var o in r[h][p])return!1;return!0},styleHas:function(d,r){if(!this.styles||!d||d===""||typeof r<"u"&&!this.styles[r])return!1;var h=typeof r>"u"?this.styles:{0:this.styles[r]};for(var p in h)for(var o in h[p])if(typeof h[p][o][d]<"u")return!0;return!1},cleanStyle:function(d){if(!this.styles||!d||d==="")return!1;var r=this.styles,h=0,p,o,l=!0,a=0,c;for(var g in r){p=0;for(var u in r[g]){var c=r[g][u],m=c.hasOwnProperty(d);h++,m?(o?c[d]!==o&&(l=!1):o=c[d],c[d]===this[d]&&delete c[d]):l=!1,Object.keys(c).length!==0?p++:delete r[g][u]}p===0&&delete r[g]}for(var v=0;v<this._textLines.length;v++)a+=this._textLines[v].length;l&&h===a&&(this[d]=o,this.removeStyle(d))},removeStyle:function(d){if(!(!this.styles||!d||d==="")){var r=this.styles,h,p,o;for(p in r){h=r[p];for(o in h)delete h[o][d],Object.keys(h[o]).length===0&&delete h[o];Object.keys(h).length===0&&delete r[p]}}},_extendStyles:function(d,r){var h=this.get2DCursorLocation(d);this._getLineStyle(h.lineIndex)||this._setLineStyle(h.lineIndex),this._getStyleDeclaration(h.lineIndex,h.charIndex)||this._setStyleDeclaration(h.lineIndex,h.charIndex,{}),e.util.object.extend(this._getStyleDeclaration(h.lineIndex,h.charIndex),r)},get2DCursorLocation:function(d,r){typeof d>"u"&&(d=this.selectionStart);for(var h=r?this._unwrappedTextLines:this._textLines,p=h.length,o=0;o<p;o++){if(d<=h[o].length)return{lineIndex:o,charIndex:d};d-=h[o].length+this.missingNewlineOffset(o)}return{lineIndex:o-1,charIndex:h[o-1].length<d?h[o-1].length:d}},getSelectionStyles:function(d,r,h){typeof d>"u"&&(d=this.selectionStart||0),typeof r>"u"&&(r=this.selectionEnd||d);for(var p=[],o=d;o<r;o++)p.push(this.getStyleAtPosition(o,h));return p},getStyleAtPosition:function(d,r){var h=this.get2DCursorLocation(d),p=r?this.getCompleteStyleDeclaration(h.lineIndex,h.charIndex):this._getStyleDeclaration(h.lineIndex,h.charIndex);return p||{}},setSelectionStyles:function(d,r,h){typeof r>"u"&&(r=this.selectionStart||0),typeof h>"u"&&(h=this.selectionEnd||r);for(var p=r;p<h;p++)this._extendStyles(p,d);return this._forceClearCache=!0,this},_getStyleDeclaration:function(d,r){var h=this.styles&&this.styles[d];return h?h[r]:null},getCompleteStyleDeclaration:function(d,r){for(var h=this._getStyleDeclaration(d,r)||{},p={},o,l=0;l<this._styleProperties.length;l++)o=this._styleProperties[l],p[o]=typeof h[o]>"u"?this[o]:h[o];return p},_setStyleDeclaration:function(d,r,h){this.styles[d][r]=h},_deleteStyleDeclaration:function(d,r){delete this.styles[d][r]},_getLineStyle:function(d){return!!this.styles[d]},_setLineStyle:function(d){this.styles[d]={}},_deleteLineStyle:function(d){delete this.styles[d]}})}(),function(){function d(r){r.textDecoration&&(r.textDecoration.indexOf("underline")>-1&&(r.underline=!0),r.textDecoration.indexOf("line-through")>-1&&(r.linethrough=!0),r.textDecoration.indexOf("overline")>-1&&(r.overline=!0),delete r.textDecoration)}e.IText=e.util.createClass(e.Text,e.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(r,h){this.callSuper("initialize",r,h),this.initBehavior()},setSelectionStart:function(r){r=Math.max(r,0),this._updateAndFire("selectionStart",r)},setSelectionEnd:function(r){r=Math.min(r,this.text.length),this._updateAndFire("selectionEnd",r)},_updateAndFire:function(r,h){this[r]!==h&&(this._fireSelectionChanged(),this[r]=h),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(r){this.clearContextTop(),this.callSuper("render",r),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(r){this.callSuper("_render",r)},clearContextTop:function(r){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var h=this.canvas.contextTop,p=this.canvas.viewportTransform;h.save(),h.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this.transform(h),this._clearTextArea(h),r||h.restore()}},renderCursorOrSelection:function(){if(!(!this.isEditing||!this.canvas||!this.canvas.contextTop)){var r=this._getCursorBoundaries(),h=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(r,h):this.renderSelection(r,h),h.restore()}},_clearTextArea:function(r){var h=this.width+4,p=this.height+4;r.clearRect(-h/2,-p/2,h,p)},_getCursorBoundaries:function(r){typeof r>"u"&&(r=this.selectionStart);var h=this._getLeftOffset(),p=this._getTopOffset(),o=this._getCursorBoundariesOffsets(r);return{left:h,top:p,leftOffset:o.left,topOffset:o.top}},_getCursorBoundariesOffsets:function(r){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var h,p,o,l=0,a=0,c,g=this.get2DCursorLocation(r);o=g.charIndex,p=g.lineIndex;for(var u=0;u<p;u++)l+=this.getHeightOfLine(u);h=this._getLineLeftOffset(p);var m=this.__charBounds[p][o];return m&&(a=m.left),this.charSpacing!==0&&o===this._textLines[p].length&&(a-=this._getWidthOfCharSpacing()),c={top:l,left:h+(a>0?a:0)},this.direction==="rtl"&&(c.left*=-1),this.cursorOffsetCache=c,this.cursorOffsetCache},renderCursor:function(r,h){var p=this.get2DCursorLocation(),o=p.lineIndex,l=p.charIndex>0?p.charIndex-1:0,a=this.getValueOfPropertyAt(o,l,"fontSize"),c=this.scaleX*this.canvas.getZoom(),g=this.cursorWidth/c,u=r.topOffset,m=this.getValueOfPropertyAt(o,l,"deltaY");u+=(1-this._fontSizeFraction)*this.getHeightOfLine(o)/this.lineHeight-a*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(r,h),h.fillStyle=this.cursorColor||this.getValueOfPropertyAt(o,l,"fill"),h.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,h.fillRect(r.left+r.leftOffset-g/2,u+r.top+m,g,a)},renderSelection:function(r,h){for(var p=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,o=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,l=this.textAlign.indexOf("justify")!==-1,a=this.get2DCursorLocation(p),c=this.get2DCursorLocation(o),g=a.lineIndex,u=c.lineIndex,m=a.charIndex<0?0:a.charIndex,v=c.charIndex<0?0:c.charIndex,_=g;_<=u;_++){var w=this._getLineLeftOffset(_)||0,C=this.getHeightOfLine(_),S=0,x=0,O=0;if(_===g&&(x=this.__charBounds[g][m].left),_>=g&&_<u)O=l&&!this.isEndOfWrapping(_)?this.width:this.getLineWidth(_)||5;else if(_===u)if(v===0)O=this.__charBounds[u][v].left;else{var L=this._getWidthOfCharSpacing();O=this.__charBounds[u][v-1].left+this.__charBounds[u][v-1].width-L}S=C,(this.lineHeight<1||_===u&&this.lineHeight>1)&&(C/=this.lineHeight);var F=r.left+w+x,Y=O-x,Q=C,te=0;this.inCompositionMode?(h.fillStyle=this.compositionColor||"black",Q=1,te=C):h.fillStyle=this.selectionColor,this.direction==="rtl"&&(F=this.width-F-Y),h.fillRect(F,r.top+r.topOffset+te,Y,Q),r.topOffset+=S}},getCurrentCharFontSize:function(){var r=this._getCurrentCharIndex();return this.getValueOfPropertyAt(r.l,r.c,"fontSize")},getCurrentCharColor:function(){var r=this._getCurrentCharIndex();return this.getValueOfPropertyAt(r.l,r.c,"fill")},_getCurrentCharIndex:function(){var r=this.get2DCursorLocation(this.selectionStart,!0),h=r.charIndex>0?r.charIndex-1:0;return{l:r.lineIndex,c:h}}}),e.IText.fromObject=function(r,h){var p=e.util.stylesFromArray(r.styles,r.text),o=Object.assign({},r,{styles:p});if(d(o),o.styles)for(var l in o.styles)for(var a in o.styles[l])d(o.styles[l][a]);e.Object._fromObject("IText",o,h,"text")}}(),function(){var d=e.util.object.clone;e.util.object.extend(e.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var r=this;this.on("added",function(){var h=r.canvas;h&&(h._hasITextHandlers||(h._hasITextHandlers=!0,r._initCanvasHandlers(h)),h._iTextInstances=h._iTextInstances||[],h._iTextInstances.push(r))})},initRemovedHandler:function(){var r=this;this.on("removed",function(){var h=r.canvas;h&&(h._iTextInstances=h._iTextInstances||[],e.util.removeFromArray(h._iTextInstances,r),h._iTextInstances.length===0&&(h._hasITextHandlers=!1,r._removeCanvasHandlers(h)))})},_initCanvasHandlers:function(r){r._mouseUpITextHandler=function(){r._iTextInstances&&r._iTextInstances.forEach(function(h){h.__isMousedown=!1})},r.on("mouse:up",r._mouseUpITextHandler)},_removeCanvasHandlers:function(r){r.off("mouse:up",r._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(r,h,p,o){var l;return l={isAborted:!1,abort:function(){this.isAborted=!0}},r.animate("_currentCursorOpacity",h,{duration:p,onComplete:function(){l.isAborted||r[o]()},onChange:function(){r.canvas&&r.selectionStart===r.selectionEnd&&r.renderCursorOrSelection()},abort:function(){return l.isAborted}}),l},_onTickComplete:function(){var r=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){r._currentTickCompleteState=r._animateCursor(r,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(r){var h=this,p=r?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){h._tick()},p)},abortCursorAnimation:function(){var r=this._currentTickState||this._currentTickCompleteState,h=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,r&&h&&h.clearContext(h.contextTop||h.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(r){var h=0,p=r-1;if(this._reSpace.test(this._text[p]))for(;this._reSpace.test(this._text[p]);)h++,p--;for(;/\S/.test(this._text[p])&&p>-1;)h++,p--;return r-h},findWordBoundaryRight:function(r){var h=0,p=r;if(this._reSpace.test(this._text[p]))for(;this._reSpace.test(this._text[p]);)h++,p++;for(;/\S/.test(this._text[p])&&p<this._text.length;)h++,p++;return r+h},findLineBoundaryLeft:function(r){for(var h=0,p=r-1;!/\n/.test(this._text[p])&&p>-1;)h++,p--;return r-h},findLineBoundaryRight:function(r){for(var h=0,p=r;!/\n/.test(this._text[p])&&p<this._text.length;)h++,p++;return r+h},searchWordBoundary:function(r,h){for(var p=this._text,o=this._reSpace.test(p[r])?r-1:r,l=p[o],a=e.reNonWord;!a.test(l)&&o>0&&o<p.length;)o+=h,l=p[o];return a.test(l)&&(o+=h===1?0:1),o},selectWord:function(r){r=r||this.selectionStart;var h=this.searchWordBoundary(r,-1),p=this.searchWordBoundary(r,1);this.selectionStart=h,this.selectionEnd=p,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(r){r=r||this.selectionStart;var h=this.findLineBoundaryLeft(r),p=this.findLineBoundaryRight(r);return this.selectionStart=h,this.selectionEnd=p,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(r){if(!(this.isEditing||!this.editable))return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(r),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(r){r._iTextInstances&&r._iTextInstances.forEach(function(h){h.selected=!1,h.isEditing&&h.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(r){if(!(!this.__isMousedown||!this.isEditing)){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var h=this.getSelectionStartFromPointer(r.e),p=this.selectionStart,o=this.selectionEnd;(h!==this.__selectionStartOnMouseDown||p===o)&&(p===h||o===h)||(h>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=h):(this.selectionStart=h,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==p||this.selectionEnd!==o)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(r,h,p){var o=p.slice(0,r),l=e.util.string.graphemeSplit(o).length;if(r===h)return{selectionStart:l,selectionEnd:l};var a=p.slice(r,h),c=e.util.string.graphemeSplit(a).length;return{selectionStart:l,selectionEnd:l+c}},fromGraphemeToStringSelection:function(r,h,p){var o=p.slice(0,r),l=o.join("").length;if(r===h)return{selectionStart:l,selectionEnd:l};var a=p.slice(r,h),c=a.join("").length;return{selectionStart:l,selectionEnd:l+c}},_updateTextarea:function(){if(this.cursorOffsetCache={},!!this.hiddenTextarea){if(!this.inCompositionMode){var r=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=r.selectionStart,this.hiddenTextarea.selectionEnd=r.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var r=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=r.selectionEnd,this.inCompositionMode||(this.selectionStart=r.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var r=this._calcTextareaPosition();this.hiddenTextarea.style.left=r.left,this.hiddenTextarea.style.top=r.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var r=this.inCompositionMode?this.compositionStart:this.selectionStart,h=this._getCursorBoundaries(r),p=this.get2DCursorLocation(r),o=p.lineIndex,l=p.charIndex,a=this.getValueOfPropertyAt(o,l,"fontSize")*this.lineHeight,c=h.leftOffset,g=this.calcTransformMatrix(),u={x:h.left+c,y:h.top+h.topOffset+a},m=this.canvas.getRetinaScaling(),v=this.canvas.upperCanvasEl,_=v.width/m,w=v.height/m,C=_-a,S=w-a,x=v.clientWidth/_,O=v.clientHeight/w;return u=e.util.transformPoint(u,g),u=e.util.transformPoint(u,this.canvas.viewportTransform),u.x*=x,u.y*=O,u.x<0&&(u.x=0),u.x>C&&(u.x=C),u.y<0&&(u.y=0),u.y>S&&(u.y=S),u.x+=this.canvas._offset.left,u.y+=this.canvas._offset.top,{left:u.x+"px",top:u.y+"px",fontSize:a+"px",charHeight:a}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var r=this._textBeforeEdit!==this.text,h=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,h&&(h.blur&&h.blur(),h.parentNode&&h.parentNode.removeChild(h)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),r&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),r&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var r in this.styles)this._textLines[r]||delete this.styles[r]},removeStyleFromTo:function(r,h){var p=this.get2DCursorLocation(r,!0),o=this.get2DCursorLocation(h,!0),l=p.lineIndex,a=p.charIndex,c=o.lineIndex,g=o.charIndex,u,m;if(l!==c){if(this.styles[l])for(u=a;u<this._unwrappedTextLines[l].length;u++)delete this.styles[l][u];if(this.styles[c])for(u=g;u<this._unwrappedTextLines[c].length;u++)m=this.styles[c][u],m&&(this.styles[l]||(this.styles[l]={}),this.styles[l][a+u-g]=m);for(u=l+1;u<=c;u++)delete this.styles[u];this.shiftLineStyles(c,l-c)}else if(this.styles[l]){m=this.styles[l];var v=g-a,_,w;for(u=a;u<g;u++)delete m[u];for(w in this.styles[l])_=parseInt(w,10),_>=g&&(m[_-v]=m[w],delete m[w])}},shiftLineStyles:function(r,h){var p=d(this.styles);for(var o in this.styles){var l=parseInt(o,10);l>r&&(this.styles[l+h]=p[l],p[l-h]||delete this.styles[l])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(r,h,p,o){var l,a={},c=!1,g=this._unwrappedTextLines[r].length===h;p||(p=1),this.shiftLineStyles(r,p),this.styles[r]&&(l=this.styles[r][h===0?h:h-1]);for(var u in this.styles[r]){var m=parseInt(u,10);m>=h&&(c=!0,a[m-h]=this.styles[r][u],g&&h===0||delete this.styles[r][u])}var v=!1;for(c&&!g&&(this.styles[r+p]=a,v=!0),v&&p--;p>0;)o&&o[p-1]?this.styles[r+p]={0:d(o[p-1])}:l?this.styles[r+p]={0:d(l)}:delete this.styles[r+p],p--;this._forceClearCache=!0},insertCharStyleObject:function(r,h,p,o){this.styles||(this.styles={});var l=this.styles[r],a=l?d(l):{};p||(p=1);for(var c in a){var g=parseInt(c,10);g>=h&&(l[g+p]=a[g],a[g-p]||delete l[g])}if(this._forceClearCache=!0,o){for(;p--;)Object.keys(o[p]).length&&(this.styles[r]||(this.styles[r]={}),this.styles[r][h+p]=d(o[p]));return}if(l)for(var u=l[h?h-1:1];u&&p--;)this.styles[r][h+p]=d(u)},insertNewStyleBlock:function(r,h,p){for(var o=this.get2DCursorLocation(h,!0),l=[0],a=0,c=0;c<r.length;c++)r[c]===`
`?(a++,l[a]=0):l[a]++;l[0]>0&&(this.insertCharStyleObject(o.lineIndex,o.charIndex,l[0],p),p=p&&p.slice(l[0]+1)),a&&this.insertNewlineStyleObject(o.lineIndex,o.charIndex+l[0],a);for(var c=1;c<a;c++)l[c]>0?this.insertCharStyleObject(o.lineIndex+c,0,l[c],p):p&&this.styles[o.lineIndex+c]&&p[0]&&(this.styles[o.lineIndex+c][0]=p[0]),p=p&&p.slice(l[c]+1);l[c]>0&&this.insertCharStyleObject(o.lineIndex+c,0,l[c],p)},setSelectionStartEndWithShift:function(r,h,p){p<=r?(h===r?this._selectionDirection="left":this._selectionDirection==="right"&&(this._selectionDirection="left",this.selectionEnd=r),this.selectionStart=p):p>r&&p<h?this._selectionDirection==="right"?this.selectionEnd=p:this.selectionStart=p:(h===r?this._selectionDirection="right":this._selectionDirection==="left"&&(this._selectionDirection="right",this.selectionStart=h),this.selectionEnd=p)},setSelectionInBoundaries:function(){var r=this.text.length;this.selectionStart>r?this.selectionStart=r:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>r?this.selectionEnd=r:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),e.util.object.extend(e.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(d){if(this.canvas){this.__newClickTime=+new Date;var r=d.pointer;this.isTripleClick(r)&&(this.fire("tripleclick",d),this._stopEvent(d.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=r,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(d){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===d.x&&this.__lastPointer.y===d.y},_stopEvent:function(d){d.preventDefault&&d.preventDefault(),d.stopPropagation&&d.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(d){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(d.e))},tripleClickHandler:function(d){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(d.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(d){!this.canvas||!this.editable||d.e.button&&d.e.button!==1||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(d.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(d){!this.canvas||!this.editable||d.e.button&&d.e.button!==1||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(d){if(this.__isMousedown=!1,!(!this.editable||this.group||d.transform&&d.transform.actionPerformed||d.e.button&&d.e.button!==1)){if(this.canvas){var r=this.canvas._activeObject;if(r&&r!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(d.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(d){var r=this.getSelectionStartFromPointer(d),h=this.selectionStart,p=this.selectionEnd;d.shiftKey?this.setSelectionStartEndWithShift(h,p,r):(this.selectionStart=r,this.selectionEnd=r),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(d){for(var r=this.getLocalPointer(d),h=0,p=0,o=0,l=0,a=0,c,g,u=0,m=this._textLines.length;u<m&&o<=r.y;u++)o+=this.getHeightOfLine(u)*this.scaleY,a=u,u>0&&(l+=this._textLines[u-1].length+this.missingNewlineOffset(u-1));c=this._getLineLeftOffset(a),p=c*this.scaleX,g=this._textLines[a],this.direction==="rtl"&&(r.x=this.width*this.scaleX-r.x+p);for(var v=0,_=g.length;v<_&&(h=p,p+=this.__charBounds[a][v].kernedWidth*this.scaleX,p<=r.x);v++)l++;return this._getNewSelectionStartFromOffset(r,h,p,l,_)},_getNewSelectionStartFromOffset:function(d,r,h,p,o){var l=d.x-r,a=h-d.x,c=a>l||a<0?0:1,g=p+c;return this.flipX&&(g=o-g),g>this._text.length&&(g=this._text.length),g}}),e.util.object.extend(e.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=e.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var d=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+d.top+"; left: "+d.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: "+d.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):e.document.body.appendChild(this.hiddenTextarea),e.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),e.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),e.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),e.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),e.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),e.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(e.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(d){if(this.isEditing){var r=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(d.keyCode in r)this[r[d.keyCode]](d);else if(d.keyCode in this.ctrlKeysMapDown&&(d.ctrlKey||d.metaKey))this[this.ctrlKeysMapDown[d.keyCode]](d);else return;d.stopImmediatePropagation(),d.preventDefault(),d.keyCode>=33&&d.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(d){if(!this.isEditing||this._copyDone||this.inCompositionMode){this._copyDone=!1;return}if(d.keyCode in this.ctrlKeysMapUp&&(d.ctrlKey||d.metaKey))this[this.ctrlKeysMapUp[d.keyCode]](d);else return;d.stopImmediatePropagation(),d.preventDefault(),this.canvas&&this.canvas.requestRenderAll()},onInput:function(d){var r=this.fromPaste;if(this.fromPaste=!1,d&&d.stopPropagation(),!!this.isEditing){var h=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,p=this._text.length,o=h.length,l,a,c=o-p,g=this.selectionStart,u=this.selectionEnd,m=g!==u,v,_,w;if(this.hiddenTextarea.value===""){this.styles={},this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll());return}var C=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),S=g>C.selectionStart;m?(l=this._text.slice(g,u),c+=u-g):o<p&&(S?l=this._text.slice(u+c,u):l=this._text.slice(g,g-c)),a=h.slice(C.selectionEnd-c,C.selectionEnd),l&&l.length&&(a.length&&(v=this.getSelectionStyles(g,g+1,!1),v=a.map(function(){return v[0]})),m?(_=g,w=u):S?(_=u-l.length,w=u):(_=u,w=u+l.length),this.removeStyleFromTo(_,w)),a.length&&(r&&a.join("")===e.copiedText&&!e.disableStyleCopyPaste&&(v=e.copiedTextStyle),this.insertNewStyleBlock(a,g,v)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(d){this.compositionStart=d.target.selectionStart,this.compositionEnd=d.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(e.copiedText=this.getSelectedText(),e.disableStyleCopyPaste?e.copiedTextStyle=null:e.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(d){return d&&d.clipboardData||e.window.clipboardData},_getWidthBeforeCursor:function(d,r){var h=this._getLineLeftOffset(d),p;return r>0&&(p=this.__charBounds[d][r-1],h+=p.left+p.width),h},getDownCursorOffset:function(d,r){var h=this._getSelectionForOffset(d,r),p=this.get2DCursorLocation(h),o=p.lineIndex;if(o===this._textLines.length-1||d.metaKey||d.keyCode===34)return this._text.length-h;var l=p.charIndex,a=this._getWidthBeforeCursor(o,l),c=this._getIndexOnLine(o+1,a),g=this._textLines[o].slice(l);return g.length+c+1+this.missingNewlineOffset(o)},_getSelectionForOffset:function(d,r){return d.shiftKey&&this.selectionStart!==this.selectionEnd&&r?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(d,r){var h=this._getSelectionForOffset(d,r),p=this.get2DCursorLocation(h),o=p.lineIndex;if(o===0||d.metaKey||d.keyCode===33)return-h;var l=p.charIndex,a=this._getWidthBeforeCursor(o,l),c=this._getIndexOnLine(o-1,a),g=this._textLines[o].slice(0,l),u=this.missingNewlineOffset(o-1);return-this._textLines[o-1].length+c-g.length+(1-u)},_getIndexOnLine:function(d,r){for(var h=this._textLines[d],p=this._getLineLeftOffset(d),o=p,l=0,a,c,g=0,u=h.length;g<u;g++)if(a=this.__charBounds[d][g].width,o+=a,o>r){c=!0;var m=o-a,v=o,_=Math.abs(m-r),w=Math.abs(v-r);l=w<_?g:g-1;break}return c||(l=h.length-1),l},moveCursorDown:function(d){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",d)},moveCursorUp:function(d){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",d)},_moveCursorUpOrDown:function(d,r){var h="get"+d+"CursorOffset",p=this[h](r,this._selectionDirection==="right");r.shiftKey?this.moveCursorWithShift(p):this.moveCursorWithoutShift(p),p!==0&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(d){var r=this._selectionDirection==="left"?this.selectionStart+d:this.selectionEnd+d;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,r),d!==0},moveCursorWithoutShift:function(d){return d<0?(this.selectionStart+=d,this.selectionEnd=this.selectionStart):(this.selectionEnd+=d,this.selectionStart=this.selectionEnd),d!==0},moveCursorLeft:function(d){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",d)},_move:function(d,r,h){var p;if(d.altKey)p=this["findWordBoundary"+h](this[r]);else if(d.metaKey||d.keyCode===35||d.keyCode===36)p=this["findLineBoundary"+h](this[r]);else return this[r]+=h==="Left"?-1:1,!0;if(typeof p<"u"&&this[r]!==p)return this[r]=p,!0},_moveLeft:function(d,r){return this._move(d,r,"Left")},_moveRight:function(d,r){return this._move(d,r,"Right")},moveCursorLeftWithoutShift:function(d){var r=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(r=this._moveLeft(d,"selectionStart")),this.selectionEnd=this.selectionStart,r},moveCursorLeftWithShift:function(d){if(this._selectionDirection==="right"&&this.selectionStart!==this.selectionEnd)return this._moveLeft(d,"selectionEnd");if(this.selectionStart!==0)return this._selectionDirection="left",this._moveLeft(d,"selectionStart")},moveCursorRight:function(d){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",d)},_moveCursorLeftOrRight:function(d,r){var h="moveCursor"+d+"With";this._currentCursorOpacity=1,r.shiftKey?h+="Shift":h+="outShift",this[h](r)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(d){if(this._selectionDirection==="left"&&this.selectionStart!==this.selectionEnd)return this._moveRight(d,"selectionStart");if(this.selectionEnd!==this._text.length)return this._selectionDirection="right",this._moveRight(d,"selectionEnd")},moveCursorRightWithoutShift:function(d){var r=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(r=this._moveRight(d,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,r},removeChars:function(d,r){typeof r>"u"&&(r=d+1),this.removeStyleFromTo(d,r),this._text.splice(d,r-d),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(d,r,h,p){typeof p>"u"&&(p=h),p>h&&this.removeStyleFromTo(h,p);var o=e.util.string.graphemeSplit(d);this.insertNewStyleBlock(o,h,r),this._text=[].concat(this._text.slice(0,h),o,this._text.slice(p)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var d=e.util.toFixed,r=/  +/g;e.util.object.extend(e.Text.prototype,{_toSVG:function(){var h=this._getSVGLeftTopOffsets(),p=this._getSVGTextAndBg(h.textTop,h.textLeft);return this._wrapSVGTextAndBg(p)},toSVG:function(h){return this._createBaseSVGMarkup(this._toSVG(),{reviver:h,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(h){var p=!0,o=this.getSvgTextDecoration(this);return[h.textBgRects.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",o?'text-decoration="'+o+'" ':"",'style="',this.getSvgStyles(p),'"',this.addPaintOrder()," >",h.textSpans.join(""),`</text>
`]},_getSVGTextAndBg:function(h,p){var o=[],l=[],a=h,c;this._setSVGBg(l);for(var g=0,u=this._textLines.length;g<u;g++)c=this._getLineLeftOffset(g),(this.textBackgroundColor||this.styleHas("textBackgroundColor",g))&&this._setSVGTextLineBg(l,g,p+c,a),this._setSVGTextLineText(o,g,p+c,a),a+=this.getHeightOfLine(g);return{textSpans:o,textBgRects:l}},_createTextCharSpan:function(h,p,o,l){var a=h!==h.trim()||h.match(r),c=this.getSvgSpanStyles(p,a),g=c?'style="'+c+'"':"",u=p.deltaY,m="",v=e.Object.NUM_FRACTION_DIGITS;return u&&(m=' dy="'+d(u,v)+'" '),['<tspan x="',d(o,v),'" y="',d(l,v),'" ',m,g,">",e.util.string.escapeXml(h),"</tspan>"].join("")},_setSVGTextLineText:function(h,p,o,l){var a=this.getHeightOfLine(p),c=this.textAlign.indexOf("justify")!==-1,g,u,m="",v,_,w=0,C=this._textLines[p],S;l+=a*(1-this._fontSizeFraction)/this.lineHeight;for(var x=0,O=C.length-1;x<=O;x++)S=x===O||this.charSpacing,m+=C[x],v=this.__charBounds[p][x],w===0?(o+=v.kernedWidth-v.width,w+=v.width):w+=v.kernedWidth,c&&!S&&this._reSpaceAndTab.test(C[x])&&(S=!0),S||(g=g||this.getCompleteStyleDeclaration(p,x),u=this.getCompleteStyleDeclaration(p,x+1),S=e.util.hasStyleChanged(g,u,!0)),S&&(_=this._getStyleDeclaration(p,x)||{},h.push(this._createTextCharSpan(m,_,o,l)),m="",g=u,o+=w,w=0)},_pushTextBgRect:function(h,p,o,l,a,c){var g=e.Object.NUM_FRACTION_DIGITS;h.push("		<rect ",this._getFillAttributes(p),' x="',d(o,g),'" y="',d(l,g),'" width="',d(a,g),'" height="',d(c,g),`"></rect>
`)},_setSVGTextLineBg:function(h,p,o,l){for(var a=this._textLines[p],c=this.getHeightOfLine(p)/this.lineHeight,g=0,u=0,m,v,_=this.getValueOfPropertyAt(p,0,"textBackgroundColor"),w=0,C=a.length;w<C;w++)m=this.__charBounds[p][w],v=this.getValueOfPropertyAt(p,w,"textBackgroundColor"),v!==_?(_&&this._pushTextBgRect(h,_,o+u,l,g,c),u=m.left,g=m.width,_=v):g+=m.kernedWidth;v&&this._pushTextBgRect(h,v,o+u,l,g,c)},_getFillAttributes:function(h){var p=h&&typeof h=="string"?new e.Color(h):"";return!p||!p.getSource()||p.getAlpha()===1?'fill="'+h+'"':'opacity="'+p.getAlpha()+'" fill="'+p.setAlpha(1).toRgb()+'"'},_getSVGLineTopOffset:function(h){for(var p=0,o=0,l=0;l<h;l++)p+=this.getHeightOfLine(l);return o=this.getHeightOfLine(l),{lineTop:p,offset:(this._fontSizeMult-this._fontSizeFraction)*o/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(h){var p=e.Object.prototype.getSvgStyles.call(this,h);return p+" white-space: pre;"}})}(),function(d){var r=d.fabric||(d.fabric={});r.Textbox=r.util.createClass(r.IText,r.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:r.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.indexOf("justify")!==-1&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(h){for(var p=0,o=0,l=0,a={},c=0;c<h.graphemeLines.length;c++)h.graphemeText[l]===`
`&&c>0?(o=0,l++,p++):!this.splitByGrapheme&&this._reSpaceAndTab.test(h.graphemeText[l])&&c>0&&(o++,l++),a[c]={line:p,offset:o},l+=h.graphemeLines[c].length,o+=h.graphemeLines[c].length;return a},styleHas:function(h,p){if(this._styleMap&&!this.isWrapping){var o=this._styleMap[p];o&&(p=o.line)}return r.Text.prototype.styleHas.call(this,h,p)},isEmptyStyles:function(h){if(!this.styles)return!0;var p=0,o=h+1,l,a,c=!1,g=this._styleMap[h],u=this._styleMap[h+1];g&&(h=g.line,p=g.offset),u&&(o=u.line,c=o===h,l=u.offset),a=typeof h>"u"?this.styles:{line:this.styles[h]};for(var m in a)for(var v in a[m])if(v>=p&&(!c||v<l))for(var _ in a[m][v])return!1;return!0},_getStyleDeclaration:function(h,p){if(this._styleMap&&!this.isWrapping){var o=this._styleMap[h];if(!o)return null;h=o.line,p=o.offset+p}return this.callSuper("_getStyleDeclaration",h,p)},_setStyleDeclaration:function(h,p,o){var l=this._styleMap[h];h=l.line,p=l.offset+p,this.styles[h][p]=o},_deleteStyleDeclaration:function(h,p){var o=this._styleMap[h];h=o.line,p=o.offset+p,delete this.styles[h][p]},_getLineStyle:function(h){var p=this._styleMap[h];return!!this.styles[p.line]},_setLineStyle:function(h){var p=this._styleMap[h];this.styles[p.line]={}},_wrapText:function(h,p){var o=[],l;for(this.isWrapping=!0,l=0;l<h.length;l++)o=o.concat(this._wrapLine(h[l],l,p));return this.isWrapping=!1,o},_measureWord:function(h,p,o){var l=0,a,c=!0;o=o||0;for(var g=0,u=h.length;g<u;g++){var m=this._getGraphemeBox(h[g],p,g+o,a,c);l+=m.kernedWidth,a=h[g]}return l},_wrapLine:function(h,p,o,F){var a=0,c=this.splitByGrapheme,g=[],u=[],m=c?r.util.string.graphemeSplit(h):h.split(this._wordJoiners),v="",_=0,w=c?"":" ",C=0,S=0,x=0,O=!0,L=this._getWidthOfCharSpacing(),F=F||0;m.length===0&&m.push([]),o-=F;for(var Y=0;Y<m.length;Y++)v=c?m[Y]:r.util.string.graphemeSplit(m[Y]),C=this._measureWord(v,p,_),_+=v.length,a+=S+C-L,a>o&&!O?(g.push(u),u=[],a=C,O=!0):a+=L,!O&&!c&&u.push(w),u=u.concat(v),S=c?0:this._measureWord([w],p,_),_++,O=!1,C>x&&(x=C);return Y&&g.push(u),x+F>this.dynamicMinWidth&&(this.dynamicMinWidth=x-L+F),g},isEndOfWrapping:function(h){return!this._styleMap[h+1]||this._styleMap[h+1].line!==this._styleMap[h].line},missingNewlineOffset:function(h){return this.splitByGrapheme?this.isEndOfWrapping(h)?1:0:1},_splitTextIntoLines:function(h){for(var p=r.Text.prototype._splitTextIntoLines.call(this,h),o=this._wrapText(p.lines,this.width),l=new Array(o.length),a=0;a<o.length;a++)l[a]=o[a].join("");return p.lines=l,p.graphemeLines=o,p},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var h={};for(var p in this._styleMap)this._textLines[p]&&(h[this._styleMap[p].line]=1);for(var p in this.styles)h[p]||delete this.styles[p]},toObject:function(h){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(h))}}),r.Textbox.fromObject=function(h,p){var o=r.util.stylesFromArray(h.styles,h.text),l=Object.assign({},h,{styles:o});return r.Object._fromObject("Textbox",l,p,"text")}}(t),function(){var d=e.controlsUtils,r=d.scaleSkewCursorStyleHandler,h=d.scaleCursorStyleHandler,p=d.scalingEqually,o=d.scalingYOrSkewingX,l=d.scalingXOrSkewingY,a=d.scaleOrSkewActionName,c=e.Object.prototype.controls;if(c.ml=new e.Control({x:-.5,y:0,cursorStyleHandler:r,actionHandler:l,getActionName:a}),c.mr=new e.Control({x:.5,y:0,cursorStyleHandler:r,actionHandler:l,getActionName:a}),c.mb=new e.Control({x:0,y:.5,cursorStyleHandler:r,actionHandler:o,getActionName:a}),c.mt=new e.Control({x:0,y:-.5,cursorStyleHandler:r,actionHandler:o,getActionName:a}),c.tl=new e.Control({x:-.5,y:-.5,cursorStyleHandler:h,actionHandler:p}),c.tr=new e.Control({x:.5,y:-.5,cursorStyleHandler:h,actionHandler:p}),c.bl=new e.Control({x:-.5,y:.5,cursorStyleHandler:h,actionHandler:p}),c.br=new e.Control({x:.5,y:.5,cursorStyleHandler:h,actionHandler:p}),c.mtr=new e.Control({x:0,y:-.5,actionHandler:d.rotationWithSnapping,cursorStyleHandler:d.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),e.Textbox){var g=e.Textbox.prototype.controls={};g.mtr=c.mtr,g.tr=c.tr,g.br=c.br,g.tl=c.tl,g.bl=c.bl,g.mt=c.mt,g.mb=c.mb,g.mr=new e.Control({x:.5,y:0,actionHandler:d.changeWidth,cursorStyleHandler:r,actionName:"resizing"}),g.ml=new e.Control({x:-.5,y:0,actionHandler:d.changeWidth,cursorStyleHandler:r,actionName:"resizing"})}}()})(Um);const O1=ct.forwardRef((t,e)=>{const n=ct.useRef(null),i=ct.useRef();return ct.useEffect(()=>{if(n.current){const s=new Um.fabric.Canvas(n.current,{isDrawingMode:!0,selection:!1,width:300,height:300,backgroundColor:"#7a7a7a"});s.freeDrawingBrush.width=10,s.freeDrawingBrush.color="black",i.current=s,console.log(i.current),e.current=i.current}},[]),bt.jsx("canvas",{ref:n})});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},b1=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const f=t[n++];e[i++]=String.fromCharCode((s&31)<<6|f&63)}else if(s>239&&s<365){const f=t[n++],y=t[n++],d=t[n++],r=((s&7)<<18|(f&63)<<12|(y&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(r>>10)),e[i++]=String.fromCharCode(56320+(r&1023))}else{const f=t[n++],y=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(f&63)<<6|y&63)}}return e.join("")},Vm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const f=t[s],y=s+1<t.length,d=y?t[s+1]:0,r=s+2<t.length,h=r?t[s+2]:0,p=f>>2,o=(f&3)<<4|d>>4;let l=(d&15)<<2|h>>6,a=h&63;r||(a=64,y||(l=64)),i.push(n[p],n[o],n[l],n[a])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(zm(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):b1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const f=n[t.charAt(s++)],d=s<t.length?n[t.charAt(s)]:0;++s;const h=s<t.length?n[t.charAt(s)]:64;++s;const o=s<t.length?n[t.charAt(s)]:64;if(++s,f==null||d==null||h==null||o==null)throw new A1;const l=f<<2|d>>4;if(i.push(l),h!==64){const a=d<<4&240|h>>2;if(i.push(a),o!==64){const c=h<<6&192|o;i.push(c)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class A1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const P1=function(t){const e=zm(t);return Vm.encodeByteArray(e,!0)},Ko=function(t){return P1(t).replace(/\./g,"")},Hm=function(t){try{return Vm.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1=()=>I1().__FIREBASE_DEFAULTS__,R1=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},L1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Hm(t[1]);return e&&JSON.parse(e)},ba=()=>{try{return D1()||R1()||L1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},M1=t=>{var e,n;return(n=(e=ba())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},F1=t=>{const e=M1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},$m=()=>{var t;return(t=ba())===null||t===void 0?void 0:t.config},N1=t=>{var e;return(e=ba())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,f=t.sub||t.user_id;if(!f)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const y=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:f,user_id:f,firebase:{sign_in_provider:"custom",identities:{}}},t),d="";return[Ko(JSON.stringify(n)),Ko(JSON.stringify(y)),d].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function U1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(an())}function z1(){var t;const e=(t=ba())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Wm(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function V1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Xm(){try{return typeof indexedDB=="object"}catch{return!1}}function Ym(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var f;e(((f=s.error)===null||f===void 0?void 0:f.message)||"")}}catch(n){e(n)}})}function H1(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1="FirebaseError";class Kt extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=$1,Object.setPrototypeOf(this,Kt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ci.prototype.create)}}class Ci{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,f=this.errors[e],y=f?W1(f,i):"Error",d=`${this.serviceName}: ${y} (${s}).`;return new Kt(s,d,i)}}function W1(t,e){return t.replace(X1,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const X1=/\{\$([^}]+)}/g;function qo(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const f=t[s],y=e[s];if(md(f)&&md(y)){if(!qo(f,y))return!1}else if(f!==y)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function md(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Y1(t,e){const n=new G1(t,e);return n.subscribe.bind(n)}class G1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");K1(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=Tl),s.error===void 0&&(s.error=Tl),s.complete===void 0&&(s.complete=Tl);const f=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),f}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function K1(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Tl(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1=1e3,Q1=2,J1=4*60*60*1e3,Z1=.5;function vd(t,e=q1,n=Q1){const i=e*Math.pow(n,t),s=Math.round(Z1*i*(Math.random()-.5)*2);return Math.min(J1,i+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(t){return t&&t._delegate?t._delegate:t}class Nt{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new B1;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(f){if(s)return null;throw f}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nC(e))try{this.getOrInitializeService({instanceIdentifier:Jn})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const f=this.getOrInitializeService({instanceIdentifier:s});i.resolve(f)}catch{}}}}clearInstance(e=Jn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Jn){return this.instances.has(e)}getOptions(e=Jn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[f,y]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(f);i===d&&y.resolve(s)}return s}onInit(e,n){var i;const s=this.normalizeInstanceIdentifier(n),f=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;f.add(e),this.onInitCallbacks.set(s,f);const y=this.instances.get(s);return y&&e(y,s),()=>{f.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:tC(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Jn){return this.component?this.component.multipleInstances?e:Jn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tC(t){return t===Jn?void 0:t}function nC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new eC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ve||(ve={}));const rC={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},sC=ve.INFO,oC={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},aC=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=oC[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Aa{constructor(e){this.name=e,this._logLevel=sC,this._logHandler=aC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}}const lC=(t,e)=>e.some(n=>t instanceof n);let yd,_d;function uC(){return yd||(yd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cC(){return _d||(_d=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Km=new WeakMap,Hu=new WeakMap,qm=new WeakMap,xl=new WeakMap,ch=new WeakMap;function hC(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",f),t.removeEventListener("error",y)},f=()=>{n(jn(t.result)),s()},y=()=>{i(t.error),s()};t.addEventListener("success",f),t.addEventListener("error",y)});return e.then(n=>{n instanceof IDBCursor&&Km.set(n,t)}).catch(()=>{}),ch.set(e,t),e}function fC(t){if(Hu.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",f),t.removeEventListener("error",y),t.removeEventListener("abort",y)},f=()=>{n(),s()},y=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",f),t.addEventListener("error",y),t.addEventListener("abort",y)});Hu.set(t,e)}let $u={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Hu.get(t);if(e==="objectStoreNames")return t.objectStoreNames||qm.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return jn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function dC(t){$u=t($u)}function pC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(El(this),e,...n);return qm.set(i,e.sort?e.sort():[e]),jn(i)}:cC().includes(t)?function(...e){return t.apply(El(this),e),jn(Km.get(this))}:function(...e){return jn(t.apply(El(this),e))}}function gC(t){return typeof t=="function"?pC(t):(t instanceof IDBTransaction&&fC(t),lC(t,uC())?new Proxy(t,$u):t)}function jn(t){if(t instanceof IDBRequest)return hC(t);if(xl.has(t))return xl.get(t);const e=gC(t);return e!==t&&(xl.set(t,e),ch.set(e,t)),e}const El=t=>ch.get(t);function mC(t,e,{blocked:n,upgrade:i,blocking:s,terminated:f}={}){const y=indexedDB.open(t,e),d=jn(y);return i&&y.addEventListener("upgradeneeded",r=>{i(jn(y.result),r.oldVersion,r.newVersion,jn(y.transaction),r)}),n&&y.addEventListener("blocked",r=>n(r.oldVersion,r.newVersion,r)),d.then(r=>{f&&r.addEventListener("close",()=>f()),s&&r.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}const vC=["get","getKey","getAll","getAllKeys","count"],yC=["put","add","delete","clear"],kl=new Map;function wd(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(kl.get(e))return kl.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=yC.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||vC.includes(n)))return;const f=async function(y,...d){const r=this.transaction(y,s?"readwrite":"readonly");let h=r.store;return i&&(h=h.index(d.shift())),(await Promise.all([h[n](...d),s&&r.done]))[0]};return kl.set(e,f),f}dC(t=>({...t,get:(e,n,i)=>wd(e,n)||t.get(e,n,i),has:(e,n)=>!!wd(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(wC(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function wC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Wu="@firebase/app",Cd="0.9.23";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi=new Aa("@firebase/app"),CC="@firebase/app-compat",SC="@firebase/analytics-compat",TC="@firebase/analytics",xC="@firebase/app-check-compat",EC="@firebase/app-check",kC="@firebase/auth",OC="@firebase/auth-compat",bC="@firebase/database",AC="@firebase/database-compat",PC="@firebase/functions",IC="@firebase/functions-compat",DC="@firebase/installations",RC="@firebase/installations-compat",LC="@firebase/messaging",MC="@firebase/messaging-compat",FC="@firebase/performance",NC="@firebase/performance-compat",BC="@firebase/remote-config",jC="@firebase/remote-config-compat",UC="@firebase/storage",zC="@firebase/storage-compat",VC="@firebase/firestore",HC="@firebase/firestore-compat",$C="firebase",WC="10.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu="[DEFAULT]",XC={[Wu]:"fire-core",[CC]:"fire-core-compat",[TC]:"fire-analytics",[SC]:"fire-analytics-compat",[EC]:"fire-app-check",[xC]:"fire-app-check-compat",[kC]:"fire-auth",[OC]:"fire-auth-compat",[bC]:"fire-rtdb",[AC]:"fire-rtdb-compat",[PC]:"fire-fn",[IC]:"fire-fn-compat",[DC]:"fire-iid",[RC]:"fire-iid-compat",[LC]:"fire-fcm",[MC]:"fire-fcm-compat",[FC]:"fire-perf",[NC]:"fire-perf-compat",[BC]:"fire-rc",[jC]:"fire-rc-compat",[UC]:"fire-gcs",[zC]:"fire-gcs-compat",[VC]:"fire-fst",[HC]:"fire-fst-compat","fire-js":"fire-js",[$C]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=new Map,Yu=new Map;function YC(t,e){try{t.container.addComponent(e)}catch(n){gi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Gt(t){const e=t.name;if(Yu.has(e))return gi.debug(`There were multiple attempts to register component ${e}.`),!1;Yu.set(e,t);for(const n of Qo.values())YC(n,t);return!0}function Ss(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Un=new Ci("app","Firebase",GC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Nt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Un.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts=WC;function Qm(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Xu,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw Un.create("bad-app-name",{appName:String(s)});if(n||(n=$m()),!n)throw Un.create("no-options");const f=Qo.get(s);if(f){if(qo(n,f.options)&&qo(i,f.config))return f;throw Un.create("duplicate-app",{appName:s})}const y=new iC(s);for(const r of Yu.values())y.addComponent(r);const d=new KC(n,i,y);return Qo.set(s,d),d}function Jm(t=Xu){const e=Qo.get(t);if(!e&&t===Xu&&$m())return Qm();if(!e)throw Un.create("no-app",{appName:t});return e}function gt(t,e,n){var i;let s=(i=XC[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);const f=s.match(/\s|\//),y=e.match(/\s|\//);if(f||y){const d=[`Unable to register library "${s}" with version "${e}":`];f&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),f&&y&&d.push("and"),y&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gi.warn(d.join(" "));return}Gt(new Nt(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC="firebase-heartbeat-database",QC=1,os="firebase-heartbeat-store";let Ol=null;function Zm(){return Ol||(Ol=mC(qC,QC,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(os)}}}).catch(t=>{throw Un.create("idb-open",{originalErrorMessage:t.message})})),Ol}async function JC(t){try{return await(await Zm()).transaction(os).objectStore(os).get(ev(t))}catch(e){if(e instanceof Kt)gi.warn(e.message);else{const n=Un.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});gi.warn(n.message)}}}async function Sd(t,e){try{const i=(await Zm()).transaction(os,"readwrite");await i.objectStore(os).put(e,ev(t)),await i.done}catch(n){if(n instanceof Kt)gi.warn(n.message);else{const i=Un.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});gi.warn(i.message)}}}function ev(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=1024,eS=30*24*60*60*1e3;class tS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new iS(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Td();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(f=>f.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(f=>{const y=new Date(f.date).valueOf();return Date.now()-y<=eS}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Td(),{heartbeatsToSend:i,unsentEntries:s}=nS(this._heartbeatsCache.heartbeats),f=Ko(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),f}}function Td(){return new Date().toISOString().substring(0,10)}function nS(t,e=ZC){const n=[];let i=t.slice();for(const s of t){const f=n.find(y=>y.agent===s.agent);if(f){if(f.dates.push(s.date),xd(n)>e){f.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),xd(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class iS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Xm()?Ym().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await JC(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Sd(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Sd(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function xd(t){return Ko(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(t){Gt(new Nt("platform-logger",e=>new _C(e),"PRIVATE")),Gt(new Nt("heartbeat",e=>new tS(e),"PRIVATE")),gt(Wu,Cd,t),gt(Wu,Cd,"esm2017"),gt("fire-js","")}rS("");var sS="firebase",oS="10.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gt(sS,oS,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv="firebasestorage.googleapis.com",nv="storageBucket",aS=2*60*1e3,lS=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De extends Kt{constructor(e,n,i=0){super(bl(e),`Firebase Storage: ${n} (${bl(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,De.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return bl(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ie;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ie||(Ie={}));function bl(t){return"storage/"+t}function hh(){const t="An unknown error occurred, please check the error payload for server response.";return new De(Ie.UNKNOWN,t)}function uS(t){return new De(Ie.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function cS(t){return new De(Ie.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function hS(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new De(Ie.UNAUTHENTICATED,t)}function fS(){return new De(Ie.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function dS(t){return new De(Ie.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function pS(){return new De(Ie.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function gS(){return new De(Ie.CANCELED,"User canceled the upload/download.")}function mS(t){return new De(Ie.INVALID_URL,"Invalid URL '"+t+"'.")}function vS(t){return new De(Ie.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function yS(){return new De(Ie.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+nv+"' property when initializing the app?")}function _S(){return new De(Ie.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function wS(){return new De(Ie.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function CS(t){return new De(Ie.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Gu(t){return new De(Ie.INVALID_ARGUMENT,t)}function iv(){return new De(Ie.APP_DELETED,"The Firebase app was deleted.")}function SS(t){return new De(Ie.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Br(t,e){return new De(Ie.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function _r(t){throw new De(Ie.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Ct.makeFromUrl(e,n)}catch{return new Ct(e,"")}if(i.path==="")return i;throw vS(e)}static makeFromUrl(e,n){let i=null;const s="([A-Za-z0-9.\\-_]+)";function f(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const y="(/(.*))?$",d=new RegExp("^gs://"+s+y,"i"),r={bucket:1,path:3};function h(w){w.path_=decodeURIComponent(w.path)}const p="v[A-Za-z0-9_]+",o=n.replace(/[.]/g,"\\."),l="(/([^?#]*).*)?$",a=new RegExp(`^https?://${o}/${p}/b/${s}/o${l}`,"i"),c={bucket:1,path:3},g=n===tv?"(?:storage.googleapis.com|storage.cloud.google.com)":n,u="([^?#]*)",m=new RegExp(`^https?://${g}/${s}/${u}`,"i"),_=[{regex:d,indices:r,postModify:f},{regex:a,indices:c,postModify:h},{regex:m,indices:{bucket:1,path:2},postModify:h}];for(let w=0;w<_.length;w++){const C=_[w],S=C.regex.exec(e);if(S){const x=S[C.indices.bucket];let O=S[C.indices.path];O||(O=""),i=new Ct(x,O),C.postModify(i);break}}if(i==null)throw mS(e);return i}}class TS{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(t,e,n){let i=1,s=null,f=null,y=!1,d=0;function r(){return d===2}let h=!1;function p(...u){h||(h=!0,e.apply(null,u))}function o(u){s=setTimeout(()=>{s=null,t(a,r())},u)}function l(){f&&clearTimeout(f)}function a(u,...m){if(h){l();return}if(u){l(),p.call(null,u,...m);return}if(r()||y){l(),p.call(null,u,...m);return}i<64&&(i*=2);let _;d===1?(d=2,_=0):_=(i+Math.random())*1e3,o(_)}let c=!1;function g(u){c||(c=!0,l(),!h&&(s!==null?(u||(d=2),clearTimeout(s),o(0)):u||(d=1)))}return o(0),f=setTimeout(()=>{y=!0,g(!0)},n),g}function ES(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(t){return t!==void 0}function OS(t){return typeof t=="object"&&!Array.isArray(t)}function fh(t){return typeof t=="string"||t instanceof String}function Ed(t){return dh()&&t instanceof Blob}function dh(){return typeof Blob<"u"&&!z1()}function kd(t,e,n,i){if(i<e)throw Gu(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw Gu(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function rv(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const s=e(i)+"="+e(t[i]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var li;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(li||(li={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,f=e.indexOf(t)!==-1;return n||s||f}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e,n,i,s,f,y,d,r,h,p,o,l=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=s,this.successCodes_=f,this.additionalRetryCodes_=y,this.callback_=d,this.errorCallback_=r,this.timeout_=h,this.progressCallback_=p,this.connectionFactory_=o,this.retry=l,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((a,c)=>{this.resolve_=a,this.reject_=c,this.start_()})}start_(){const e=(i,s)=>{if(s){i(!1,new eo(!1,null,!0));return}const f=this.connectionFactory_();this.pendingConnection_=f;const y=d=>{const r=d.loaded,h=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(r,h)};this.progressCallback_!==null&&f.addUploadProgressListener(y),f.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&f.removeUploadProgressListener(y),this.pendingConnection_=null;const d=f.getErrorCode()===li.NO_ERROR,r=f.getStatus();if(!d||bS(r,this.additionalRetryCodes_)&&this.retry){const p=f.getErrorCode()===li.ABORT;i(!1,new eo(!1,null,p));return}const h=this.successCodes_.indexOf(r)!==-1;i(!0,new eo(h,f))})},n=(i,s)=>{const f=this.resolve_,y=this.reject_,d=s.connection;if(s.wasSuccessCode)try{const r=this.callback_(d,d.getResponse());kS(r)?f(r):f()}catch(r){y(r)}else if(d!==null){const r=hh();r.serverResponse=d.getErrorText(),this.errorCallback_?y(this.errorCallback_(d,r)):y(r)}else if(s.canceled){const r=this.appDelete_?iv():gS();y(r)}else{const r=pS();y(r)}};this.canceled_?n(!1,new eo(!1,null,!0)):this.backoffId_=xS(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&ES(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class eo{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function PS(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function IS(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function DS(t,e){e&&(t["X-Firebase-GMPID"]=e)}function RS(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function LS(t,e,n,i,s,f,y=!0){const d=rv(t.urlParams),r=t.url+d,h=Object.assign({},t.headers);return DS(h,e),PS(h,n),IS(h,f),RS(h,i),new AS(r,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,y)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function FS(...t){const e=MS();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(dh())return new Blob(t);throw new De(Ie.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function NS(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(t){if(typeof atob>"u")throw CS("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $t={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Al{constructor(e,n){this.data=e,this.contentType=n||null}}function sv(t,e){switch(t){case $t.RAW:return new Al(ov(e));case $t.BASE64:case $t.BASE64URL:return new Al(av(t,e));case $t.DATA_URL:return new Al(US(e),zS(e))}throw hh()}function ov(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const f=i,y=t.charCodeAt(++n);i=65536|(f&1023)<<10|y&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function jS(t){let e;try{e=decodeURIComponent(t)}catch{throw Br($t.DATA_URL,"Malformed data URL.")}return ov(e)}function av(t,e){switch(t){case $t.BASE64:{const s=e.indexOf("-")!==-1,f=e.indexOf("_")!==-1;if(s||f)throw Br(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case $t.BASE64URL:{const s=e.indexOf("+")!==-1,f=e.indexOf("/")!==-1;if(s||f)throw Br(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=BS(e)}catch(s){throw s.message.includes("polyfill")?s:Br(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}class lv{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Br($t.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=VS(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function US(t){const e=new lv(t);return e.base64?av($t.BASE64,e.rest):jS(e.rest)}function zS(t){return new lv(t).contentType}function VS(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,n){let i=0,s="";Ed(e)?(this.data_=e,i=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Ed(this.data_)){const i=this.data_,s=NS(i,e,n);return s===null?null:new bn(s)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new bn(i,!0)}}static getBlob(...e){if(dh()){const n=e.map(i=>i instanceof bn?i.data_:i);return new bn(FS.apply(null,n))}else{const n=e.map(y=>fh(y)?sv($t.RAW,y).data:y.data_);let i=0;n.forEach(y=>{i+=y.byteLength});const s=new Uint8Array(i);let f=0;return n.forEach(y=>{for(let d=0;d<y.length;d++)s[f++]=y[d]}),new bn(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(t){let e;try{e=JSON.parse(t)}catch{return null}return OS(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function $S(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function cv(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(t,e){return e}class nt{constructor(e,n,i,s){this.server=e,this.local=n||e,this.writable=!!i,this.xform=s||WS}}let to=null;function XS(t){return!fh(t)||t.length<2?t:cv(t)}function hv(){if(to)return to;const t=[];t.push(new nt("bucket")),t.push(new nt("generation")),t.push(new nt("metageneration")),t.push(new nt("name","fullPath",!0));function e(f,y){return XS(y)}const n=new nt("name");n.xform=e,t.push(n);function i(f,y){return y!==void 0?Number(y):y}const s=new nt("size");return s.xform=i,t.push(s),t.push(new nt("timeCreated")),t.push(new nt("updated")),t.push(new nt("md5Hash",null,!0)),t.push(new nt("cacheControl",null,!0)),t.push(new nt("contentDisposition",null,!0)),t.push(new nt("contentEncoding",null,!0)),t.push(new nt("contentLanguage",null,!0)),t.push(new nt("contentType",null,!0)),t.push(new nt("metadata","customMetadata",!0)),to=t,to}function YS(t,e){function n(){const i=t.bucket,s=t.fullPath,f=new Ct(i,s);return e._makeStorageReference(f)}Object.defineProperty(t,"ref",{get:n})}function GS(t,e,n){const i={};i.type="file";const s=n.length;for(let f=0;f<s;f++){const y=n[f];i[y.local]=y.xform(i,e[y.server])}return YS(i,t),i}function fv(t,e,n){const i=uv(e);return i===null?null:GS(t,i,n)}function KS(t,e,n,i){const s=uv(e);if(s===null||!fh(s.downloadTokens))return null;const f=s.downloadTokens;if(f.length===0)return null;const y=encodeURIComponent;return f.split(",").map(h=>{const p=t.bucket,o=t.fullPath,l="/b/"+y(p)+"/o/"+y(o),a=ph(l,n,i),c=rv({alt:"media",token:h});return a+c})[0]}function qS(t,e){const n={},i=e.length;for(let s=0;s<i;s++){const f=e[s];f.writable&&(n[f.server]=t[f.local])}return JSON.stringify(n)}class dv{constructor(e,n,i,s){this.url=e,this.method=n,this.handler=i,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(t){if(!t)throw hh()}function QS(t,e){function n(i,s){const f=fv(t,s,e);return pv(f!==null),f}return n}function JS(t,e){function n(i,s){const f=fv(t,s,e);return pv(f!==null),KS(f,s,t.host,t._protocol)}return n}function gv(t){function e(n,i){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=fS():s=hS():n.getStatus()===402?s=cS(t.bucket):n.getStatus()===403?s=dS(t.path):s=i,s.status=n.getStatus(),s.serverResponse=i.serverResponse,s}return e}function ZS(t){const e=gv(t);function n(i,s){let f=e(i,s);return i.getStatus()===404&&(f=uS(t.path)),f.serverResponse=s.serverResponse,f}return n}function eT(t,e,n){const i=e.fullServerUrl(),s=ph(i,t.host,t._protocol),f="GET",y=t.maxOperationRetryTime,d=new dv(s,f,JS(t,n),y);return d.errorHandler=ZS(e),d}function tT(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function nT(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=tT(null,e)),i}function iT(t,e,n,i,s){const f=e.bucketOnlyServerUrl(),y={"X-Goog-Upload-Protocol":"multipart"};function d(){let _="";for(let w=0;w<2;w++)_=_+Math.random().toString().slice(2);return _}const r=d();y["Content-Type"]="multipart/related; boundary="+r;const h=nT(e,i,s),p=qS(h,n),o="--"+r+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+r+`\r
Content-Type: `+h.contentType+`\r
\r
`,l=`\r
--`+r+"--",a=bn.getBlob(o,i,l);if(a===null)throw _S();const c={name:h.fullPath},g=ph(f,t.host,t._protocol),u="POST",m=t.maxUploadRetryTime,v=new dv(g,u,QS(t,n),m);return v.urlParams=c,v.headers=y,v.body=a.uploadData(),v.errorHandler=gv(e),v}class rT{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=li.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=li.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=li.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,s){if(this.sent_)throw _r("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const f in s)s.hasOwnProperty(f)&&this.xhr_.setRequestHeader(f,s[f].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw _r("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw _r("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw _r("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw _r("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class sT extends rT{initXhr(){this.xhr_.responseType="text"}}function mv(){return new sT}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,n){this._service=e,n instanceof Ct?this._location=n:this._location=Ct.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new mi(e,n)}get root(){const e=new Ct(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return cv(this._location.path)}get storage(){return this._service}get parent(){const e=HS(this._location.path);if(e===null)return null;const n=new Ct(this._location.bucket,e);return new mi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw SS(e)}}function oT(t,e,n){t._throwIfRoot("uploadBytes");const i=iT(t.storage,t._location,hv(),new bn(e,!0),n);return t.storage.makeRequestWithTokens(i,mv).then(s=>({metadata:s,ref:t}))}function aT(t,e,n=$t.RAW,i){t._throwIfRoot("uploadString");const s=sv(n,e),f=Object.assign({},i);return f.contentType==null&&s.contentType!=null&&(f.contentType=s.contentType),oT(t,s.data,f)}function lT(t){t._throwIfRoot("getDownloadURL");const e=eT(t.storage,t._location,hv());return t.storage.makeRequestWithTokens(e,mv).then(n=>{if(n===null)throw wS();return n})}function uT(t,e){const n=$S(t._location.path,e),i=new Ct(t._location.bucket,n);return new mi(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(t){return/^[A-Za-z]+:\/\//.test(t)}function hT(t,e){return new mi(t,e)}function vv(t,e){if(t instanceof gh){const n=t;if(n._bucket==null)throw yS();const i=new mi(n,n._bucket);return e!=null?vv(i,e):i}else return e!==void 0?uT(t,e):t}function fT(t,e){if(e&&cT(e)){if(t instanceof gh)return hT(t,e);throw Gu("To use ref(service, url), the first argument must be a Storage instance.")}else return vv(t,e)}function Od(t,e){const n=e==null?void 0:e[nv];return n==null?null:Ct.makeFromBucketSpec(n,t)}function dT(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=i;s&&(t._overrideAuthToken=typeof s=="string"?s:j1(s,t.app.options.projectId))}class gh{constructor(e,n,i,s,f){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=s,this._firebaseVersion=f,this._bucket=null,this._host=tv,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=aS,this._maxUploadRetryTime=lS,this._requests=new Set,s!=null?this._bucket=Ct.makeFromBucketSpec(s,this._host):this._bucket=Od(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ct.makeFromBucketSpec(this._url,e):this._bucket=Od(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){kd("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){kd("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new mi(this,e)}_makeRequest(e,n,i,s,f=!0){if(this._deleted)return new TS(iv());{const y=LS(e,this._appId,i,s,n,this._firebaseVersion,f);return this._requests.add(y),y.getPromise().then(()=>this._requests.delete(y),()=>this._requests.delete(y)),y}}async makeRequestWithTokens(e,n){const[i,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,s).getPromise()}}const bd="@firebase/storage",Ad="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv="storage";function pT(t,e,n,i){return t=un(t),aT(t,e,n,i)}function gT(t){return t=un(t),lT(t)}function mT(t,e){return t=un(t),fT(t,e)}function vT(t=Jm(),e){t=un(t);const i=Ss(t,yv).getImmediate({identifier:e}),s=F1("storage");return s&&yT(i,...s),i}function yT(t,e,n,i={}){dT(t,e,n,i)}function _T(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new gh(n,i,s,e,Ts)}function wT(){Gt(new Nt(yv,_T,"PUBLIC").setMultipleInstances(!0)),gt(bd,Ad,""),gt(bd,Ad,"esm2017")}wT();const CT=(t,e)=>e.some(n=>t instanceof n);let Pd,Id;function ST(){return Pd||(Pd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TT(){return Id||(Id=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _v=new WeakMap,Ku=new WeakMap,wv=new WeakMap,Pl=new WeakMap,mh=new WeakMap;function xT(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",f),t.removeEventListener("error",y)},f=()=>{n(zn(t.result)),s()},y=()=>{i(t.error),s()};t.addEventListener("success",f),t.addEventListener("error",y)});return e.then(n=>{n instanceof IDBCursor&&_v.set(n,t)}).catch(()=>{}),mh.set(e,t),e}function ET(t){if(Ku.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",f),t.removeEventListener("error",y),t.removeEventListener("abort",y)},f=()=>{n(),s()},y=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",f),t.addEventListener("error",y),t.addEventListener("abort",y)});Ku.set(t,e)}let qu={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ku.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function kT(t){qu=t(qu)}function OT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Il(this),e,...n);return wv.set(i,e.sort?e.sort():[e]),zn(i)}:TT().includes(t)?function(...e){return t.apply(Il(this),e),zn(_v.get(this))}:function(...e){return zn(t.apply(Il(this),e))}}function bT(t){return typeof t=="function"?OT(t):(t instanceof IDBTransaction&&ET(t),CT(t,ST())?new Proxy(t,qu):t)}function zn(t){if(t instanceof IDBRequest)return xT(t);if(Pl.has(t))return Pl.get(t);const e=bT(t);return e!==t&&(Pl.set(t,e),mh.set(e,t)),e}const Il=t=>mh.get(t);function AT(t,e,{blocked:n,upgrade:i,blocking:s,terminated:f}={}){const y=indexedDB.open(t,e),d=zn(y);return i&&y.addEventListener("upgradeneeded",r=>{i(zn(y.result),r.oldVersion,r.newVersion,zn(y.transaction))}),n&&y.addEventListener("blocked",()=>n()),d.then(r=>{f&&r.addEventListener("close",()=>f()),s&&r.addEventListener("versionchange",()=>s())}).catch(()=>{}),d}const PT=["get","getKey","getAll","getAllKeys","count"],IT=["put","add","delete","clear"],Dl=new Map;function Dd(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Dl.get(e))return Dl.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=IT.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||PT.includes(n)))return;const f=async function(y,...d){const r=this.transaction(y,s?"readwrite":"readonly");let h=r.store;return i&&(h=h.index(d.shift())),(await Promise.all([h[n](...d),s&&r.done]))[0]};return Dl.set(e,f),f}kT(t=>({...t,get:(e,n,i)=>Dd(e,n)||t.get(e,n,i),has:(e,n)=>!!Dd(e,n)||t.has(e,n)}));const Cv="@firebase/installations",vh="0.6.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv=1e4,Tv=`w:${vh}`,xv="FIS_v2",DT="https://firebaseinstallations.googleapis.com/v1",RT=60*60*1e3,LT="installations",MT="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},vi=new Ci(LT,MT,FT);function Ev(t){return t instanceof Kt&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv({projectId:t}){return`${DT}/projects/${t}/installations`}function Ov(t){return{token:t.token,requestStatus:2,expiresIn:BT(t.expiresIn),creationTime:Date.now()}}async function bv(t,e){const i=(await e.json()).error;return vi.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function Av({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function NT(t,{refreshToken:e}){const n=Av(t);return n.append("Authorization",jT(e)),n}async function Pv(t){const e=await t();return e.status>=500&&e.status<600?t():e}function BT(t){return Number(t.replace("s","000"))}function jT(t){return`${xv} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UT({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=kv(t),s=Av(t),f=e.getImmediate({optional:!0});if(f){const h=await f.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}const y={fid:n,authVersion:xv,appId:t.appId,sdkVersion:Tv},d={method:"POST",headers:s,body:JSON.stringify(y)},r=await Pv(()=>fetch(i,d));if(r.ok){const h=await r.json();return{fid:h.fid||n,registrationStatus:2,refreshToken:h.refreshToken,authToken:Ov(h.authToken)}}else throw await bv("Create Installation",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=/^[cdef][\w-]{21}$/,Qu="";function HT(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=$T(t);return VT.test(n)?n:Qu}catch{return Qu}}function $T(t){return zT(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pa(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv=new Map;function Rv(t,e){const n=Pa(t);Lv(n,e),WT(n,e)}function Lv(t,e){const n=Dv.get(t);if(n)for(const i of n)i(e)}function WT(t,e){const n=XT();n&&n.postMessage({key:t,fid:e}),YT()}let ni=null;function XT(){return!ni&&"BroadcastChannel"in self&&(ni=new BroadcastChannel("[Firebase] FID Change"),ni.onmessage=t=>{Lv(t.data.key,t.data.fid)}),ni}function YT(){Dv.size===0&&ni&&(ni.close(),ni=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="firebase-installations-database",KT=1,yi="firebase-installations-store";let Rl=null;function yh(){return Rl||(Rl=AT(GT,KT,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(yi)}}})),Rl}async function Jo(t,e){const n=Pa(t),s=(await yh()).transaction(yi,"readwrite"),f=s.objectStore(yi),y=await f.get(n);return await f.put(e,n),await s.done,(!y||y.fid!==e.fid)&&Rv(t,e.fid),e}async function Mv(t){const e=Pa(t),i=(await yh()).transaction(yi,"readwrite");await i.objectStore(yi).delete(e),await i.done}async function Ia(t,e){const n=Pa(t),s=(await yh()).transaction(yi,"readwrite"),f=s.objectStore(yi),y=await f.get(n),d=e(y);return d===void 0?await f.delete(n):await f.put(d,n),await s.done,d&&(!y||y.fid!==d.fid)&&Rv(t,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _h(t){let e;const n=await Ia(t.appConfig,i=>{const s=qT(i),f=QT(t,s);return e=f.registrationPromise,f.installationEntry});return n.fid===Qu?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function qT(t){const e=t||{fid:HT(),registrationStatus:0};return Fv(e)}function QT(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(vi.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=JT(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:ZT(t)}:{installationEntry:e}}async function JT(t,e){try{const n=await UT(t,e);return Jo(t.appConfig,n)}catch(n){throw Ev(n)&&n.customData.serverCode===409?await Mv(t.appConfig):await Jo(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function ZT(t){let e=await Rd(t.appConfig);for(;e.registrationStatus===1;)await Iv(100),e=await Rd(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await _h(t);return i||n}return e}function Rd(t){return Ia(t,e=>{if(!e)throw vi.create("installation-not-found");return Fv(e)})}function Fv(t){return ex(t)?{fid:t.fid,registrationStatus:0}:t}function ex(t){return t.registrationStatus===1&&t.registrationTime+Sv<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tx({appConfig:t,heartbeatServiceProvider:e},n){const i=nx(t,n),s=NT(t,n),f=e.getImmediate({optional:!0});if(f){const h=await f.getHeartbeatsHeader();h&&s.append("x-firebase-client",h)}const y={installation:{sdkVersion:Tv,appId:t.appId}},d={method:"POST",headers:s,body:JSON.stringify(y)},r=await Pv(()=>fetch(i,d));if(r.ok){const h=await r.json();return Ov(h)}else throw await bv("Generate Auth Token",r)}function nx(t,{fid:e}){return`${kv(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wh(t,e=!1){let n;const i=await Ia(t.appConfig,f=>{if(!Nv(f))throw vi.create("not-registered");const y=f.authToken;if(!e&&sx(y))return f;if(y.requestStatus===1)return n=ix(t,e),f;{if(!navigator.onLine)throw vi.create("app-offline");const d=ax(f);return n=rx(t,d),d}});return n?await n:i.authToken}async function ix(t,e){let n=await Ld(t.appConfig);for(;n.authToken.requestStatus===1;)await Iv(100),n=await Ld(t.appConfig);const i=n.authToken;return i.requestStatus===0?wh(t,e):i}function Ld(t){return Ia(t,e=>{if(!Nv(e))throw vi.create("not-registered");const n=e.authToken;return lx(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function rx(t,e){try{const n=await tx(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await Jo(t.appConfig,i),n}catch(n){if(Ev(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Mv(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Jo(t.appConfig,i)}throw n}}function Nv(t){return t!==void 0&&t.registrationStatus===2}function sx(t){return t.requestStatus===2&&!ox(t)}function ox(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+RT}function ax(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function lx(t){return t.requestStatus===1&&t.requestTime+Sv<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ux(t){const e=t,{installationEntry:n,registrationPromise:i}=await _h(e);return i?i.catch(console.error):wh(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cx(t,e=!1){const n=t;return await hx(n),(await wh(n,e)).token}async function hx(t){const{registrationPromise:e}=await _h(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(t){if(!t||!t.options)throw Ll("App Configuration");if(!t.name)throw Ll("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Ll(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Ll(t){return vi.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="installations",dx="installations-internal",px=t=>{const e=t.getProvider("app").getImmediate(),n=fx(e),i=Ss(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},gx=t=>{const e=t.getProvider("app").getImmediate(),n=Ss(e,Bv).getImmediate();return{getId:()=>ux(n),getToken:s=>cx(n,s)}};function mx(){Gt(new Nt(Bv,px,"PUBLIC")),Gt(new Nt(dx,gx,"PRIVATE"))}mx();gt(Cv,vh);gt(Cv,vh,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo="analytics",vx="firebase_id",yx="origin",_x=60*1e3,wx="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ch="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mt=new Aa("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},xt=new Ci("analytics","Analytics",Cx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(t){if(!t.startsWith(Ch)){const e=xt.create("invalid-gtag-resource",{gtagURL:t});return mt.warn(e.message),""}return t}function jv(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function Tx(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function xx(t,e){const n=Tx("firebase-js-sdk-policy",{createScriptURL:Sx}),i=document.createElement("script"),s=`${Ch}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}function Ex(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function kx(t,e,n,i,s,f){const y=i[s];try{if(y)await e[y];else{const r=(await jv(n)).find(h=>h.measurementId===s);r&&await e[r.appId]}}catch(d){mt.error(d)}t("config",s,f)}async function Ox(t,e,n,i,s){try{let f=[];if(s&&s.send_to){let y=s.send_to;Array.isArray(y)||(y=[y]);const d=await jv(n);for(const r of y){const h=d.find(o=>o.measurementId===r),p=h&&e[h.appId];if(p)f.push(p);else{f=[];break}}}f.length===0&&(f=Object.values(e)),await Promise.all(f),t("event",i,s||{})}catch(f){mt.error(f)}}function bx(t,e,n,i){async function s(f,...y){try{if(f==="event"){const[d,r]=y;await Ox(t,e,n,d,r)}else if(f==="config"){const[d,r]=y;await kx(t,e,n,i,d,r)}else if(f==="consent"){const[d]=y;t("consent","update",d)}else if(f==="get"){const[d,r,h]=y;t("get",d,r,h)}else if(f==="set"){const[d]=y;t("set",d)}else t(f,...y)}catch(d){mt.error(d)}}return s}function Ax(t,e,n,i,s){let f=function(...y){window[i].push(arguments)};return window[s]&&typeof window[s]=="function"&&(f=window[s]),window[s]=bx(f,t,e,n),{gtagCore:f,wrappedGtag:window[s]}}function Px(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Ch)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix=30,Dx=1e3;class Rx{constructor(e={},n=Dx){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Uv=new Rx;function Lx(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Mx(t){var e;const{appId:n,apiKey:i}=t,s={method:"GET",headers:Lx(i)},f=wx.replace("{app-id}",n),y=await fetch(f,s);if(y.status!==200&&y.status!==304){let d="";try{const r=await y.json();!((e=r.error)===null||e===void 0)&&e.message&&(d=r.error.message)}catch{}throw xt.create("config-fetch-failed",{httpStatus:y.status,responseMessage:d})}return y.json()}async function Fx(t,e=Uv,n){const{appId:i,apiKey:s,measurementId:f}=t.options;if(!i)throw xt.create("no-app-id");if(!s){if(f)return{measurementId:f,appId:i};throw xt.create("no-api-key")}const y=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new jx;return setTimeout(async()=>{d.abort()},n!==void 0?n:_x),zv({appId:i,apiKey:s,measurementId:f},y,d,e)}async function zv(t,{throttleEndTimeMillis:e,backoffCount:n},i,s=Uv){var f;const{appId:y,measurementId:d}=t;try{await Nx(i,e)}catch(r){if(d)return mt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${r==null?void 0:r.message}]`),{appId:y,measurementId:d};throw r}try{const r=await Mx(t);return s.deleteThrottleMetadata(y),r}catch(r){const h=r;if(!Bx(h)){if(s.deleteThrottleMetadata(y),d)return mt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:y,measurementId:d};throw r}const p=Number((f=h==null?void 0:h.customData)===null||f===void 0?void 0:f.httpStatus)===503?vd(n,s.intervalMillis,Ix):vd(n,s.intervalMillis),o={throttleEndTimeMillis:Date.now()+p,backoffCount:n+1};return s.setThrottleMetadata(y,o),mt.debug(`Calling attemptFetch again in ${p} millis`),zv(t,o,i,s)}}function Nx(t,e){return new Promise((n,i)=>{const s=Math.max(e-Date.now(),0),f=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(f),i(xt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Bx(t){if(!(t instanceof Kt)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class jx{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Ux(t,e,n,i,s){if(s&&s.global){t("event",n,i);return}else{const f=await e,y=Object.assign(Object.assign({},i),{send_to:f});t("event",n,y)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zx(){if(Xm())try{await Ym()}catch(t){return mt.warn(xt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return mt.warn(xt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Vx(t,e,n,i,s,f,y){var d;const r=Fx(t);r.then(a=>{n[a.measurementId]=a.appId,t.options.measurementId&&a.measurementId!==t.options.measurementId&&mt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${a.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(a=>mt.error(a)),e.push(r);const h=zx().then(a=>{if(a)return i.getId()}),[p,o]=await Promise.all([r,h]);Px(f)||xx(f,p.measurementId),s("js",new Date);const l=(d=y==null?void 0:y.config)!==null&&d!==void 0?d:{};return l[yx]="firebase",l.update=!0,o!=null&&(l[vx]=o),s("config",p.measurementId,l),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e){this.app=e}_delete(){return delete jr[this.app.options.appId],Promise.resolve()}}let jr={},Md=[];const Fd={};let Ml="dataLayer",$x="gtag",Nd,Vv,Bd=!1;function Wx(){const t=[];if(Wm()&&t.push("This is a browser extension environment."),H1()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,s)=>`(${s+1}) ${i}`).join(" "),n=xt.create("invalid-analytics-context",{errorInfo:e});mt.warn(n.message)}}function Xx(t,e,n){Wx();const i=t.options.appId;if(!i)throw xt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)mt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw xt.create("no-api-key");if(jr[i]!=null)throw xt.create("already-exists",{id:i});if(!Bd){Ex(Ml);const{wrappedGtag:f,gtagCore:y}=Ax(jr,Md,Fd,Ml,$x);Vv=f,Nd=y,Bd=!0}return jr[i]=Vx(t,Md,Fd,e,Nd,Ml,n),new Hx(t)}function Yx(t=Jm()){t=un(t);const e=Ss(t,Zo);return e.isInitialized()?e.getImmediate():Gx(t)}function Gx(t,e={}){const n=Ss(t,Zo);if(n.isInitialized()){const s=n.getImmediate();if(qo(e,n.getOptions()))return s;throw xt.create("already-initialized")}return n.initialize({options:e})}function Kx(t,e,n,i){t=un(t),Ux(Vv,jr[t.app.options.appId],e,n,i).catch(s=>mt.error(s))}const jd="@firebase/analytics",Ud="0.10.0";function qx(){Gt(new Nt(Zo,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return Xx(i,s,n)},"PUBLIC")),Gt(new Nt("analytics-internal",t,"PRIVATE")),gt(jd,Ud),gt(jd,Ud,"esm2017");function t(e){try{const n=e.getProvider(Zo).getImmediate();return{logEvent:(i,s,f)=>Kx(n,i,s,f)}}catch(n){throw xt.create("interop-component-reg-failed",{reason:n})}}}qx();function Hv(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function $v(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Qx=$v,Wv=new Ci("auth","Firebase",$v());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=new Aa("@firebase/auth");function Jx(t,...e){ea.logLevel<=ve.WARN&&ea.warn(`Auth (${Ts}): ${t}`,...e)}function xo(t,...e){ea.logLevel<=ve.ERROR&&ea.error(`Auth (${Ts}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zd(t,...e){throw Sh(t,...e)}function Xv(t,...e){return Sh(t,...e)}function Zx(t,e,n){const i=Object.assign(Object.assign({},Qx()),{[e]:n});return new Ci("auth","Firebase",i).create(e,{appName:t.name})}function Sh(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return Wv.create(t,...e)}function ye(t,e,...n){if(!t)throw Sh(e,...n)}function Ur(t){const e="INTERNAL ASSERTION FAILED: "+t;throw xo(e),new Error(e)}function ta(t,e){t||Ur(e)}function eE(){return Vd()==="http:"||Vd()==="https:"}function Vd(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eE()||Wm()||"connection"in navigator)?navigator.onLine:!0}function nE(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,n){this.shortDelay=e,this.longDelay=n,ta(n>e,"Short delay should be less than long delay!"),this.isMobile=U1()||V1()}get(){return tE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(t,e){ta(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ur("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ur("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ur("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=new xs(3e4,6e4);function Gv(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Da(t,e,n,i,s={}){return Kv(t,s,async()=>{let f={},y={};i&&(e==="GET"?y=i:f={body:JSON.stringify(i)});const d=Gm(Object.assign({key:t.config.apiKey},y)).slice(1),r=await t._getAdditionalHeaders();return r["Content-Type"]="application/json",t.languageCode&&(r["X-Firebase-Locale"]=t.languageCode),Yv.fetch()(qv(t,t.config.apiHost,n,d),Object.assign({method:e,headers:r,referrerPolicy:"no-referrer"},f))})}async function Kv(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},rE),e);try{const s=new oE(t),f=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const y=await f.json();if("needConfirmation"in y)throw no(t,"account-exists-with-different-credential",y);if(f.ok&&!("errorMessage"in y))return y;{const d=f.ok?y.errorMessage:y.error.message,[r,h]=d.split(" : ");if(r==="FEDERATED_USER_ID_ALREADY_LINKED")throw no(t,"credential-already-in-use",y);if(r==="EMAIL_EXISTS")throw no(t,"email-already-in-use",y);if(r==="USER_DISABLED")throw no(t,"user-disabled",y);const p=i[r]||r.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Zx(t,p,h);zd(t,p)}}catch(s){if(s instanceof Kt)throw s;zd(t,"network-request-failed",{message:String(s)})}}function qv(t,e,n,i){const s=`${e}${n}?${i}`;return t.config.emulator?iE(t.config,s):`${t.config.apiScheme}://${s}`}class oE{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Xv(this.auth,"network-request-failed")),sE.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function no(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=Xv(t,e,i);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aE(t,e){return Da(t,"POST","/v1/accounts:delete",e)}async function lE(t,e){return Da(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uE(t,e=!1){const n=un(t),i=await n.getIdToken(e),s=Qv(i);ye(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const f=typeof s.firebase=="object"?s.firebase:void 0,y=f==null?void 0:f.sign_in_provider;return{claims:s,token:i,authTime:zr(Fl(s.auth_time)),issuedAtTime:zr(Fl(s.iat)),expirationTime:zr(Fl(s.exp)),signInProvider:y||null,signInSecondFactor:(f==null?void 0:f.sign_in_second_factor)||null}}function Fl(t){return Number(t)*1e3}function Qv(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return xo("JWT malformed, contained fewer than 3 sections"),null;try{const s=Hm(n);return s?JSON.parse(s):(xo("Failed to decode base64 JWT payload"),null)}catch(s){return xo("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function cE(t){const e=Qv(t);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ju(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Kt&&hE(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function hE({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zr(this.lastLoginAt),this.creationTime=zr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function na(t){var e;const n=t.auth,i=await t.getIdToken(),s=await Ju(t,lE(n,{idToken:i}));ye(s==null?void 0:s.users.length,n,"internal-error");const f=s.users[0];t._notifyReloadListener(f);const y=!((e=f.providerUserInfo)===null||e===void 0)&&e.length?gE(f.providerUserInfo):[],d=pE(t.providerData,y),r=t.isAnonymous,h=!(t.email&&f.passwordHash)&&!(d!=null&&d.length),p=r?h:!1,o={uid:f.localId,displayName:f.displayName||null,photoURL:f.photoUrl||null,email:f.email||null,emailVerified:f.emailVerified||!1,phoneNumber:f.phoneNumber||null,tenantId:f.tenantId||null,providerData:d,metadata:new Jv(f.createdAt,f.lastLoginAt),isAnonymous:p};Object.assign(t,o)}async function dE(t){const e=un(t);await na(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function pE(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function gE(t){return t.map(e=>{var{providerId:n}=e,i=Hv(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mE(t,e){const n=await Kv(t,{},async()=>{const i=Gm({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:f}=t.config,y=qv(t,s,"/v1/token",`key=${f}`),d=await t._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",Yv.fetch()(y,{method:"POST",headers:d,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function vE(t,e){return Da(t,"POST","/v2/accounts:revokeToken",Gv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return ye(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:f}=await mE(e,n);this.updateTokensAndExpiration(i,s,Number(f))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:f}=n,y=new as;return i&&(ye(typeof i=="string","internal-error",{appName:e}),y.refreshToken=i),s&&(ye(typeof s=="string","internal-error",{appName:e}),y.accessToken=s),f&&(ye(typeof f=="number","internal-error",{appName:e}),y.expirationTime=f),y}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new as,this.toJSON())}_performRefresh(){return Ur("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(t,e){ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Wi{constructor(e){var{uid:n,auth:i,stsTokenManager:s}=e,f=Hv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=f.displayName||null,this.email=f.email||null,this.emailVerified=f.emailVerified||!1,this.phoneNumber=f.phoneNumber||null,this.photoURL=f.photoURL||null,this.isAnonymous=f.isAnonymous||!1,this.tenantId=f.tenantId||null,this.providerData=f.providerData?[...f.providerData]:[],this.metadata=new Jv(f.createdAt||void 0,f.lastLoginAt||void 0)}async getIdToken(e){const n=await Ju(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return uE(this,e)}reload(){return dE(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Wi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await na(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Ju(this,aE(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,s,f,y,d,r,h,p;const o=(i=n.displayName)!==null&&i!==void 0?i:void 0,l=(s=n.email)!==null&&s!==void 0?s:void 0,a=(f=n.phoneNumber)!==null&&f!==void 0?f:void 0,c=(y=n.photoURL)!==null&&y!==void 0?y:void 0,g=(d=n.tenantId)!==null&&d!==void 0?d:void 0,u=(r=n._redirectEventId)!==null&&r!==void 0?r:void 0,m=(h=n.createdAt)!==null&&h!==void 0?h:void 0,v=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:_,emailVerified:w,isAnonymous:C,providerData:S,stsTokenManager:x}=n;ye(_&&x,e,"internal-error");const O=as.fromJSON(this.name,x);ye(typeof _=="string",e,"internal-error"),Tn(o,e.name),Tn(l,e.name),ye(typeof w=="boolean",e,"internal-error"),ye(typeof C=="boolean",e,"internal-error"),Tn(a,e.name),Tn(c,e.name),Tn(g,e.name),Tn(u,e.name),Tn(m,e.name),Tn(v,e.name);const L=new Wi({uid:_,auth:e,email:l,emailVerified:w,displayName:o,isAnonymous:C,photoURL:c,phoneNumber:a,tenantId:g,stsTokenManager:O,createdAt:m,lastLoginAt:v});return S&&Array.isArray(S)&&(L.providerData=S.map(F=>Object.assign({},F))),u&&(L._redirectEventId=u),L}static async _fromIdTokenResponse(e,n,i=!1){const s=new as;s.updateFromServerResponse(n);const f=new Wi({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await na(f),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd=new Map;function ii(t){ta(t instanceof Function,"Expected a class definition");let e=Hd.get(t);return e?(ta(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Hd.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Zv.type="NONE";const $d=Zv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(t,e,n){return`firebase:${t}:${e}:${n}`}class Xi{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:f}=this.auth;this.fullUserKey=Nl(this.userKey,s.apiKey,f),this.fullPersistenceKey=Nl("persistence",s.apiKey,f),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Wi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Xi(ii($d),e,i);const s=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let f=s[0]||ii($d);const y=Nl(i,e.config.apiKey,e.name);let d=null;for(const h of n)try{const p=await h._get(y);if(p){const o=Wi._fromJSON(e,p);h!==f&&(d=o),f=h;break}}catch{}const r=s.filter(h=>h._shouldAllowMigration);return!f._shouldAllowMigration||!r.length?new Xi(f,e,i):(f=r[0],d&&await f._set(y,d.toJSON()),await Promise.all(n.map(async h=>{if(h!==f)try{await h._remove(y)}catch{}})),new Xi(f,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(CE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(TE(e))return"Blackberry";if(xE(e))return"Webos";if(_E(e))return"Safari";if((e.includes("chrome/")||wE(e))&&!e.includes("edge/"))return"Chrome";if(SE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function yE(t=an()){return/firefox\//i.test(t)}function _E(t=an()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wE(t=an()){return/crios\//i.test(t)}function CE(t=an()){return/iemobile/i.test(t)}function SE(t=an()){return/android/i.test(t)}function TE(t=an()){return/blackberry/i.test(t)}function xE(t=an()){return/webos/i.test(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(t,e=[]){let n;switch(t){case"Browser":n=Wd(an());break;case"Worker":n=`${Wd(an())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ts}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=f=>new Promise((y,d)=>{try{const r=e(f);y(r)}catch(r){d(r)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kE(t,e={}){return Da(t,"GET","/v2/passwordPolicy",Gv(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE=6;class bE{constructor(e){var n,i,s,f;const y=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=y.minPasswordLength)!==null&&n!==void 0?n:OE,y.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=y.maxPasswordLength),y.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=y.containsLowercaseCharacter),y.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=y.containsUppercaseCharacter),y.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=y.containsNumericCharacter),y.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=y.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(f=e.forceUpgradeOnSignin)!==null&&f!==void 0?f:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,s,f,y,d;const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=(n=r.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),r.isValid&&(r.isValid=(i=r.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),r.isValid&&(r.isValid=(s=r.containsLowercaseLetter)!==null&&s!==void 0?s:!0),r.isValid&&(r.isValid=(f=r.containsUppercaseLetter)!==null&&f!==void 0?f:!0),r.isValid&&(r.isValid=(y=r.containsNumericCharacter)!==null&&y!==void 0?y:!0),r.isValid&&(r.isValid=(d=r.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),r}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,f){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xd(this),this.idTokenSubscription=new Xd(this),this.beforeStateQueue=new EE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Wv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ii(n)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await Xi.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const i=await this.assertedPersistence.getCurrentUser();let s=i,f=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const y=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,d=s==null?void 0:s._redirectEventId,r=await this.tryRedirectSignIn(e);(!y||y===d)&&(r!=null&&r.user)&&(s=r.user,f=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(f)try{await this.beforeStateQueue.runMiddleware(s)}catch(y){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(y))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await na(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nE()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?un(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(ii(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kE(this),n=new bE(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ci("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await vE(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ii(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await Xi.create(this,[ii(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const f=typeof n=="function"?n:n.next.bind(n);let y=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(d,this,"internal-error"),d.then(()=>{y||f(this.currentUser)}),typeof n=="function"){const r=e.addObserver(n,i,s);return()=>{y=!0,r()}}else{const r=e.addObserver(n);return()=>{y=!0,r()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ey(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Jx(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function PE(t){return un(t)}class Xd{constructor(e){this.auth=e,this.observer=null,this.addObserver=Y1(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function IE(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ii);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}new xs(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new xs(2e3,1e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new xs(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new xs(5e3,15e3);var Yd="@firebase/auth",Gd="1.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function LE(t){Gt(new Nt("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),f=e.getProvider("app-check-internal"),{apiKey:y,authDomain:d}=i.options;ye(y&&!y.includes(":"),"invalid-api-key",{appName:i.name});const r={apiKey:y,authDomain:d,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ey(t)},h=new AE(i,s,f,r);return IE(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Gt(new Nt("auth-internal",e=>{const n=PE(e.getProvider("auth").getImmediate());return(i=>new DE(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),gt(Yd,Gd,RE(t)),gt(Yd,Gd,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME=5*60;N1("authIdTokenMaxAge");LE("Browser");var FE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ne,Th=Th||{},le=FE||self;function Ra(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Es(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function NE(t){return Object.prototype.hasOwnProperty.call(t,Bl)&&t[Bl]||(t[Bl]=++BE)}var Bl="closure_uid_"+(1e9*Math.random()>>>0),BE=0;function jE(t,e,n){return t.call.apply(t.bind,arguments)}function UE(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,i),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function Je(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Je=jE:Je=UE,Je.apply(null,arguments)}function io(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function He(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(i,s,f){for(var y=Array(arguments.length-2),d=2;d<arguments.length;d++)y[d-2]=arguments[d];return e.prototype[s].apply(i,y)}}function Yn(){this.s=this.s,this.o=this.o}var zE=0;Yn.prototype.s=!1;Yn.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),zE!=0)&&NE(this)};Yn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ty=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function xh(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function Kd(t,e){for(let n=1;n<arguments.length;n++){const i=arguments[n];if(Ra(i)){const s=t.length||0,f=i.length||0;t.length=s+f;for(let y=0;y<f;y++)t[s+y]=i[y]}else t.push(i)}}function Ze(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Ze.prototype.h=function(){this.defaultPrevented=!0};var VE=function(){if(!le.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{le.addEventListener("test",()=>{},e),le.removeEventListener("test",()=>{},e)}catch{}return t}();function ls(t){return/^[\s\xa0]*$/.test(t)}function La(){var t=le.navigator;return t&&(t=t.userAgent)?t:""}function en(t){return La().indexOf(t)!=-1}function Eh(t){return Eh[" "](t),t}Eh[" "]=function(){};function HE(t,e){var n=F2;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var $E=en("Opera"),us=en("Trident")||en("MSIE"),ny=en("Edge"),Zu=ny||us,iy=en("Gecko")&&!(La().toLowerCase().indexOf("webkit")!=-1&&!en("Edge"))&&!(en("Trident")||en("MSIE"))&&!en("Edge"),WE=La().toLowerCase().indexOf("webkit")!=-1&&!en("Edge");function ry(){var t=le.document;return t?t.documentMode:void 0}e:{var qd="",jl=function(){var t=La();if(iy)return/rv:([^\);]+)(\)|;)/.exec(t);if(ny)return/Edge\/([\d\.]+)/.exec(t);if(us)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(WE)return/WebKit\/(\S+)/.exec(t);if($E)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(jl&&(qd=jl?jl[1]:""),us){var Qd=ry();if(Qd!=null&&Qd>parseFloat(qd))break e}}le.document&&us&&ry();function cs(t,e){if(Ze.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(iy){e:{try{Eh(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:XE[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&cs.$.h.call(this)}}He(cs,Ze);var XE={2:"touch",3:"pen",4:"mouse"};cs.prototype.h=function(){cs.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ks="closure_listenable_"+(1e6*Math.random()|0),YE=0;function GE(t,e,n,i,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=s,this.key=++YE,this.fa=this.ia=!1}function Ma(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function kh(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function KE(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function sy(t){const e={};for(const n in t)e[n]=t[n];return e}const Jd="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function oy(t,e){let n,i;for(let s=1;s<arguments.length;s++){i=arguments[s];for(n in i)t[n]=i[n];for(let f=0;f<Jd.length;f++)n=Jd[f],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function Fa(t){this.src=t,this.g={},this.h=0}Fa.prototype.add=function(t,e,n,i,s){var f=t.toString();t=this.g[f],t||(t=this.g[f]=[],this.h++);var y=tc(t,e,i,s);return-1<y?(e=t[y],n||(e.ia=!1)):(e=new GE(e,this.src,f,!!i,s),e.ia=n,t.push(e)),e};function ec(t,e){var n=e.type;if(n in t.g){var i=t.g[n],s=ty(i,e),f;(f=0<=s)&&Array.prototype.splice.call(i,s,1),f&&(Ma(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function tc(t,e,n,i){for(var s=0;s<t.length;++s){var f=t[s];if(!f.fa&&f.listener==e&&f.capture==!!n&&f.la==i)return s}return-1}var Oh="closure_lm_"+(1e6*Math.random()|0),Ul={};function ay(t,e,n,i,s){if(i&&i.once)return uy(t,e,n,i,s);if(Array.isArray(e)){for(var f=0;f<e.length;f++)ay(t,e[f],n,i,s);return null}return n=Ph(n),t&&t[ks]?t.O(e,n,Es(i)?!!i.capture:!!i,s):ly(t,e,n,!1,i,s)}function ly(t,e,n,i,s,f){if(!e)throw Error("Invalid event type");var y=Es(s)?!!s.capture:!!s,d=Ah(t);if(d||(t[Oh]=d=new Fa(t)),n=d.add(e,n,i,y,f),n.proxy)return n;if(i=qE(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)VE||(s=y),s===void 0&&(s=!1),t.addEventListener(e.toString(),i,s);else if(t.attachEvent)t.attachEvent(hy(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function qE(){function t(n){return e.call(t.src,t.listener,n)}const e=QE;return t}function uy(t,e,n,i,s){if(Array.isArray(e)){for(var f=0;f<e.length;f++)uy(t,e[f],n,i,s);return null}return n=Ph(n),t&&t[ks]?t.P(e,n,Es(i)?!!i.capture:!!i,s):ly(t,e,n,!0,i,s)}function cy(t,e,n,i,s){if(Array.isArray(e))for(var f=0;f<e.length;f++)cy(t,e[f],n,i,s);else i=Es(i)?!!i.capture:!!i,n=Ph(n),t&&t[ks]?(t=t.i,e=String(e).toString(),e in t.g&&(f=t.g[e],n=tc(f,n,i,s),-1<n&&(Ma(f[n]),Array.prototype.splice.call(f,n,1),f.length==0&&(delete t.g[e],t.h--)))):t&&(t=Ah(t))&&(e=t.g[e.toString()],t=-1,e&&(t=tc(e,n,i,s)),(n=-1<t?e[t]:null)&&bh(n))}function bh(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[ks])ec(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(hy(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=Ah(e))?(ec(n,t),n.h==0&&(n.src=null,e[Oh]=null)):Ma(t)}}}function hy(t){return t in Ul?Ul[t]:Ul[t]="on"+t}function QE(t,e){if(t.fa)t=!0;else{e=new cs(e,this);var n=t.listener,i=t.la||t.src;t.ia&&bh(t),t=n.call(i,e)}return t}function Ah(t){return t=t[Oh],t instanceof Fa?t:null}var zl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ph(t){return typeof t=="function"?t:(t[zl]||(t[zl]=function(e){return t.handleEvent(e)}),t[zl])}function Ve(){Yn.call(this),this.i=new Fa(this),this.S=this,this.J=null}He(Ve,Yn);Ve.prototype[ks]=!0;Ve.prototype.removeEventListener=function(t,e,n,i){cy(this,t,e,n,i)};function Ye(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,typeof e=="string")e=new Ze(e,t);else if(e instanceof Ze)e.target=e.target||t;else{var s=e;e=new Ze(i,t),oy(e,s)}if(s=!0,n)for(var f=n.length-1;0<=f;f--){var y=e.g=n[f];s=ro(y,i,!0,e)&&s}if(y=e.g=t,s=ro(y,i,!0,e)&&s,s=ro(y,i,!1,e)&&s,n)for(f=0;f<n.length;f++)y=e.g=n[f],s=ro(y,i,!1,e)&&s}Ve.prototype.N=function(){if(Ve.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)Ma(n[i]);delete t.g[e],t.h--}}this.J=null};Ve.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)};Ve.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};function ro(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,f=0;f<e.length;++f){var y=e[f];if(y&&!y.fa&&y.capture==n){var d=y.listener,r=y.la||y.src;y.ia&&ec(t.i,y),s=d.call(r,i)!==!1&&s}}return s&&!i.defaultPrevented}var Ih=le.JSON.stringify;class JE{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function ZE(){var t=Dh;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class e2{constructor(){this.h=this.g=null}add(e,n){const i=fy.get();i.set(e,n),this.h?this.h.next=i:this.g=i,this.h=i}}var fy=new JE(()=>new t2,t=>t.reset());class t2{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function n2(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function i2(t){le.setTimeout(()=>{throw t},0)}let hs,fs=!1,Dh=new e2,dy=()=>{const t=le.Promise.resolve(void 0);hs=()=>{t.then(r2)}};var r2=()=>{for(var t;t=ZE();){try{t.h.call(t.g)}catch(n){i2(n)}var e=fy;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}fs=!1};function Na(t,e){Ve.call(this),this.h=t||1,this.g=e||le,this.j=Je(this.qb,this),this.l=Date.now()}He(Na,Ve);ne=Na.prototype;ne.ga=!1;ne.T=null;ne.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ye(this,"tick"),this.ga&&(Rh(this),this.start()))}};ne.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Rh(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}ne.N=function(){Na.$.N.call(this),Rh(this),delete this.g};function Lh(t,e,n){if(typeof t=="function")n&&(t=Je(t,n));else if(t&&typeof t.handleEvent=="function")t=Je(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:le.setTimeout(t,e||0)}function py(t){t.g=Lh(()=>{t.g=null,t.i&&(t.i=!1,py(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class s2 extends Yn{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:py(this)}N(){super.N(),this.g&&(le.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ds(t){Yn.call(this),this.h=t,this.g={}}He(ds,Yn);var Zd=[];function gy(t,e,n,i){Array.isArray(n)||(n&&(Zd[0]=n.toString()),n=Zd);for(var s=0;s<n.length;s++){var f=ay(e,n[s],i||t.handleEvent,!1,t.h||t);if(!f)break;t.g[f.key]=f}}function my(t){kh(t.g,function(e,n){this.g.hasOwnProperty(n)&&bh(e)},t),t.g={}}ds.prototype.N=function(){ds.$.N.call(this),my(this)};ds.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Ba(){this.g=!0}Ba.prototype.Ea=function(){this.g=!1};function o2(t,e,n,i,s,f){t.info(function(){if(t.g)if(f)for(var y="",d=f.split("&"),r=0;r<d.length;r++){var h=d[r].split("=");if(1<h.length){var p=h[0];h=h[1];var o=p.split("_");y=2<=o.length&&o[1]=="type"?y+(p+"="+h+"&"):y+(p+"=redacted&")}}else y=null;else y=f;return"XMLHTTP REQ ("+i+") [attempt "+s+"]: "+e+`
`+n+`
`+y})}function a2(t,e,n,i,s,f,y){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+s+"]: "+e+`
`+n+`
`+f+" "+y})}function Ni(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+u2(t,n)+(i?" "+i:"")})}function l2(t,e){t.info(function(){return"TIMEOUT: "+e})}Ba.prototype.info=function(){};function u2(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var s=i[1];if(Array.isArray(s)&&!(1>s.length)){var f=s[0];if(f!="noop"&&f!="stop"&&f!="close")for(var y=1;y<s.length;y++)s[y]=""}}}}return Ih(n)}catch{return e}}var or={},ep=null;function Mh(){return ep=ep||new Ve}or.Ta="serverreachability";function vy(t){Ze.call(this,or.Ta,t)}He(vy,Ze);function ps(t){const e=Mh();Ye(e,new vy(e))}or.STAT_EVENT="statevent";function yy(t,e){Ze.call(this,or.STAT_EVENT,t),this.stat=e}He(yy,Ze);function rt(t){const e=Mh();Ye(e,new yy(e,t))}or.Ua="timingevent";function _y(t,e){Ze.call(this,or.Ua,t),this.size=e}He(_y,Ze);function Os(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return le.setTimeout(function(){t()},e)}var Fh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},c2={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Nh(){}Nh.prototype.h=null;function tp(t){return t.h||(t.h=t.i())}function h2(){}var bs={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Bh(){Ze.call(this,"d")}He(Bh,Ze);function jh(){Ze.call(this,"c")}He(jh,Ze);var nc;function ja(){}He(ja,Nh);ja.prototype.g=function(){return new XMLHttpRequest};ja.prototype.i=function(){return{}};nc=new ja;function As(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new ds(this),this.P=f2,t=Zu?125:void 0,this.V=new Na(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new wy}function wy(){this.i=null,this.g="",this.h=!1}var f2=45e3,ic={},ia={};ne=As.prototype;ne.setTimeout=function(t){this.P=t};function rc(t,e,n){t.L=1,t.v=za(wn(e)),t.s=n,t.S=!0,Cy(t,null)}function Cy(t,e){t.G=Date.now(),Ps(t),t.A=wn(t.v);var n=t.A,i=t.W;Array.isArray(i)||(i=[String(i)]),Ay(n.i,"t",i),t.C=0,n=t.l.J,t.h=new wy,t.g=qy(t.l,n?e:null,!t.s),0<t.O&&(t.M=new s2(Je(t.Pa,t,t.g),t.O)),gy(t.U,t.g,"readystatechange",t.nb),e=t.I?sy(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),ps(),o2(t.j,t.u,t.A,t.m,t.W,t.s)}ne.nb=function(t){t=t.target;const e=this.M;e&&tn(t)==3?e.l():this.Pa(t)};ne.Pa=function(t){try{if(t==this.g)e:{const p=tn(this.g);var e=this.g.Ia();const o=this.g.da();if(!(3>p)&&(p!=3||Zu||this.g&&(this.h.h||this.g.ja()||sp(this.g)))){this.J||p!=4||e==7||(e==8||0>=o?ps(3):ps(2)),Ua(this);var n=this.g.da();this.ca=n;t:if(Sy(this)){var i=sp(this.g);t="";var s=i.length,f=tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ri(this),Vr(this);var y="";break t}this.h.i=new le.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:f&&e==s-1});i.splice(0,s),this.h.g+=t,this.C=0,y=this.h.g}else y=this.g.ja();if(this.i=n==200,a2(this.j,this.u,this.A,this.m,this.W,p,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var d,r=this.g;if((d=r.g?r.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ls(d)){var h=d;break t}}h=null}if(n=h)Ni(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,sc(this,n);else{this.i=!1,this.o=3,rt(12),ri(this),Vr(this);break e}}this.S?(Ty(this,p,y),Zu&&this.i&&p==3&&(gy(this.U,this.V,"tick",this.mb),this.V.start())):(Ni(this.j,this.m,y,null),sc(this,y)),p==4&&ri(this),this.i&&!this.J&&(p==4?Xy(this.l,this):(this.i=!1,Ps(this)))}else R2(this.g),n==400&&0<y.indexOf("Unknown SID")?(this.o=3,rt(12)):(this.o=0,rt(13)),ri(this),Vr(this)}}}catch{}finally{}};function Sy(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function Ty(t,e,n){let i=!0,s;for(;!t.J&&t.C<n.length;)if(s=d2(t,n),s==ia){e==4&&(t.o=4,rt(14),i=!1),Ni(t.j,t.m,null,"[Incomplete Response]");break}else if(s==ic){t.o=4,rt(15),Ni(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else Ni(t.j,t.m,s,null),sc(t,s);Sy(t)&&s!=ia&&s!=ic&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,rt(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Wh(e),e.M=!0,rt(11))):(Ni(t.j,t.m,n,"[Invalid Chunked Response]"),ri(t),Vr(t))}ne.mb=function(){if(this.g){var t=tn(this.g),e=this.g.ja();this.C<e.length&&(Ua(this),Ty(this,t,e),this.i&&t!=4&&Ps(this))}};function d2(t,e){var n=t.C,i=e.indexOf(`
`,n);return i==-1?ia:(n=Number(e.substring(n,i)),isNaN(n)?ic:(i+=1,i+n>e.length?ia:(e=e.slice(i,i+n),t.C=i+n,e)))}ne.cancel=function(){this.J=!0,ri(this)};function Ps(t){t.Y=Date.now()+t.P,xy(t,t.P)}function xy(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Os(Je(t.lb,t),e)}function Ua(t){t.B&&(le.clearTimeout(t.B),t.B=null)}ne.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(l2(this.j,this.A),this.L!=2&&(ps(),rt(17)),ri(this),this.o=2,Vr(this)):xy(this,this.Y-t)};function Vr(t){t.l.H==0||t.J||Xy(t.l,t)}function ri(t){Ua(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Rh(t.V),my(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function sc(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||oc(n.i,t))){if(!t.K&&oc(n.i,t)&&n.H==3){try{var i=n.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var s=i;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)oa(n),Wa(n);else break e;$h(n),rt(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&n.A==0&&!n.v&&(n.v=Os(Je(n.ib,n),6e3));if(1>=Dy(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else si(n,11)}else if((t.K||n.g==t)&&oa(n),!ls(e))for(s=n.Ja.g.parse(e),e=0;e<s.length;e++){let h=s[e];if(n.V=h[0],h=h[1],n.H==2)if(h[0]=="c"){n.K=h[1],n.pa=h[2];const p=h[3];p!=null&&(n.ra=p,n.l.info("VER="+n.ra));const o=h[4];o!=null&&(n.Ga=o,n.l.info("SVER="+n.Ga));const l=h[5];l!=null&&typeof l=="number"&&0<l&&(i=1.5*l,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const a=t.g;if(a){const c=a.g?a.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var f=i.i;f.g||c.indexOf("spdy")==-1&&c.indexOf("quic")==-1&&c.indexOf("h2")==-1||(f.j=f.l,f.g=new Set,f.h&&(Uh(f,f.h),f.h=null))}if(i.F){const g=a.g?a.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(i.Da=g,Te(i.I,i.F,g))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),i=n;var y=t;if(i.wa=Ky(i,i.J?i.pa:null,i.Y),y.K){Ry(i.i,y);var d=y,r=i.L;r&&d.setTimeout(r),d.B&&(Ua(d),Ps(d)),i.g=y}else $y(i);0<n.j.length&&Xa(n)}else h[0]!="stop"&&h[0]!="close"||si(n,7);else n.H==3&&(h[0]=="stop"||h[0]=="close"?h[0]=="stop"?si(n,7):Hh(n):h[0]!="noop"&&n.h&&n.h.Aa(h),n.A=0)}}ps(4)}catch{}}function p2(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Ra(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function g2(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Ra(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}function Ey(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Ra(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=g2(t),i=p2(t),s=i.length,f=0;f<s;f++)e.call(void 0,i[f],n&&n[f],t)}var ky=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function m2(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),s=null;if(0<=i){var f=t[n].substring(0,i);s=t[n].substring(i+1)}else f=t[n];e(f,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function ui(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof ui){this.h=t.h,ra(this,t.j),this.s=t.s,this.g=t.g,sa(this,t.m),this.l=t.l;var e=t.i,n=new gs;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),np(this,n),this.o=t.o}else t&&(e=String(t).match(ky))?(this.h=!1,ra(this,e[1]||"",!0),this.s=Or(e[2]||""),this.g=Or(e[3]||"",!0),sa(this,e[4]),this.l=Or(e[5]||"",!0),np(this,e[6]||"",!0),this.o=Or(e[7]||"")):(this.h=!1,this.i=new gs(null,this.h))}ui.prototype.toString=function(){var t=[],e=this.j;e&&t.push(br(e,ip,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(br(e,ip,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(br(n,n.charAt(0)=="/"?_2:y2,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",br(n,C2)),t.join("")};function wn(t){return new ui(t)}function ra(t,e,n){t.j=n?Or(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function sa(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function np(t,e,n){e instanceof gs?(t.i=e,S2(t.i,t.h)):(n||(e=br(e,w2)),t.i=new gs(e,t.h))}function Te(t,e,n){t.i.set(e,n)}function za(t){return Te(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Or(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function br(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,v2),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function v2(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var ip=/[#\/\?@]/g,y2=/[#\?:]/g,_2=/[#\?]/g,w2=/[#\?@]/g,C2=/#/g;function gs(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Gn(t){t.g||(t.g=new Map,t.h=0,t.i&&m2(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}ne=gs.prototype;ne.add=function(t,e){Gn(this),this.i=null,t=ar(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Oy(t,e){Gn(t),e=ar(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function by(t,e){return Gn(t),e=ar(t,e),t.g.has(e)}ne.forEach=function(t,e){Gn(this),this.g.forEach(function(n,i){n.forEach(function(s){t.call(e,s,i,this)},this)},this)};ne.ta=function(){Gn(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const s=t[i];for(let f=0;f<s.length;f++)n.push(e[i])}return n};ne.Z=function(t){Gn(this);let e=[];if(typeof t=="string")by(this,t)&&(e=e.concat(this.g.get(ar(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};ne.set=function(t,e){return Gn(this),this.i=null,t=ar(this,t),by(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};ne.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function Ay(t,e,n){Oy(t,e),0<n.length&&(t.i=null,t.g.set(ar(t,e),xh(n)),t.h+=n.length)}ne.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const f=encodeURIComponent(String(i)),y=this.Z(i);for(i=0;i<y.length;i++){var s=f;y[i]!==""&&(s+="="+encodeURIComponent(String(y[i]))),t.push(s)}}return this.i=t.join("&")};function ar(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function S2(t,e){e&&!t.j&&(Gn(t),t.i=null,t.g.forEach(function(n,i){var s=i.toLowerCase();i!=s&&(Oy(this,i),Ay(this,s,n))},t)),t.j=e}var T2=class{constructor(t,e){this.g=t,this.map=e}};function Py(t){this.l=t||x2,le.PerformanceNavigationTiming?(t=le.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(le.g&&le.g.Ka&&le.g.Ka()&&le.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var x2=10;function Iy(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Dy(t){return t.h?1:t.g?t.g.size:0}function oc(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Uh(t,e){t.g?t.g.add(e):t.h=e}function Ry(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Py.prototype.cancel=function(){if(this.i=Ly(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function Ly(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return xh(t.i)}var E2=class{stringify(t){return le.JSON.stringify(t,void 0)}parse(t){return le.JSON.parse(t,void 0)}};function k2(){this.g=new E2}function O2(t,e,n){const i=n||"";try{Ey(t,function(s,f){let y=s;Es(s)&&(y=Ih(s)),e.push(i+f+"="+encodeURIComponent(y))})}catch(s){throw e.push(i+"type="+encodeURIComponent("_badmap")),s}}function b2(t,e){const n=new Ba;if(le.Image){const i=new Image;i.onload=io(so,n,i,"TestLoadImage: loaded",!0,e),i.onerror=io(so,n,i,"TestLoadImage: error",!1,e),i.onabort=io(so,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=io(so,n,i,"TestLoadImage: timeout",!1,e),le.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function so(t,e,n,i,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(i)}catch{}}function Va(t){this.l=t.ec||null,this.j=t.ob||!1}He(Va,Nh);Va.prototype.g=function(){return new Ha(this.l,this.j)};Va.prototype.i=function(t){return function(){return t}}({});function Ha(t,e){Ve.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=zh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}He(Ha,Ve);var zh=0;ne=Ha.prototype;ne.open=function(t,e){if(this.readyState!=zh)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ms(this)};ne.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||le).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};ne.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Is(this)),this.readyState=zh};ne.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ms(this)),this.g&&(this.readyState=3,ms(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof le.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;My(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function My(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}ne.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Is(this):ms(this),this.readyState==3&&My(this)}};ne.Za=function(t){this.g&&(this.response=this.responseText=t,Is(this))};ne.Ya=function(t){this.g&&(this.response=t,Is(this))};ne.ka=function(){this.g&&Is(this)};function Is(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ms(t)}ne.setRequestHeader=function(t,e){this.v.append(t,e)};ne.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};ne.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function ms(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Ha.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var A2=le.JSON.parse;function Le(t){Ve.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Fy,this.L=this.M=!1}He(Le,Ve);var Fy="",P2=/^https?$/i,I2=["POST","PUT"];ne=Le.prototype;ne.Oa=function(t){this.M=t};ne.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():nc.g(),this.C=this.u?tp(this.u):tp(nc),this.g.onreadystatechange=Je(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(f){rp(this,f);return}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var s in i)n.set(s,i[s]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(const f of i.keys())n.set(f,i.get(f));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(f=>f.toLowerCase()=="content-type"),s=le.FormData&&t instanceof le.FormData,!(0<=ty(I2,e))||i||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[f,y]of n)this.g.setRequestHeader(f,y);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{jy(this),0<this.B&&((this.L=D2(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Je(this.ua,this)):this.A=Lh(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(f){rp(this,f)}};function D2(t){return us&&typeof t.timeout=="number"&&t.ontimeout!==void 0}ne.ua=function(){typeof Th<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ye(this,"timeout"),this.abort(8))};function rp(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Ny(t),$a(t)}function Ny(t){t.F||(t.F=!0,Ye(t,"complete"),Ye(t,"error"))}ne.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ye(this,"complete"),Ye(this,"abort"),$a(this))};ne.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),$a(this,!0)),Le.$.N.call(this)};ne.La=function(){this.s||(this.G||this.v||this.l?By(this):this.kb())};ne.kb=function(){By(this)};function By(t){if(t.h&&typeof Th<"u"&&(!t.C[1]||tn(t)!=4||t.da()!=2)){if(t.v&&tn(t)==4)Lh(t.La,0,t);else if(Ye(t,"readystatechange"),tn(t)==4){t.h=!1;try{const y=t.da();e:switch(y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var i;if(i=y===0){var s=String(t.I).match(ky)[1]||null;!s&&le.self&&le.self.location&&(s=le.self.location.protocol.slice(0,-1)),i=!P2.test(s?s.toLowerCase():"")}n=i}if(n)Ye(t,"complete"),Ye(t,"success");else{t.m=6;try{var f=2<tn(t)?t.g.statusText:""}catch{f=""}t.j=f+" ["+t.da()+"]",Ny(t)}}finally{$a(t)}}}}function $a(t,e){if(t.g){jy(t);const n=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Ye(t,"ready");try{n.onreadystatechange=i}catch{}}}function jy(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(le.clearTimeout(t.A),t.A=null)}ne.isActive=function(){return!!this.g};function tn(t){return t.g?t.g.readyState:0}ne.da=function(){try{return 2<tn(this)?this.g.status:-1}catch{return-1}};ne.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};ne.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),A2(e)}};function sp(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Fy:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function R2(t){const e={};t=(t.g&&2<=tn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let i=0;i<t.length;i++){if(ls(t[i]))continue;var n=n2(t[i]);const s=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const f=e[s]||[];e[s]=f,f.push(n)}KE(e,function(i){return i.join(", ")})}ne.Ia=function(){return this.m};ne.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Uy(t){let e="";return kh(t,function(n,i){e+=i,e+=":",e+=n,e+=`\r
`}),e}function Vh(t,e,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=Uy(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Te(t,e,n))}function wr(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function zy(t){this.Ga=0,this.j=[],this.l=new Ba,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=wr("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=wr("baseRetryDelayMs",5e3,t),this.hb=wr("retryDelaySeedMs",1e4,t),this.eb=wr("forwardChannelMaxRetries",2,t),this.xa=wr("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new Py(t&&t.concurrentRequestLimit),this.Ja=new k2,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}ne=zy.prototype;ne.ra=8;ne.H=1;function Hh(t){if(Vy(t),t.H==3){var e=t.W++,n=wn(t.I);if(Te(n,"SID",t.K),Te(n,"RID",e),Te(n,"TYPE","terminate"),Ds(t,n),e=new As(t,t.l,e),e.L=2,e.v=za(wn(n)),n=!1,le.navigator&&le.navigator.sendBeacon)try{n=le.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&le.Image&&(new Image().src=e.v,n=!0),n||(e.g=qy(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Ps(e)}Gy(t)}function Wa(t){t.g&&(Wh(t),t.g.cancel(),t.g=null)}function Vy(t){Wa(t),t.u&&(le.clearTimeout(t.u),t.u=null),oa(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&le.clearTimeout(t.m),t.m=null)}function Xa(t){if(!Iy(t.i)&&!t.m){t.m=!0;var e=t.Na;hs||dy(),fs||(hs(),fs=!0),Dh.add(e,t),t.C=0}}function L2(t,e){return Dy(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Os(Je(t.Na,t,e),Yy(t,t.C)),t.C++,!0)}ne.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const s=new As(this,this.l,t);let f=this.s;if(this.U&&(f?(f=sy(f),oy(f,this.U)):f=this.U),this.o!==null||this.O||(s.I=f,f=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var i=this.j[n];if("__data__"in i.map&&(i=i.map.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Hy(this,s,e),n=wn(this.I),Te(n,"RID",t),Te(n,"CVER",22),this.F&&Te(n,"X-HTTP-Session-Id",this.F),Ds(this,n),f&&(this.O?e="headers="+encodeURIComponent(String(Uy(f)))+"&"+e:this.o&&Vh(n,this.o,f)),Uh(this.i,s),this.bb&&Te(n,"TYPE","init"),this.P?(Te(n,"$req",e),Te(n,"SID","null"),s.aa=!0,rc(s,n,null)):rc(s,n,e),this.H=2}}else this.H==3&&(t?op(this,t):this.j.length==0||Iy(this.i)||op(this))};function op(t,e){var n;e?n=e.m:n=t.W++;const i=wn(t.I);Te(i,"SID",t.K),Te(i,"RID",n),Te(i,"AID",t.V),Ds(t,i),t.o&&t.s&&Vh(i,t.o,t.s),n=new As(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Hy(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Uh(t.i,n),rc(n,i,e)}function Ds(t,e){t.na&&kh(t.na,function(n,i){Te(e,i,n)}),t.h&&Ey({},function(n,i){Te(e,i,n)})}function Hy(t,e,n){n=Math.min(t.j.length,n);var i=t.h?Je(t.h.Va,t.h,t):null;e:{var s=t.j;let f=-1;for(;;){const y=["count="+n];f==-1?0<n?(f=s[0].g,y.push("ofs="+f)):f=0:y.push("ofs="+f);let d=!0;for(let r=0;r<n;r++){let h=s[r].g;const p=s[r].map;if(h-=f,0>h)f=Math.max(0,s[r].g-100),d=!1;else try{O2(p,y,"req"+h+"_")}catch{i&&i(p)}}if(d){i=y.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,i}function $y(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;hs||dy(),fs||(hs(),fs=!0),Dh.add(e,t),t.A=0}}function $h(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Os(Je(t.Ma,t),Yy(t,t.A)),t.A++,!0)}ne.Ma=function(){if(this.u=null,Wy(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Os(Je(this.jb,this),t)}};ne.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,rt(10),Wa(this),Wy(this))};function Wh(t){t.B!=null&&(le.clearTimeout(t.B),t.B=null)}function Wy(t){t.g=new As(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=wn(t.wa);Te(e,"RID","rpc"),Te(e,"SID",t.K),Te(e,"AID",t.V),Te(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Te(e,"TO",t.qa),Te(e,"TYPE","xmlhttp"),Ds(t,e),t.o&&t.s&&Vh(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=za(wn(e)),n.s=null,n.S=!0,Cy(n,t)}ne.ib=function(){this.v!=null&&(this.v=null,Wa(this),$h(this),rt(19))};function oa(t){t.v!=null&&(le.clearTimeout(t.v),t.v=null)}function Xy(t,e){var n=null;if(t.g==e){oa(t),Wh(t),t.g=null;var i=2}else if(oc(t.i,e))n=e.F,Ry(t.i,e),i=1;else return;if(t.H!=0){if(e.i)if(i==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var s=t.C;i=Mh(),Ye(i,new _y(i,n)),Xa(t)}else $y(t);else if(s=e.o,s==3||s==0&&0<e.ca||!(i==1&&L2(t,e)||i==2&&$h(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),s){case 1:si(t,5);break;case 4:si(t,10);break;case 3:si(t,6);break;default:si(t,2)}}}function Yy(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function si(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var i=Je(t.pb,t);n||(n=new ui("//www.google.com/images/cleardot.gif"),le.location&&le.location.protocol=="http"||ra(n,"https"),za(n)),b2(n.toString(),i)}else rt(2);t.H=0,t.h&&t.h.za(e),Gy(t),Vy(t)}ne.pb=function(t){t?(this.l.info("Successfully pinged google.com"),rt(2)):(this.l.info("Failed to ping google.com"),rt(1))};function Gy(t){if(t.H=0,t.ma=[],t.h){const e=Ly(t.i);(e.length!=0||t.j.length!=0)&&(Kd(t.ma,e),Kd(t.ma,t.j),t.i.i.length=0,xh(t.j),t.j.length=0),t.h.ya()}}function Ky(t,e,n){var i=n instanceof ui?wn(n):new ui(n);if(i.g!="")e&&(i.g=e+"."+i.g),sa(i,i.m);else{var s=le.location;i=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var f=new ui(null);i&&ra(f,i),e&&(f.g=e),s&&sa(f,s),n&&(f.l=n),i=f}return n=t.F,e=t.Da,n&&e&&Te(i,n,e),Te(i,"VER",t.ra),Ds(t,i),i}function qy(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Le(new Va({ob:!0})):new Le(t.va),e.Oa(t.J),e}ne.isActive=function(){return!!this.h&&this.h.isActive(this)};function Qy(){}ne=Qy.prototype;ne.Ba=function(){};ne.Aa=function(){};ne.za=function(){};ne.ya=function(){};ne.isActive=function(){return!0};ne.Va=function(){};function Bt(t,e){Ve.call(this),this.g=new zy(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!ls(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ls(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new lr(this)}He(Bt,Ve);Bt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;rt(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Ky(t,null,t.Y),Xa(t)};Bt.prototype.close=function(){Hh(this.g)};Bt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Ih(t),t=n);e.j.push(new T2(e.fb++,t)),e.H==3&&Xa(e)};Bt.prototype.N=function(){this.g.h=null,delete this.j,Hh(this.g),delete this.g,Bt.$.N.call(this)};function Jy(t){Bh.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}He(Jy,Bh);function Zy(){jh.call(this),this.status=1}He(Zy,jh);function lr(t){this.g=t}He(lr,Qy);lr.prototype.Ba=function(){Ye(this.g,"a")};lr.prototype.Aa=function(t){Ye(this.g,new Jy(t))};lr.prototype.za=function(t){Ye(this.g,new Zy)};lr.prototype.ya=function(){Ye(this.g,"b")};function M2(){this.blockSize=-1}function ln(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}He(ln,M2);ln.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Vl(t,e,n){n||(n=0);var i=Array(16);if(typeof e=="string")for(var s=0;16>s;++s)i[s]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(s=0;16>s;++s)i[s]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],s=t.g[2];var f=t.g[3],y=e+(f^n&(s^f))+i[0]+3614090360&4294967295;e=n+(y<<7&4294967295|y>>>25),y=f+(s^e&(n^s))+i[1]+3905402710&4294967295,f=e+(y<<12&4294967295|y>>>20),y=s+(n^f&(e^n))+i[2]+606105819&4294967295,s=f+(y<<17&4294967295|y>>>15),y=n+(e^s&(f^e))+i[3]+3250441966&4294967295,n=s+(y<<22&4294967295|y>>>10),y=e+(f^n&(s^f))+i[4]+4118548399&4294967295,e=n+(y<<7&4294967295|y>>>25),y=f+(s^e&(n^s))+i[5]+1200080426&4294967295,f=e+(y<<12&4294967295|y>>>20),y=s+(n^f&(e^n))+i[6]+2821735955&4294967295,s=f+(y<<17&4294967295|y>>>15),y=n+(e^s&(f^e))+i[7]+4249261313&4294967295,n=s+(y<<22&4294967295|y>>>10),y=e+(f^n&(s^f))+i[8]+1770035416&4294967295,e=n+(y<<7&4294967295|y>>>25),y=f+(s^e&(n^s))+i[9]+2336552879&4294967295,f=e+(y<<12&4294967295|y>>>20),y=s+(n^f&(e^n))+i[10]+4294925233&4294967295,s=f+(y<<17&4294967295|y>>>15),y=n+(e^s&(f^e))+i[11]+2304563134&4294967295,n=s+(y<<22&4294967295|y>>>10),y=e+(f^n&(s^f))+i[12]+1804603682&4294967295,e=n+(y<<7&4294967295|y>>>25),y=f+(s^e&(n^s))+i[13]+4254626195&4294967295,f=e+(y<<12&4294967295|y>>>20),y=s+(n^f&(e^n))+i[14]+2792965006&4294967295,s=f+(y<<17&4294967295|y>>>15),y=n+(e^s&(f^e))+i[15]+1236535329&4294967295,n=s+(y<<22&4294967295|y>>>10),y=e+(s^f&(n^s))+i[1]+4129170786&4294967295,e=n+(y<<5&4294967295|y>>>27),y=f+(n^s&(e^n))+i[6]+3225465664&4294967295,f=e+(y<<9&4294967295|y>>>23),y=s+(e^n&(f^e))+i[11]+643717713&4294967295,s=f+(y<<14&4294967295|y>>>18),y=n+(f^e&(s^f))+i[0]+3921069994&4294967295,n=s+(y<<20&4294967295|y>>>12),y=e+(s^f&(n^s))+i[5]+3593408605&4294967295,e=n+(y<<5&4294967295|y>>>27),y=f+(n^s&(e^n))+i[10]+38016083&4294967295,f=e+(y<<9&4294967295|y>>>23),y=s+(e^n&(f^e))+i[15]+3634488961&4294967295,s=f+(y<<14&4294967295|y>>>18),y=n+(f^e&(s^f))+i[4]+3889429448&4294967295,n=s+(y<<20&4294967295|y>>>12),y=e+(s^f&(n^s))+i[9]+568446438&4294967295,e=n+(y<<5&4294967295|y>>>27),y=f+(n^s&(e^n))+i[14]+3275163606&4294967295,f=e+(y<<9&4294967295|y>>>23),y=s+(e^n&(f^e))+i[3]+4107603335&4294967295,s=f+(y<<14&4294967295|y>>>18),y=n+(f^e&(s^f))+i[8]+1163531501&4294967295,n=s+(y<<20&4294967295|y>>>12),y=e+(s^f&(n^s))+i[13]+2850285829&4294967295,e=n+(y<<5&4294967295|y>>>27),y=f+(n^s&(e^n))+i[2]+4243563512&4294967295,f=e+(y<<9&4294967295|y>>>23),y=s+(e^n&(f^e))+i[7]+1735328473&4294967295,s=f+(y<<14&4294967295|y>>>18),y=n+(f^e&(s^f))+i[12]+2368359562&4294967295,n=s+(y<<20&4294967295|y>>>12),y=e+(n^s^f)+i[5]+4294588738&4294967295,e=n+(y<<4&4294967295|y>>>28),y=f+(e^n^s)+i[8]+2272392833&4294967295,f=e+(y<<11&4294967295|y>>>21),y=s+(f^e^n)+i[11]+1839030562&4294967295,s=f+(y<<16&4294967295|y>>>16),y=n+(s^f^e)+i[14]+4259657740&4294967295,n=s+(y<<23&4294967295|y>>>9),y=e+(n^s^f)+i[1]+2763975236&4294967295,e=n+(y<<4&4294967295|y>>>28),y=f+(e^n^s)+i[4]+1272893353&4294967295,f=e+(y<<11&4294967295|y>>>21),y=s+(f^e^n)+i[7]+4139469664&4294967295,s=f+(y<<16&4294967295|y>>>16),y=n+(s^f^e)+i[10]+3200236656&4294967295,n=s+(y<<23&4294967295|y>>>9),y=e+(n^s^f)+i[13]+681279174&4294967295,e=n+(y<<4&4294967295|y>>>28),y=f+(e^n^s)+i[0]+3936430074&4294967295,f=e+(y<<11&4294967295|y>>>21),y=s+(f^e^n)+i[3]+3572445317&4294967295,s=f+(y<<16&4294967295|y>>>16),y=n+(s^f^e)+i[6]+76029189&4294967295,n=s+(y<<23&4294967295|y>>>9),y=e+(n^s^f)+i[9]+3654602809&4294967295,e=n+(y<<4&4294967295|y>>>28),y=f+(e^n^s)+i[12]+3873151461&4294967295,f=e+(y<<11&4294967295|y>>>21),y=s+(f^e^n)+i[15]+530742520&4294967295,s=f+(y<<16&4294967295|y>>>16),y=n+(s^f^e)+i[2]+3299628645&4294967295,n=s+(y<<23&4294967295|y>>>9),y=e+(s^(n|~f))+i[0]+4096336452&4294967295,e=n+(y<<6&4294967295|y>>>26),y=f+(n^(e|~s))+i[7]+1126891415&4294967295,f=e+(y<<10&4294967295|y>>>22),y=s+(e^(f|~n))+i[14]+2878612391&4294967295,s=f+(y<<15&4294967295|y>>>17),y=n+(f^(s|~e))+i[5]+4237533241&4294967295,n=s+(y<<21&4294967295|y>>>11),y=e+(s^(n|~f))+i[12]+1700485571&4294967295,e=n+(y<<6&4294967295|y>>>26),y=f+(n^(e|~s))+i[3]+2399980690&4294967295,f=e+(y<<10&4294967295|y>>>22),y=s+(e^(f|~n))+i[10]+4293915773&4294967295,s=f+(y<<15&4294967295|y>>>17),y=n+(f^(s|~e))+i[1]+2240044497&4294967295,n=s+(y<<21&4294967295|y>>>11),y=e+(s^(n|~f))+i[8]+1873313359&4294967295,e=n+(y<<6&4294967295|y>>>26),y=f+(n^(e|~s))+i[15]+4264355552&4294967295,f=e+(y<<10&4294967295|y>>>22),y=s+(e^(f|~n))+i[6]+2734768916&4294967295,s=f+(y<<15&4294967295|y>>>17),y=n+(f^(s|~e))+i[13]+1309151649&4294967295,n=s+(y<<21&4294967295|y>>>11),y=e+(s^(n|~f))+i[4]+4149444226&4294967295,e=n+(y<<6&4294967295|y>>>26),y=f+(n^(e|~s))+i[11]+3174756917&4294967295,f=e+(y<<10&4294967295|y>>>22),y=s+(e^(f|~n))+i[2]+718787259&4294967295,s=f+(y<<15&4294967295|y>>>17),y=n+(f^(s|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(s+(y<<21&4294967295|y>>>11))&4294967295,t.g[2]=t.g[2]+s&4294967295,t.g[3]=t.g[3]+f&4294967295}ln.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,i=this.m,s=this.h,f=0;f<e;){if(s==0)for(;f<=n;)Vl(this,t,f),f+=this.blockSize;if(typeof t=="string"){for(;f<e;)if(i[s++]=t.charCodeAt(f++),s==this.blockSize){Vl(this,i),s=0;break}}else for(;f<e;)if(i[s++]=t[f++],s==this.blockSize){Vl(this,i),s=0;break}}this.h=s,this.i+=e};ln.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};function we(t,e){this.h=e;for(var n=[],i=!0,s=t.length-1;0<=s;s--){var f=t[s]|0;i&&f==e||(n[s]=f,i=!1)}this.g=n}var F2={};function Xh(t){return-128<=t&&128>t?HE(t,function(e){return new we([e|0],0>e?-1:0)}):new we([t|0],0>t?-1:0)}function nn(t){if(isNaN(t)||!isFinite(t))return Yi;if(0>t)return We(nn(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=ac;return new we(e,0)}function e0(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return We(e0(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=nn(Math.pow(e,8)),i=Yi,s=0;s<t.length;s+=8){var f=Math.min(8,t.length-s),y=parseInt(t.substring(s,s+f),e);8>f?(f=nn(Math.pow(e,f)),i=i.R(f).add(nn(y))):(i=i.R(n),i=i.add(nn(y)))}return i}var ac=4294967296,Yi=Xh(0),lc=Xh(1),ap=Xh(16777216);ne=we.prototype;ne.ea=function(){if(Dt(this))return-We(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:ac+i)*e,e*=ac}return t};ne.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(pn(this))return"0";if(Dt(this))return"-"+We(this).toString(t);for(var e=nn(Math.pow(t,6)),n=this,i="";;){var s=la(n,e).g;n=aa(n,s.R(e));var f=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=s,pn(n))return f+i;for(;6>f.length;)f="0"+f;i=f+i}};ne.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function pn(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Dt(t){return t.h==-1}ne.X=function(t){return t=aa(this,t),Dt(t)?-1:pn(t)?0:1};function We(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new we(n,~t.h).add(lc)}ne.abs=function(){return Dt(this)?We(this):this};ne.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,s=0;s<=e;s++){var f=i+(this.D(s)&65535)+(t.D(s)&65535),y=(f>>>16)+(this.D(s)>>>16)+(t.D(s)>>>16);i=y>>>16,f&=65535,y&=65535,n[s]=y<<16|f}return new we(n,n[n.length-1]&-2147483648?-1:0)};function aa(t,e){return t.add(We(e))}ne.R=function(t){if(pn(this)||pn(t))return Yi;if(Dt(this))return Dt(t)?We(this).R(We(t)):We(We(this).R(t));if(Dt(t))return We(this.R(We(t)));if(0>this.X(ap)&&0>t.X(ap))return nn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<t.g.length;s++){var f=this.D(i)>>>16,y=this.D(i)&65535,d=t.D(s)>>>16,r=t.D(s)&65535;n[2*i+2*s]+=y*r,oo(n,2*i+2*s),n[2*i+2*s+1]+=f*r,oo(n,2*i+2*s+1),n[2*i+2*s+1]+=y*d,oo(n,2*i+2*s+1),n[2*i+2*s+2]+=f*d,oo(n,2*i+2*s+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new we(n,0)};function oo(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Cr(t,e){this.g=t,this.h=e}function la(t,e){if(pn(e))throw Error("division by zero");if(pn(t))return new Cr(Yi,Yi);if(Dt(t))return e=la(We(t),e),new Cr(We(e.g),We(e.h));if(Dt(e))return e=la(t,We(e)),new Cr(We(e.g),e.h);if(30<t.g.length){if(Dt(t)||Dt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=lc,i=e;0>=i.X(t);)n=lp(n),i=lp(i);var s=Ti(n,1),f=Ti(i,1);for(i=Ti(i,2),n=Ti(n,2);!pn(i);){var y=f.add(i);0>=y.X(t)&&(s=s.add(n),f=y),i=Ti(i,1),n=Ti(n,1)}return e=aa(t,s.R(e)),new Cr(s,e)}for(s=Yi;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),f=nn(n),y=f.R(e);Dt(y)||0<y.X(t);)n-=i,f=nn(n),y=f.R(e);pn(f)&&(f=lc),s=s.add(f),t=aa(t,y)}return new Cr(s,t)}ne.gb=function(t){return la(this,t).h};ne.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new we(n,this.h&t.h)};ne.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new we(n,this.h|t.h)};ne.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new we(n,this.h^t.h)};function lp(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new we(n,t.h)}function Ti(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,s=[],f=0;f<i;f++)s[f]=0<e?t.D(f+n)>>>e|t.D(f+n+1)<<32-e:t.D(f+n);return new we(s,t.h)}Bt.prototype.send=Bt.prototype.u;Bt.prototype.open=Bt.prototype.m;Bt.prototype.close=Bt.prototype.close;Fh.NO_ERROR=0;Fh.TIMEOUT=8;Fh.HTTP_ERROR=6;c2.COMPLETE="complete";h2.EventType=bs;bs.OPEN="a";bs.CLOSE="b";bs.ERROR="c";bs.MESSAGE="d";Ve.prototype.listen=Ve.prototype.O;Le.prototype.listenOnce=Le.prototype.P;Le.prototype.getLastError=Le.prototype.Sa;Le.prototype.getLastErrorCode=Le.prototype.Ia;Le.prototype.getStatus=Le.prototype.da;Le.prototype.getResponseJson=Le.prototype.Wa;Le.prototype.getResponseText=Le.prototype.ja;Le.prototype.send=Le.prototype.ha;Le.prototype.setWithCredentials=Le.prototype.Oa;ln.prototype.digest=ln.prototype.l;ln.prototype.reset=ln.prototype.reset;ln.prototype.update=ln.prototype.j;we.prototype.add=we.prototype.add;we.prototype.multiply=we.prototype.R;we.prototype.modulo=we.prototype.gb;we.prototype.compare=we.prototype.X;we.prototype.toNumber=we.prototype.ea;we.prototype.toString=we.prototype.toString;we.prototype.getBits=we.prototype.D;we.fromNumber=nn;we.fromString=e0;var N2=we;const up="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}lt.UNAUTHENTICATED=new lt(null),lt.GOOGLE_CREDENTIALS=new lt("google-credentials-uid"),lt.FIRST_PARTY=new lt("first-party-uid"),lt.MOCK_USER=new lt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ya="10.5.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=new Aa("@firebase/firestore");function St(t,...e){if(ua.logLevel<=ve.DEBUG){const n=e.map(t0);ua.debug(`Firestore (${Ya}): ${t}`,...n)}}function Yh(t,...e){if(ua.logLevel<=ve.ERROR){const n=e.map(t0);ua.error(`Firestore (${Ya}): ${t}`,...n)}}function t0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(t="Unexpected state"){const e=`FIRESTORE (${Ya}) INTERNAL ASSERTION FAILED: `+t;throw Yh(e),new Error(e)}function uc(t,e){t||n0()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _t extends Kt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class j2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(lt.UNAUTHENTICATED))}shutdown(){}}class U2{constructor(e){this.t=e,this.currentUser=lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i;const s=r=>this.i!==i?(i=this.i,n(r)):Promise.resolve();let f=new Gi;this.o=()=>{this.i++,this.currentUser=this.u(),f.resolve(),f=new Gi,e.enqueueRetryable(()=>s(this.currentUser))};const y=()=>{const r=f;e.enqueueRetryable(async()=>{await r.promise,await s(this.currentUser)})},d=r=>{St("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=r,this.auth.addAuthTokenListener(this.o),y()};this.t.onInit(r=>d(r)),setTimeout(()=>{if(!this.auth){const r=this.t.getImmediate({optional:!0});r?d(r):(St("FirebaseAuthCredentialsProvider","Auth not yet detected"),f.resolve(),f=new Gi)}},0),y()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(St("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(uc(typeof i.accessToken=="string"),new B2(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return uc(e===null||typeof e=="string"),new lt(e)}}class z2{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=lt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class V2{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new z2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class H2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const i=f=>{f.error!=null&&St("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${f.error.message}`);const y=f.token!==this.R;return this.R=f.token,St("FirebaseAppCheckTokenProvider",`Received ${y?"new":"existing"} token.`),y?n(f.token):Promise.resolve()};this.o=f=>{e.enqueueRetryable(()=>i(f))};const s=f=>{St("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=f,this.appCheck.addTokenListener(this.o)};this.A.onInit(f=>s(f)),setTimeout(()=>{if(!this.appCheck){const f=this.A.getImmediate({optional:!0});f?s(f):St("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(uc(typeof n.token=="string"),this.R=n.token,new H2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const s=W2(40);for(let f=0;f<s.length;++f)i.length<20&&s[f]<n&&(i+=e.charAt(s[f]%e.length))}return i}}function i0(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e,n,i,s,f,y,d,r,h){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=f,this.forceLongPolling=y,this.autoDetectLongPolling=d,this.longPollingOptions=r,this.useFetchStreams=h}}class ca{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ca("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ca&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cp,pe;(pe=cp||(cp={}))[pe.OK=0]="OK",pe[pe.CANCELLED=1]="CANCELLED",pe[pe.UNKNOWN=2]="UNKNOWN",pe[pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pe[pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pe[pe.NOT_FOUND=5]="NOT_FOUND",pe[pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",pe[pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",pe[pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",pe[pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pe[pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pe[pe.ABORTED=10]="ABORTED",pe[pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",pe[pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",pe[pe.INTERNAL=13]="INTERNAL",pe[pe.UNAVAILABLE=14]="UNAVAILABLE",pe[pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new N2([4294967295,4294967295],0);function Hl(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e,n,i=1e3,s=1.5,f=6e4){this.si=e,this.timerId=n,this.Fo=i,this.Mo=s,this.xo=f,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const n=Math.floor(this.Oo+this.qo()),i=Math.max(0,Date.now()-this.Bo),s=Math.max(0,n-i);s>0&&St("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,s,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n,i,s,f){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=f,this.deferred=new Gi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(y=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,f){const y=Date.now()+i,d=new Gh(e,n,y,s,f);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _t(yt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function K2(t,e){if(Yh("AsyncQueue",`${e}: ${t}`),i0(t))return new _t(yt.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e,n,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=lt.UNAUTHENTICATED,this.clientId=X2.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,async f=>{St("FirestoreClient","Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(i,f=>(St("FirestoreClient","Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new _t(yt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Gi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=K2(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp=new Map;function Q2(t,e,n,i){if(e===!0&&i===!0)throw new _t(yt.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new _t(yt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new _t(yt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Q2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=r0((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(f){if(f.timeoutSeconds!==void 0){if(isNaN(f.timeoutSeconds))throw new _t(yt.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (must not be NaN)`);if(f.timeoutSeconds<5)throw new _t(yt.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (minimum allowed value is 5)`);if(f.timeoutSeconds>30)throw new _t(yt.INVALID_ARGUMENT,`invalid long polling timeout: ${f.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class J2{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fp({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new _t(yt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new _t(yt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fp(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new j2;switch(i.type){case"firstParty":return new V2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new _t(yt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=hp.get(n);i&&(St("ComponentProvider","Removing Datastore"),hp.delete(n),i.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new G2(this,"async_queue_retry"),this.iu=()=>{const n=Hl();n&&St("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};const e=Hl();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const n=Hl();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});const n=new Gi;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}async _u(){if(this.Ya.length!==0){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!i0(e))throw e;St("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko(()=>this._u())}}ou(e){const n=this.Ja.then(()=>(this.tu=!0,e().catch(i=>{this.eu=i,this.tu=!1;const s=function(y){let d=y.message||"";return y.stack&&(d=y.stack.includes(y.message)?y.stack:y.message+`
`+y.stack),d}(i);throw Yh("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.tu=!1,i))));return this.Ja=n,n}enqueueAfterDelay(e,n,i){this.su(),this.ru.indexOf(e)>-1&&(n=0);const s=Gh.createAndSchedule(this,e,n,i,f=>this.au(f));return this.Xa.push(s),s}su(){this.eu&&n0()}verifyOperationInProgress(){}async uu(){let e;do e=this.Ja,await e;while(e!==this.Ja)}cu(e){for(const n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Xa)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){const n=this.Xa.indexOf(e);this.Xa.splice(n,1)}}class ek extends J2{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=function(){return new Z2}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||tk(this),this._firestoreClient.terminate()}}function tk(t){var e,n,i;const s=t._freezeSettings(),f=function(d,r,h,p){return new Y2(d,r,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,r0(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new q2(t._authCredentials,t._appCheckCredentials,t._queue,f),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}(function(e,n=!0){(function(s){Ya=s})(Ts),Gt(new Nt("firestore",(i,{instanceIdentifier:s,options:f})=>{const y=i.getProvider("app").getImmediate(),d=new ek(new U2(i.getProvider("auth-internal")),new $2(i.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new _t(yt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ca(h.options.projectId,p)}(y,s),y);return f=Object.assign({useFetchStreams:n},f),d._setSettings(f),d},"PUBLIC").setMultipleInstances(!0)),gt(up,"4.3.2",e),gt(up,"4.3.2","esm2017")})();const s0=ct.createContext(null),o0=Qm({apiKey:"AIzaSyBhdsQNnmEGxDi8EpVBKKEigg61UaTyqpA",authDomain:"pikabobalex-0414.firebaseapp.com",databaseURL:"https://pikabobalex-0414-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"pikabobalex-0414",storageBucket:"pikabobalex-0414.appspot.com",messagingSenderId:"319169295391",appId:"1:319169295391:web:8c57ceb2de618a88c9512a",measurementId:"G-TSZ74HESQ0"});Yx(o0);const nk=vT(o0),ik=async t=>{const e=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),n=mT(nk,"signature/"+e),i=await pT(n,t,"data_url");return gT(i.ref)},rk=({children:t})=>{const[e,n]=ct.useState(null);return ct.useEffect(()=>{n({UploadString:ik})},[]),bt.jsx(s0.Provider,{value:e,children:t})};function sk(){const[t,e]=ct.useState(),n=ct.useRef(),i=ct.useContext(s0);return ct.useEffect(()=>{console.log(n.current)},[n]),ct.useEffect(()=>{const s=To();s.on("connect",()=>{console.log("connected")}),s.on("disconnect",()=>{console.log("disconnected")}),s.on("message",f=>{console.log(f)}),s.emit("signature","hello"),s.on("received",()=>{console.log("received")}),e(s)},[]),bt.jsx(bt.Fragment,{children:bt.jsxs("div",{className:"h-full w-full flex flex-col justify-center items-center gap-4",children:[bt.jsx("div",{className:" overflow-hidden rounded-2xl",children:bt.jsx(O1,{ref:n})}),bt.jsxs("div",{className:"flex gap-4",children:[bt.jsx("button",{className:" shadow-sm bg-white w-24 h-12 rounded-md text-gray-700 font-semibold uppercase",onClick:()=>{i.UploadString(n.current.toDataURL()).then(s=>{console.log(s),t==null||t.emit("signature",{url:s})})},children:"send"}),bt.jsx("button",{className:" shadow-sm bg-white w-24 h-12 rounded-md text-gray-700 font-semibold uppercase",onClick:()=>{var s,f;(s=n.current)==null||s.clear(),(f=n.current)==null||f.setBackgroundColor("#7a7a7a",()=>{var y;(y=n.current)==null||y.renderAll()})},children:"clear"})]})]})})}$l.createRoot(document.getElementById("root")).render(bt.jsx(rk,{children:bt.jsx(sk,{})}));
